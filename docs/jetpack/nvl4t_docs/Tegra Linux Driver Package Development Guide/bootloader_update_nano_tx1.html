<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- NVIDIA customization --><title>NVIDIA Jetson Linux Driver Package Software Features : Bootloader | NVIDIA Docs </title><link rel="Prev" href="bootloader_update.html" title="Previous" /><link rel="Next" href="bootloader_update_agx_tx2.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/bootloader_update_nano_tx1.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="pZN_002bW_002bQ2_002fpPfCIWa0PfBeqg" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_nano_tx1.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="fa"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --></header><div id="page_content_container" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px"><div id="page_content"><H1 id="wwpID0E0CI0HA" class="Heading_3_Top">Jetson Nano/TX1 Update and Redundancy</H1><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_nano_tx1.html#wwpID0E05H0HA">TegraBoot and Partition Layout</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_nano_tx1.html#wwpID0E0NH0HA">Redundancy Boot Firmware</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_nano_tx1.html#wwpID0E0IG0HA">Generating the Bootloader Update Payload (BUP)</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_nano_tx1.html#wwpID0E03E0HA">Bootloader Update</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_nano_tx1.html#wwpID0E0QE0HA">Bootloader Update Flow</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_nano_tx1.html#wwpID0E0BE0HA">Sample Logs in BUP Generation, Boot, and Update for BFS/KFS</a></div></dd></dl></div><div id="wwpID0E0BI0HA" class="Body_Text_Indent"><span class="Strong">Applies to</span>: Jetson Nano devices and Jetson TX1</div><div id="wwpID0E0AI0HA" class="Body_Text">The NVIDIA<span style="vertical-align: super">®</span> Jetson™ Nano and NVIDIA Jetson TX1 platforms use the Debian package facility to update Bootloader. The Bootloader update process performs Bootloader updates safely and ensures that a usable Bootloader partition exists at all times during an update.	</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA06H0HA" class="Note_Heading">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 351pt"><div id="wwpID0EEAA06H0HA" class="Note_Text">Before you study this topic you must become familiar with the following topics:</div><div id="wwpID0EDAA06H0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_jetson_nano.html#" title="Jetson Nano Boot Flow">Jetson Nano Boot Flow</a></span> or <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_tx1.html#" title="Jetson TX1 Boot Flow">Jetson TX1 Boot Flow</a></span></div><div id="wwpID0ECAA06H0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Information about the Jetson platform may be found in the NVIDIA Developer Center at:</div><div id="wwpID0EBAA06H0HA" class="Cell_Continue"><span class="Hyperlink"><a href="https://developer.nvidia.com/embedded-computing" target="external_window">https://developer.nvidia.com/embedded-computing</a></span></div><div id="wwpID0EAAA06H0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Hyperlink"><a href="https://developer.nvidia.com/embedded/downloads#?search=jetson%20nano%20developer%20kit%20user%20guide" target="external_window">Jetson Nano Developer Kit User Guide</a></span>.</div></td></tr></table></div><H4 id="wwpID0E05H0HA" class="Heading_4">TegraBoot and Partition Layout</H4><div id="wwpID0E04H0HA" class="Body_Text">The BCT is stored in a partition named <span class="Code_Char">BCT</span>. The NVIDIA flashing utility <span class="Code_Char">tegraflash.py</span> writes up to 64 instances of the BCT, depending on the amount of space allocated for the <span class="Code_Char">BCT</span> partition. Instances are aligned on consecutive 16&nbsp;KiB boundaries.</div><div id="wwpID0E03H0HA" class="Body_Text">The NVIDIA<span style="vertical-align: super">®</span> Tegra<span style="vertical-align: super">®</span> BootROM validates the BCT through an integrated checksum or RSA signature. If the calculated checksum or signature does not match the value in the BCT located at the beginning of the partition, the BootROM attempts to validate the next instances of the BCT. If the checksum or signature again does not match, the BootROM attempts to validate the next instance, and so on, until it finds a valid instance of the BCT or exhausts the available instances.</div><div id="wwpID0E02H0HA" class="Body_Text">On platforms that boot from eMMC memory (Jetson TX1, the Jetson Nano 4GB production module, and a Jetson Nano developer kit module that is used with an SD card), L4T uses two groups of files to implement redundancy:</div><div id="wwpID0E01H0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>A <span class="Strong">boot-file-set</span> (BFS) is a set of all of the files in a group of partitions that are concerned with booting. TegraBoot files are not part of a BFS, since BootROM loads TegraBoot, the TegraBoot loads the BFS.</div><div id="wwpID0E0ZH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>A <span class="Strong">kernel-file-set</span> (KFS) is a set of all of the files in a group of partitions that are concerned with loading the kernel.</div><div id="wwpID0E0YH0HA" class="Body_Text">The partitions included in a BFS and a KFS are listed in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_nano_tx1.html#wwpID0E0NH0HA" title="Jetson Nano/TX1 Update and Redundancy">Redundancy Boot Firmware</a></span>.</div><div id="wwpID0E0XH0HA" class="Body_Text">A BCT can contain two entries that indicate the locations (offset and size) and checksums or signatures for TegraBoot, the boot files, and the kernel files. The BootROM computes and validates the checksums or signatures for each TegraBoot entry. When it finds a valid set of checksums or signatures, it transfers control to the specified instance of TegraBoot.</div><div id="wwpID0E0WH0HA" class="Body_Text">TegraBoot computes and validates the checksums for the first BFS and the first KFS and the signatures the individual files. When the checksums and signatures have been validated, TegraBoot loads the appropriate boot files, such as:</div><div id="wwpID0E0VH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The TegraBoot CPU binary</div><div id="wwpID0E0UH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>DTB files used by Bootloader</div><div id="wwpID0E0TH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>DTB files used by the kernel</div><div id="wwpID0E0SH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Warmboot binary</div><div id="wwpID0E0RH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Trusted OS image</div><div id="wwpID0E0QH0HA" class="Body_Text">When all necessary boot files have been verified and loaded, TegraBoot transfers control to the boot loader, e.g. CBoot. The boot loader validates and loads the next-level software component, such as the Linux kernel or U‑Boot.</div><div id="wwpID0E0PH0HA" class="Body_Text">If TegraBoot fails to validate the first BFS andKFS, it overwrites itself and resets the board so that the BootROM can validate and load the next set of TegraBoot, BFS, and KFS.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0OH0HA" class="Note_Heading">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 324pt"><div id="wwpID0EAAA0OH0HA" class="Cell_Text">When Jetson Nano boots from an SD card it doesn’t use redundancy to load the BFS and KFS. It only uses the redundant TegraBoot partition (partition NVC). Because the partitions used by Bootloader are on the SD card, it is easy to replace the SD card to restore a corrupted Bootloader.</div></td></tr></table></div><H4 id="wwpID0E0NH0HA" class="Heading_4">Redundancy Boot Firmware</H4><div id="wwpID0E0MH0HA" class="Body_Text">The partition configuration file contains partitioning information for both the Tegra partition table and the GPT. They are at these locations:</div><div id="wwpID0E0LH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson TX1: <span class="Code_Char">bootloader/t210ref/cfg/gnu_linux_fastboot_emmc_full.xml</span></div><div id="wwpID0E0KH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For a Jetson Nano 4GB production module (with eMMC storage): <span class="Code_Char">bootloader/t210ref/cfg/flash_l4t_t210_emmc_p3448.xml</span></div><div id="wwpID0E0JH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For a Jetson Nano development module (with Micro SD storage): <span class="Code_Char">bootloader/t210ref/cfg/flash_l4t_t210_spi_sd_p3448.xml</span></div><div id="wwpID0E0IH0HA" class="Body_Text">The redundancy layout must contain these partitions, in order:</div><div id="wwpID0E0HH0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span><span class="Strong">Boot partitions</span>, which are used in the boot process, and are visible only to Bootloader.</div><div id="wwpID0E0GH0HA" class="List_Continue">Many of the boot partitions have redundant copy partitions. The copy partitions must have the same names as their primaries with the suffix ‘‑1’. For example, the <span class="Code_Char">NVC</span> partition’s copy must be named <span class="Code_Char">NVC‑1</span>.</div><div id="wwpID0E0FH0HA" class="List_Continue">The boot partitions are:</div><div id="wwpID0E0EH0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">BCT</span>, which contains redundant instances of the Boot Configuration Table. This must be the first partition on the boot device.</div><div id="wwpID0E0DH0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">NVC</span> contains TegraBoot. This must be the second boot partition. The following boot partitions, <span class="Code_Char">PT</span> through <span class="Code_Char">SPF</span>, are part of the <span class="Code_Char">BFS</span>.</div><div id="wwpID0E0CH0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">PT</span> contains layout information for each BFS, and indicates the beginning of each one. It is the first partition in the BFS.</div><div id="wwpID0E0BH0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">TBC</span> contains the TegraBoot CPU-side binary.</div><div id="wwpID0E0AH0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">RP1</span> contains TegraBoot DTBs.</div><div id="wwpID0E06G0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">EBT</span> contains CBoot.</div><div id="wwpID0E05G0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">WB0</span> contains the warm boot binary.</div><div id="wwpID0E04G0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">BPF</span> contains BPMP microcode.</div><div id="wwpID0E03G0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">NVC‑1</span> contains a copy of <span class="Code_Char">NVC</span>.</div><div id="wwpID0E02G0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">PT‑1</span> through <span class="Code_Char">BPF‑1</span> are copy partitions for the primaries <span class="Code_Char">NVC</span> through <span class="Code_Char">BPF</span>, making up a copy of the BFS, denoted <span class="Code_Char">BFS‑1</span>.</div><div id="wwpID0E01G0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">PAD</span> is an empty partition which ensures the <span class="Code_Char">VER</span> and <span class="Code_Char">VER_b</span> are at the very end of the boot partition.</div><div id="wwpID0E0ZG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">VER_b</span> contains additional version information for redundancy and version checking.</div><div id="wwpID0E0YG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">VER</span> contains version information.</div><div id="wwpID0E0XG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span><span class="Code_Char">GP1</span> contains the <span class="Code_Char">sdmmc_user</span> device’s primary GPT. All partitions defined after this one are configured in the Linux kernel, and are accessible by standard partition tools such as <span class="Code_Char">gdisk</span> and <span class="Code_Char">parted</span>.</div><div id="wwpID0E0WG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span><span class="Strong">User partitions</span>, which have a variety of uses. Some of them may be deleted, and/or may be mounted and used to store application files.</div><div id="wwpID0E0VG0HA" class="List_Continue">The following partitions constitute the kernel-file-set (KFS), and have redundant copy partitions:</div><div id="wwpID0E0UG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">DTB</span> contains kernel DTBs.</div><div id="wwpID0E0TG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">TOS</span> contains the trusted OS binary.</div><div id="wwpID0E0SG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">EKS</span> is optional, and is reserved for future use.</div><div id="wwpID0E0RG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">LNX</span> contains either the Linux kernel or U-Boot, depending on your choice of <span class="Code_Char">DFLT_KERNEL_IMAGE</span> in the configuration file.</div><div id="wwpID0E0QG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">DTB‑1</span> through <span class="Code_Char">EKS‑1</span> constitute a copy of the primary <span class="Code_Char">KFS</span>, denoted <span class="Code_Char">KFS‑1</span>.</div><div id="wwpID0E0PG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Other partitions, such as <span class="Code_Char">APP</span> and <span class="Code_Char">BMP</span>, are outside the scope of this document. For information about these partitions, see the appropriate subsection for your Jetson platform in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/part_config.html#wwconnect_header" title="Partition Configuration">Default Partition Overview</a></span>.</div><div id="wwpID0E0OG0HA" class="Body_Text">In summary, the overall layout for a partition configuration file is:</div><div id="wwpID0E0NG0HA" class="Body_Text"><span class="Code_Char">BCT</span><br /><span class="Code_Char">NVC</span><br />Boot-file-set (BFS): <span class="Code_Char">PT</span>, <span class="Code_Char">TBC</span>, <span class="Code_Char">RP1</span>, <span class="Code_Char">EBT</span>, <span class="Code_Char">WB0</span>, <span class="Code_Char">BPF</span><br /><span class="Code_Char">NVC-1</span><br />Boot-file-set copy (BFS-1): <span class="Code_Char">PT-1</span>, <span class="Code_Char">TBC-1</span>, <span class="Code_Char">RP1-1</span>, <span class="Code_Char">EBT-1</span>, <span class="Code_Char">WB0-1</span>, <span class="Code_Char">BPF-1</span><br /><span class="Code_Char">PAD</span><br /><span class="Code_Char">VER_b</span><br /><span class="Code_Char">VER</span><br /><span class="Code_Char">GP1</span><br /><span class="Code_Char">APP</span> (not described here)<br />Kernel-file-set (KFS): <span class="Code_Char">DTB</span>, <span class="Code_Char">TOS</span>, <span class="Code_Char">EKS</span>, <span class="Code_Char">LNX</span><br />Kernel-file-set copy (KFS-1): <span class="Code_Char">DTB-1</span>, <span class="Code_Char">TOS-1</span>, <span class="Code_Char">EKS-1</span>, <span class="Code_Char">LNX-1</span><br /><span class="Code_Char">BMP</span> and others (not described here)</div><div id="wwpID0E0MG0HA" class="Body_Text">While the kernel is booting, the boot partitions are available subject to write protection on these devices:</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 189pt"><div id="wwpID0EABC0LG0HA" class="Cell_Heading">Partition</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 211.5pt"><div id="wwpID0EAAC0LG0HA" class="Cell_Heading">Device Name</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0LG0HA" class="Cell_Text"><span class="Code_Char">BCT</span>, <span class="Code_Char">NVC</span>, and <span class="Code_Char">BFS</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0LG0HA" class="Cell_Text"><span class="Code_Char">/dev/mmcblk0boot0</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0LG0HA" class="Cell_Text"><span class="Code_Char">NVC‑1</span>, <span class="Code_Char">BFS‑1</span>, <span class="Code_Char">VER_b</span>, and <span class="Code_Char">VER</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0LG0HA" class="Cell_Text"><span class="Code_Char">/dev/mmcblk0boot1</span></div></td></tr></table></div><div id="wwpID0E0KG0HA" class="Body_Text">Unlike BFS, all KFS partitions are visible from Linux on these devices:</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 107.65pt"><div id="wwpID0EABI0JG0HA" class="Cell_Heading">Partition</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 292.85pt"><div id="wwpID0EAAI0JG0HA" class="Cell_Heading">Device Name</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0JG0HA" class="Cell_Text"><span class="Code_Char">DTB</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAH0JG0HA" class="Cell_Text"><span class="Code_Char">/dev/disk/by-partlabel/DTB</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0JG0HA" class="Cell_Text"><span class="Code_Char">TOS</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0JG0HA" class="Cell_Text"><span class="Code_Char">/dev</span>/disk/by-partlabel/TOS</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0JG0HA" class="Cell_Text"><span class="Code_Char">EKS</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAF0JG0HA" class="Cell_Text"><span class="Code_Char">/dev/disk/by-partlabel/EKS</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0JG0HA" class="Cell_Text"><span class="Code_Char">LNX</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE0JG0HA" class="Cell_Text"><span class="Code_Char">/dev/disk/by-partlabel/LNX</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0JG0HA" class="Cell_Text"><span class="Code_Char">DTB-1</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0JG0HA" class="Cell_Text"><span class="Code_Char">/dev/disk/by-partlabel/DTB-1</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0JG0HA" class="Cell_Text"><span class="Code_Char">TOS-1</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0JG0HA" class="Cell_Text"><span class="Code_Char">/dev/disk/by-partlabel/TOS</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0JG0HA" class="Cell_Text"><span class="Code_Char">EKS-1</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0JG0HA" class="Cell_Text"><span class="Code_Char">/dev/disk/by-partlabel/EKS-1</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0JG0HA" class="Cell_Text"><span class="Code_Char">LNX-1</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0JG0HA" class="Cell_Text"><span class="Code_Char">/dev/disk/by-partlabel/LNX-1</span></div></td></tr></table></div><H4 id="wwpID0E0IG0HA" class="Heading_4">Generating the Bootloader Update Payload (BUP)</H4><div id="wwpID0E0HG0HA" class="Body_Text">A Bootloader Update Payload (BUP) is used to implement bootloader update. It contains firmware binaries of each type needed to update a Jetson device. </div><div id="wwpID0E0GG0HA" class="Body_Text">This section describes procedures for generating a multi-spec BUP or a single-spec BUP. A multi-spec BUP includes multiple firmware binaries and BCT images of each type, and can be used to update any supported type of Jetson device. When you run the updater, it uses the appropriate binary of each type for the device you are updating. A single-spec BUP contains just one binary of each type, and can be used to update just one Jetson device configuration.</div><div id="wwpID0E0FG0HA" class="Heading_5">To generate a multi-spec BUP</div><div id="wwpID0E0EG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Enter the commands:</div><div id="wwpID0E0DG0HA" class="Code">$ cd &lt;top&gt;</div><div id="wwpID0E0CG0HA" class="Code">$ sudo ./l4t_generate_soc_bup.sh [-u &lt;pkc_key_file&gt;] [-p &lt;options&gt;] [-d] t21x</div><div id="wwpID0E0BG0HA" class="List_Continue">Where:</div><div id="wwpID0E0AG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="font-family: Arial">•	</span></span><span class="Code_Char">&lt;top&gt;</span> is the pathname of the directory that contains the PDK installation package. The <span class="Code_Char">flash.sh</span> script is in this directory.</div><div id="wwpID0E06F0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;pkc_key_file&gt;</span><span style="font-family: &quot;Trebuchet MS&quot;"> </span>is the RSA private key file for your Jetson carrier board. If it is a relative pathname, it is interpreted relative to <span style="font-family: &quot;Trebuchet MS&quot;">the </span><span class="Code_Char">&lt;top&gt;/bootloader</span><span style="font-family: &quot;Trebuchet MS&quot;"> </span>directory.</div><div id="wwpID0E05F0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;options&gt;</span> is a string containing command line options to be passed to <span class="Code_Char">flash.sh</span> to generate the BUP. If the string contains whitespace characters, it must be enclosed in quotes.</div><div id="wwpID0E04F0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">-d</span> causes the script to run in debug mode, which keeps all boot firmware blob images in <span class="Code_Char">bootloader/signed</span> and <span class="Code_Char">bootloader/multi-signed</span></div><div id="wwpID0E02F0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To generate a single-spec BUPEnter the command:</div><div id="wwpID0E01F0HA" class="Code">$ sudo [env={value}, …] ./build_l4t_bup.sh [options] &lt;board&gt; &lt;rootdev&gt;</div><div id="wwpID0E0ZF0HA" class="List_Continue">Where:</div><div id="wwpID0E0YF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;board&gt;</span> is the value of <span class="Code_Char">$(BOARD)</span> for your Jetson module and configuration, as shown in the table <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/quick_start.html#wwpID0EAAPNHA" title="Quick Start">Jetson Modules and Configurations</a></span> in the topic <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/quick_start.html#" title="Quick Start">Quick Start</a></span>.</div><div id="wwpID0E0XF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;rootdev&gt;</span> is the partition where the root file system is to be flashed.</div><div id="wwpID0E0VF0HA" class="Heading_5">Where the BUP File is Stored</div><div id="wwpID0E0UF0HA" class="Body_Text">Both procedures store the BUP file at:</div><div id="wwpID0E0TF0HA" class="Code">&lt;top&gt;/bootloader/&lt;payload_dir&gt;/bl_update_payload</div><div id="wwpID0E0SF0HA" class="Body_Text">Where <span class="Code_Char">&lt;payload_dir&gt;</span> is:</div><div id="wwpID0E0RF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Xavier NX and Jetson AGX Xavier series devices: <span class="Code_Char">payloads_t19x</span></div><div id="wwpID0E0QF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson TX2 series devices: <span class="Code_Char">payloads_t18x</span></div><div id="wwpID0E0PF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano and Jetson TX1 devices: <span class="Code_Char">payloads_t21x</span></div><div id="wwpID0E0OF0HA" class="Body_Text">The multi-spec procedure stores a BUP at each of these locations for the respective group of processors. The single-spec procedure stores a BUP at just one location for the appropriate type of processor.</div><div id="wwpID0E0NF0HA" class="Body_Text">You must place the BUP file in the target system under this directory before the Update Engine is run:</div><div id="wwpID0E0MF0HA" class="Code">/opt/ota_package/</div><div id="wwpID0E0LF0HA" class="Heading_5">Location and Functions of Generated BUP Files</div><div id="wwpID0E0KF0HA" class="Body_Text">The procedure generates these BUPs in the directory <span class="Code_Char">&lt;top&gt;/bootloader/payloads_t21x</span>:</div><div id="wwpID0E0JF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">bl_update_payload</span>: Contains all required binaries.</div><div id="wwpID0E0IF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">xusb_only_payload</span>: Contains xusb.</div><div id="wwpID0E0HF0HA" class="Body_Text">For a Jetson Nano device booting from an SD card, the procedure generates these additional BUPs:</div><div id="wwpID0E0GF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">bl_only_payload</span>: Contains the bootloader binaries.</div><div id="wwpID0E0FF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">kernel_only_payload</span>: Contains the kernel and kernel DTB.</div><div id="wwpID0E0EF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">porg_qspi_only_payload</span>: Contains binaries stored in QSPI memory.</div><div id="wwpID0E0DF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">porg_sd_only_payload</span>: Contains binaries stored on the SD card.</div><div id="wwpID0E0CF0HA" class="Heading_5">To use new Bootloader firmware to generate the BUP</div><div id="wwpID0E0BF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Copy the corresponding bootloader firmware binaries to replace the ones in <span class="Code_Char">&lt;top&gt;/bootloader/t210ref/</span>, then run <span class="Code_Char">l4t_generate_soc_bup.sh</span> to generate the new BUP.</div><div id="wwpID0E0AF0HA" class="Heading_5">To print out the BUP’s header information and entry tables</div><div id="wwpID0E06E0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Enter these commands:</div><div id="wwpID0E05E0HA" class="Code">$ cd &lt;top&gt;/bootloader</div><div id="wwpID0E04E0HA" class="Code">$ ./BUP_generator.py -c payloads_t21x/bl_update_payload</div><H4 id="wwpID0E03E0HA" class="Heading_4">Bootloader Update</H4><div id="wwpID0E02E0HA" class="Body_Text">The update tool is <span class="Code_Char">/user/sbin/l4t_payload_updater_t210/</span>. You can use it to update all partitions contained in the BUP.</div><div id="wwpID0E01E0HA" class="Heading_5">To update the BUP</div><div id="wwpID0E0ZE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Enter this command:</div><div id="wwpID0E0YE0HA" class="Code">$ sudo l4t_payload_updater_t210 payloads_t21x/bl_update_payload</div><div id="wwpID0E0XE0HA" class="Body_Text">The script stores the bootloader update log in<span style="font-family: &quot;Trebuchet MS&quot;"> </span><span class="Code_Char">/opt/ota_package/bl_update_payload.log</span>.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0WE0HA" class="Note_Heading">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 324pt"><div id="wwpID0EAAA0WE0HA" class="Cell_Text">The Bootloader Debian package <span class="Code_Char">nvidia-l4t-bootloader_32.3.0-xxx_arm64.deb</span> uses this script to perform the Bootloader update automatically.</div></td></tr></table></div><div id="wwpID0E0VE0HA" class="Heading_5">To print out device’s bootloader version</div><div id="wwpID0E0UE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Enter this command:</div><div id="wwpID0E0TE0HA" class="Code">$ sudo l4t_payload_updater_t210 -v</div><div id="wwpID0E0SE0HA" class="Body_Text">The command prints a message like this one:</div><div id="wwpID0E0RE0HA" class="Code"># R32 , REVISION: 3.0</div><H4 id="wwpID0E0QE0HA" class="Heading_4">Bootloader Update Flow</H4><div id="wwpID0E0PE0HA" class="Body_Text">The script <span class="Code_Char">/user/sbin/l4t_payload_updater_t210</span> implement the full Bootloader update process.</div><div id="wwpID0E0OE0HA" class="Body_Text">The following diagram shows the Bootloader update flow from BootROM to BCT, to NVC, to BFS, to KFS.</div><div id="wwpID0E0NE0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Before updating the partitions look like this.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0ME0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/bootloader_update_nano_tx1.1.1.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><div id="wwpID0E0LE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Update BCT_64, BFS‑1, KFS‑1, and NVC‑1.</div><div id="wwpID0E0KE0HA" class="List_Continue">In the normal boot-up process, BootROM searches for the valid BCT upward from BCT_1. In the Bootloader update process, the updater doesn’t know which BCT is valid, so to keep the good path it searches downward from BCT_64. Thus an update failure on any partition does not affect the good path, BootROM&nbsp;→ BCT_1 (or BCT_xx)&nbsp;→ NVC&nbsp;→ BFS&nbsp;→ KFS.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0JE0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/bootloader_update_nano_tx1.1.2.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><div id="wwpID0E0IE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Update from BCT_63 down to BCT_1.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0HE0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/bootloader_update_nano_tx1.1.3.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><div id="wwpID0E0GE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Update BFS and KFS.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0FE0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/bootloader_update_nano_tx1.1.4.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><div id="wwpID0E0EE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Update NVC.</div><div id="wwpID0E0DE0HA" class="List_Continue">NVC is updated last so as not to enable the BCT_1&nbsp;→ NVC and BCT_2&nbsp;→ NVC paths before the BFS path is ready.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0CE0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/bootloader_update_nano_tx1.1.5.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><H4 id="wwpID0E0BE0HA" class="Heading_4">Sample Logs in BUP Generation, Boot, and Update for BFS/KFS</H4><div id="wwpID0E0AE0HA" class="Body_Text">This section contains examples of logs for common BUP generation, booting, and boot updating cases. They can be used to check whether errors happened in these operations.</div><div id="wwpID0E06D0HA" class="Heading_5">Sample Logs in BUP Generation about BFS/KFS</div><div id="wwpID0E05D0HA" class="Body_Text">This log shows the BFS/KFS information used in BUP generation, such as binary name, size and BFS/KFS checksum.</div><div id="wwpID0E04D0HA" class="Code"><span style="font-size: 9pt">[   0.2271 ] Updating BFS information on BCT</span></div><div id="wwpID0E03D0HA" class="Code"><span style="font-size: 9pt">[   0.2285 ] tegrabct --bct P2180_A00_LP4_DSC_204Mhz.bct --chip 0x21 0 --updatebfsinfo flash.xml.bin</span></div><div id="wwpID0E02D0HA" class="Code"><span style="font-size: 9pt">[   0.2294 ]    BFS:</span></div><div id="wwpID0E01D0HA" class="Code"><span style="font-size: 9pt">[   0.2311 ]      0: [PT ] flash.xml.bin (size=4626/16384)</span></div><div id="wwpID0E0ZD0HA" class="Code"><span style="font-size: 9pt">[   0.2333 ]      1: [TBC] nvtboot_cpu.bin.encrypt (size=65856/172032)</span></div><div id="wwpID0E0YD0HA" class="Code"><span style="font-size: 9pt">[   0.2364 ]      2: [RP1] tegra210-jetson-tx1-p2597-2180-a01-devkit.dtb.encrypt (size=490480/1007616)</span></div><div id="wwpID0E0XD0HA" class="Code"><span style="font-size: 9pt">[   0.2379 ]      3: [EBT] cboot.bin.encrypt (size=484304/999424)</span></div><div id="wwpID0E0WD0HA" class="Code"><span style="font-size: 9pt">[   0.2383 ]      4: [WB0] warmboot.bin.encrypt (size=3952/8192)</span></div><div id="wwpID0E0VD0HA" class="Code"><span style="font-size: 9pt">[   0.2387 ]      5: [BPF] sc7entry-firmware.bin.encrypt (size=3376/8192)</span></div><div id="wwpID0E0UD0HA" class="Code"><span style="font-size: 9pt">[   0.2394 ]      6: [TOS] tos-mon-only.img.encrypt (size=54208/557056)</span></div><div id="wwpID0E0TD0HA" class="Code"><span style="font-size: 9pt">[   0.2398 ] BFS0: 16384 @ 2784 SUM 7b64c63a over 2768896 bytes</span></div><div id="wwpID0E0SD0HA" class="Code"><span style="font-size: 9pt">[   0.2402 ]    BFS:</span></div><div id="wwpID0E0RD0HA" class="Code"><span style="font-size: 9pt">[   0.2403 ]      0: [PT-1] flash.xml.bin (size=4626/16384)</span></div><div id="wwpID0E0QD0HA" class="Code"><span style="font-size: 9pt">[   0.2412 ]      1: [TBC-1] nvtboot_cpu.bin.encrypt (size=65856/172032)</span></div><div id="wwpID0E0PD0HA" class="Code"><span style="font-size: 9pt">[   0.2418 ]      2: [RP1-1] tegra210-jetson-tx1-p2597-2180-a01-devkit.dtb.encrypt (size=490480/1007616)</span></div><div id="wwpID0E0OD0HA" class="Code"><span style="font-size: 9pt">[   0.2425 ]      3: [EBT-1] cboot.bin.encrypt (size=484304/999424)</span></div><div id="wwpID0E0ND0HA" class="Code"><span style="font-size: 9pt">[   0.2431 ]      4: [WB0-1] warmboot.bin.encrypt (size=3952/8192)</span></div><div id="wwpID0E0MD0HA" class="Code"><span style="font-size: 9pt">[   0.2453 ]      5: [BPF-1] sc7entry-firmware.bin.encrypt (size=3376/8192)</span></div><div id="wwpID0E0LD0HA" class="Code"><span style="font-size: 9pt">[   0.2458 ]      6: [TOS-1] tos-mon-only.img.encrypt (size=54208/557056)</span></div><div id="wwpID0E0KD0HA" class="Code"><span style="font-size: 9pt">[   0.2463 ] BFS1: 16384 @ 8928 SUM 7b64c63a over 2768896 bytes</span></div><div id="wwpID0E0JD0HA" class="Code"><span style="font-size: 9pt">[   0.2468 ]    KFS:</span></div><div id="wwpID0E0ID0HA" class="Code"><span style="font-size: 9pt">[   0.2618 ]      0: [DTB] tegra210-jetson-tx1-p2597-2180-a01-devkit.dtb.encrypt (size=490480/503808)</span></div><div id="wwpID0E0HD0HA" class="Code"><span style="font-size: 9pt">[   0.2626 ]      1: [LNX] boot.img.encrypt (size=495616/67092480)</span></div><div id="wwpID0E0GD0HA" class="Code"><span style="font-size: 9pt">[   0.2631 ] KFS0: 503808 @ 29376546 SUM 22c0f1c4 over 999424 bytes</span></div><div id="wwpID0E0FD0HA" class="Code"><span style="font-size: 9pt">[   0.2666 ]    KFS:</span></div><div id="wwpID0E0ED0HA" class="Code"><span style="font-size: 9pt">[   0.2915 ]      0: [DTB-1] tegra210-jetson-tx1-p2597-2180-a01-devkit.dtb.encrypt (size=490480/503808)</span></div><div id="wwpID0E0DD0HA" class="Code"><span style="font-size: 9pt">[   0.2923 ]      1: [LNX-1] boot.img.encrypt (size=495616/67092480)</span></div><div id="wwpID0E0CD0HA" class="Code"><span style="font-size: 9pt">[   0.2928 ] KFS1: 503808 @ 29508730 SUM 22c0f1c4 over 999424 bytes</span></div><div id="wwpID0E0BD0HA" class="Normal" style="text-indent: 0pt">&nbsp;</div><div id="wwpID0E0AD0HA" class="Heading_5">Sample Logs in TegraBoot about BFS/KFS</div><div id="wwpID0E06C0HA" class="Body_Text">This log shows which BFS/KFS copy the device booted with.</div><div id="wwpID0E05C0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>In the normal case, the device boots from BFS0 and KFS0:</div><div id="wwpID0E04C0HA" class="Code"><span style="font-size: 9pt">...</span></div><div id="wwpID0E03C0HA" class="Code"><span style="font-size: 9pt">*** Booting BFS0.</span></div><div id="wwpID0E02C0HA" class="Code"><span style="font-size: 9pt">...</span></div><div id="wwpID0E01C0HA" class="Code"><span style="font-size: 9pt">*** Booting KFS0.</span></div><div id="wwpID0E0ZC0HA" class="Code"><span style="font-size: 9pt">...</span></div><div id="wwpID0E0YC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If BFS0 or KFS0 boot failed, switch to boot from BFS1 and KFS1:</div><div id="wwpID0E0XC0HA" class="List_Continue">Example 1:</div><div id="wwpID0E0WC0HA" class="Code"><span style="font-size: 9pt">...</span></div><div id="wwpID0E0VC0HA" class="Code"><span style="font-size: 9pt">*** Failing over to BFS1.</span></div><div id="wwpID0E0UC0HA" class="Code"><span style="font-size: 9pt">...</span></div><div id="wwpID0E0TC0HA" class="Code"><span style="font-size: 9pt">*** Booting BFS1.</span></div><div id="wwpID0E0SC0HA" class="Code"><span style="font-size: 9pt">*** Booting KFS1.</span></div><div id="wwpID0E0RC0HA" class="Code"><span style="font-size: 9pt">...</span></div><div id="wwpID0E0QC0HA" class="List_Continue">Example 2:</div><div id="wwpID0E0PC0HA" class="Code"><span style="font-size: 9pt">...</span></div><div id="wwpID0E0OC0HA" class="Code">*** Failing over to KFS1.</div><div id="wwpID0E0NC0HA" class="Code"><span style="font-size: 9pt">...</span></div><div id="wwpID0E0MC0HA" class="Code">*** Booting BFS1.</div><div id="wwpID0E0LC0HA" class="Code">*** Booting KFS1.</div><div id="wwpID0E0KC0HA" class="Code">...</div><div id="wwpID0E0JC0HA" class="Heading_5">Sample Logs from Bootloader Update</div><div id="wwpID0E0IC0HA" class="Body_Text">This log shows messages that appear during bootloader update, including BUP header, entries, and update sequence.</div><div id="wwpID0E0HC0HA" class="Code"><span style="font-size: 9pt">BLOB PATH:</span></div><div id="wwpID0E0GC0HA" class="Code"><span style="font-size: 9pt">/opt/payloads_t21x/bl_update_payload</span></div><div id="wwpID0E0FC0HA" class="Code">&nbsp;</div><div id="wwpID0E0EC0HA" class="Code"><span style="font-size: 9pt">[R]eading 65,536 bytes of /dev/mmcblk0boot1 at offset 4,128,768</span></div><div id="wwpID0E0DC0HA" class="Code"><span style="font-size: 9pt">VER number: 320300</span></div><div id="wwpID0E0CC0HA" class="Code"><span style="font-size: 9pt">[R]eading 65,536 bytes of /dev/mmcblk0boot1 at offset 4,063,232</span></div><div id="wwpID0E0BC0HA" class="Code"><span style="font-size: 9pt">VER_b number: 320300</span></div><div id="wwpID0E0AC0HA" class="Code"><span style="font-size: 9pt">blob ver number: 320300</span></div><div id="wwpID0E06B0HA" class="Code"><span style="font-size: 9pt">[R]eading 376,832 bytes of /dev/mmcblk0boot0 at offset 1,048,576</span></div><div id="wwpID0E05B0HA" class="Code"><span style="font-size: 9pt">[R]eading 376,832 bytes of /dev/mmcblk0boot1 at offset 0</span></div><div id="wwpID0E04B0HA" class="Code"><span style="font-size: 9pt">BLOB HEADER:</span></div><div id="wwpID0E03B0HA" class="Code"><span style="font-size: 9pt">       Magic: NVIDIA__BLOB__V2</span></div><div id="wwpID0E02B0HA" class="Code"><span style="font-size: 9pt">     Version: 0x00020000</span></div><div id="wwpID0E01B0HA" class="Code"><span style="font-size: 9pt">   Blob Size: 9,405,126 bytes</span></div><div id="wwpID0E0ZB0HA" class="Code"><span style="font-size: 9pt"> Header Size: 40 bytes</span></div><div id="wwpID0E0YB0HA" class="Code"><span style="font-size: 9pt"> Entry Count: 56 partition(s)</span></div><div id="wwpID0E0XB0HA" class="Code"><span style="font-size: 9pt">        Type: 0 (0 for update, 1 for BMP)</span></div><div id="wwpID0E0WB0HA" class="Code"><span style="font-size: 9pt">Uncompressed</span></div><div id="wwpID0E0VB0HA" class="Code"><span style="font-size: 9pt">   Blob Size: 9,405,126 bytes</span></div><div id="wwpID0E0UB0HA" class="Code"><span style="font-size: 9pt">   Accessory: Not Present</span></div><div id="wwpID0E0TB0HA" class="Code">&nbsp;</div><div id="wwpID0E0SB0HA" class="Code"><span style="font-size: 9pt">ENTRY TABLE:</span></div><div id="wwpID0E0RB0HA" class="Code"><span style="font-size: 9pt">| part_name |  offset | part_size | version | op_mode |                     tnspec                    |</span></div><div id="wwpID0E0QB0HA" class="Code"><span style="font-size: 9pt">|     VER_b | 2393331 |       83   |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E0PB0HA" class="Code"><span style="font-size: 9pt">|     BCT64 |    6760    |    10240 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E0OB0HA" class="Code"><span style="font-size: 9pt">|     NVC-1 | 2394006 |  173344 |    2    |    0    |                                               |</span></div><div id="wwpID0E0NB0HA" class="Code"><span style="font-size: 9pt">|      PT-1   | 2363832 |      4626 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E0MB0HA" class="Code"><span style="font-size: 9pt">|     TBC-1 | 2567350 |     65856 |    2    |    0    |                                               |</span></div><div id="wwpID0E0LB0HA" class="Code"><span style="font-size: 9pt">|     RP1-1 |   88680 |    490480 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E0KB0HA" class="Code"><span style="font-size: 9pt">|     EBT-1 | 2633206 |    484304 |    2    |    0    |                                               |</span></div><div id="wwpID0E0JB0HA" class="Code"><span style="font-size: 9pt">|     WB0-1 | 3117510 |      3952 |    2    |    0    |                                               |</span></div><div id="wwpID0E0IB0HA" class="Code"><span style="font-size: 9pt">|     BPF-1 | 3121462 |      3376 |    2    |    0    |                                               |</span></div><div id="wwpID0E0HB0HA" class="Code"><span style="font-size: 9pt">|     TOS-1 | 3124838 |     54208 |    2    |    0    |                                               |</span></div><div id="wwpID0E0GB0HA" class="Code"><span style="font-size: 9pt">|     DTB-1 | 3251062 |  490480 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E0FB0HA" class="Code"><span style="font-size: 9pt">|     LNX-1 | 5526214 |  495616 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E0EB0HA" class="Code"><span style="font-size: 9pt">|     EKS-1 | 3179046 |      1028 |    2    |    0    |                                               |</span></div><div id="wwpID0E0DB0HA" class="Code"><span style="font-size: 9pt">|     BCT63 |    6760 |     10240 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E0CB0HA" class="Code"><span style="font-size: 9pt">....</span></div><div id="wwpID0E0BB0HA" class="Code"><span style="font-size: 9pt">|      BCT2 |    6760 |     10240 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E0AB0HA" class="Code"><span style="font-size: 9pt">|       BCT |    6760 |     10240 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E6HA" class="Code"><span style="font-size: 9pt">|        PT | 2363832 |      4626 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E5HA" class="Code"><span style="font-size: 9pt">|       TBC | 2567350 |     65856 |    2    |    0    |                                               |</span></div><div id="wwpID0E4HA" class="Code"><span style="font-size: 9pt">|       RP1 |   88680 |    490480 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0E3HA" class="Code"><span style="font-size: 9pt">|       EBT | 2633206 |    484304 |    2    |    0    |                                               |</span></div><div id="wwpID0E2HA" class="Code"><span style="font-size: 9pt">|       WB0 | 3117510 |      3952 |    2    |    0    |                                               |</span></div><div id="wwpID0E1HA" class="Code"><span style="font-size: 9pt">|       BPF | 3121462 |      3376 |    2    |    0    |                                               |</span></div><div id="wwpID0EZHA" class="Code"><span style="font-size: 9pt">|       TOS | 3124838 |     54208 |    2    |    0    |                                               |</span></div><div id="wwpID0EYHA" class="Code"><span style="font-size: 9pt">|       DTB | 3251062 |    490480 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0EXHA" class="Code"><span style="font-size: 9pt">|       LNX | 5526214 |   495616 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0EWHA" class="Code"><span style="font-size: 9pt">|       EKS | 3179046 |      1028 |    2    |    0    |                                               |</span></div><div id="wwpID0EVHA" class="Code"><span style="font-size: 9pt">|       NVC | 2394006 |   173344 |    2    |    0    |                                               |</span></div><div id="wwpID0EUHA" class="Code"><span style="font-size: 9pt">|       VER | 2393331 |        83 |    2    |    0    | 2180-100---1-0-jetson-tx1-mmcblk0p1           |</span></div><div id="wwpID0ETHA" class="Code"><span style="font-size: 9pt">|       BMP | 3180074 |     70988 |    2    |    0    |                                               |</span></div><div id="wwpID0ESHA" class="Code"><span style="font-size: 9pt">Note: only partitions updatable on this system are shown, use "-p" to show all partitions in payload.</span></div><div id="wwpID0ERHA" class="Code"><span style="font-size: 9pt">Note: partitions are written to system top down in the order shown above.</span></div><div id="wwpID0EQHA" class="Code">&nbsp;</div><div id="wwpID0EPHA" class="Code"><span style="font-size: 9pt">Beginning update.</span></div><div id="wwpID0EOHA" class="Code">&nbsp;</div><div id="wwpID0ENHA" class="Code"><span style="font-size: 9pt">Updating partition: VER_b</span></div><div id="wwpID0EMHA" class="Code"><span style="font-size: 9pt">[R]eading 83 bytes of /dev/mmcblk0boot1 at offset 4,063,232</span></div><div id="wwpID0ELHA" class="Code"><span style="font-size: 9pt">[E]rasing 65,536 bytes to /dev/mmcblk0boot1 at offset 4,063,232</span></div><div id="wwpID0EKHA" class="Code"><span style="font-size: 9pt">[W]riting 83 bytes to /dev/mmcblk0boot1 at offset 4,063,232</span></div><div id="wwpID0EJHA" class="Code"><span style="font-size: 9pt">[R]eading 83 bytes of /dev/mmcblk0boot1 at offset 4,063,232</span></div><div id="wwpID0EIHA" class="Code"><span style="font-size: 9pt">Verification successful.</span></div><div id="wwpID0EHHA" class="Code">&nbsp;</div><div id="wwpID0EGHA" class="Code"><span style="font-size: 9pt">…... (Updating all partitions) ……</span></div><div id="wwpID0EFHA" class="Code">&nbsp;</div><div id="wwpID0EEHA" class="Code"><span style="font-size: 9pt">Total data updatable for system: 89 partitions, 5,261,054 bytes.</span></div><div id="wwpID0EDHA" class="Code"><span style="font-size: 9pt">   Total data written to system: 68 partitions, 664,778 bytes.</span></div><div id="wwpID0ECHA" class="Code">&nbsp;</div><div id="wwpID0EBHA" class="Code"><span style="font-size: 9pt">Update successful.</span></div></div><div id="page_dates"></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></body></html>