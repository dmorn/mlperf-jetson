<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- NVIDIA customization --><title>NVIDIA Jetson Linux Driver Package Software Features : Setting Up Your File System | NVIDIA Docs </title><link rel="Prev" href="software_features_tx1.html" title="Previous" /><link rel="Next" href="hw_setup.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/rootfs_custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="pvjzcShNU_002fnvAR5OMY8yfzw" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="fa"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --></header><div id="page_content_container" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px"><div id="page_content"><H1 id="wwpID0E0VG0HA" class="Heading_1">Setting Up Your File System</H1><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0TG0HA">Sample Root File System</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0LG0HA">Setting Up the Root File System</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E06E0HA">Root File System Redundancy</a></div></dd></dl></div><div id="wwpID0E0UG0HA" class="Body_Text">NVIDIA<span style="vertical-align: super">®</span> Jetson™ Linux requires a root file system. You must create a Linux host system and copy it to your reference board.</div><H2 id="wwpID0E0TG0HA" class="Heading_2">Sample Root File System</H2><div id="wwpID0E0SG0HA" class="Body_Text">NVIDIA Jetson Linux Driver Package (L4T) comes with a pre-built sample root file system created for the NVIDIA Jetson&nbsp;developer kits.</div><div id="wwpID0E0RG0HA" class="Body_Text">NVIDIA provides a tool to generate a root file system. To use the tool, go to Navigate to the <span class="Code_Char">tools/samplefs</span> directory of the extracted NVIDIA driver package:</div><div id="wwpID0E0QG0HA" class="Code">$ cd &lt;your_L4T_root&gt;/Linux_for_Tegra/tools/samplefs</div><div id="wwpID0E0PG0HA" class="Body_Text">Execute the script <span class="Code_Char">nv_build_samplefs.sh</span>:</div><div id="wwpID0E0OG0HA" class="Code">$ sudo ./nv_build_samplefs.sh --abi aarch64 --distro ubuntu --version bionic</div><div id="wwpID0E0NG0HA" class="Body_Text">To see an explanation of the parameters, enter the script name alone. (You need not use <span class="Code_Char">sudo</span>.)<span class="Code_Char"> </span>Because the command is used exactly as shown, though, you need not understand the parameters to use it.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 63pt"><div id="wwpID0EABA0MG0HA" class="Note_Image">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 328.5pt"><div id="wwpID0EAAA0MG0HA" class="Cell_Text">This script downloads the base image, extracts the root file system, downloads and installs all required packages, and compresses the root file system directory to a tarball. It may take several hours to run. depending on the Internet speed of your host machine.</div></td></tr></table></div><H2 id="wwpID0E0LG0HA" class="Heading_2">Setting Up the Root File System</H2><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0HG0HA">Step 1: Set Up the Root File System</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0VF0HA">Step 2: Copy the rootfs to the Jetson Device</a></div></dd></dl></div><div id="wwpID0E0KG0HA" class="Body_Text">Before booting the target board, configure the root file system (rootfs) to:</div><div id="wwpID0E0JG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Set up the rootfs</div><div id="wwpID0E0IG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Copy it to the rootfs on the device</div><H3 id="wwpID0E0HG0HA" class="Heading_3">Step 1: Set Up the Root File System</H3><div id="wwpID0E0GG0HA" class="Body_Text">This procedure uses the sample file system provided by NVIDIA as the base. If you wish to use your own file system, set the <span class="Code_Char">LDK_ROOTFS_DIR</span> environment variable to point to the location of your rootfs and skip the steps for setting the root file system.</div><div id="wwpID0E0FG0HA" class="Heading_5">To set up the rootfs</div><div id="wwpID0E0EG0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Download the following file to your home directory:</div><div id="wwpID0E0DG0HA" class="Code">Tegra-Linux-Sample-Root-Filesystem_&lt;release_type&gt;.tbz2</div><div id="wwpID0E0CG0HA" class="Number_Continue">This file contains the NVIDIA-provided sample root file system.</div><div id="wwpID0E0BG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Extract the compressed file as follows:</div><div id="wwpID0E0AG0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Navigate to the rootfs directory of the extracted NVIDIA driver package.</div><div id="wwpID0E06F0HA" class="Code_Indent">$ cd &lt;your_L4T_root&gt;/Linux_for_Tegra/rootfs</div><div id="wwpID0E05F0HA" class="Number_Continue_2">Where <span class="Code_Char">&lt;your_L4T_root&gt;</span> is your L4T root directory, which is assumed to be your home directory (<span class="Code_Char">~</span>).</div><div id="wwpID0E04F0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Extract the sample file system to the rootfs directory.</div><div id="wwpID0E03F0HA" class="Code_Indent">$ sudo tar -jxpf ../../Tegra-Linux-Sample-Root-Filesystem_&lt;release_type&gt;.tbz2</div><div id="wwpID0E02F0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Run the <span class="Code_Char">apply_binaries.sh</span> script to copy the NVIDIA user space libraries into the target file system.</div><div id="wwpID0E01F0HA" class="Code">$ cd ..</div><div id="wwpID0E0ZF0HA" class="Code">$ sudo ./apply_binaries.sh</div><div id="wwpID0E0YF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>If you are using a different rootfs, or if you have already configured your rootfs, apply the NVIDIA user space libraries by setting the <span class="Code_Char">LDK_ROOTFS_DIR</span> environment variable to point to your rootfs. Then run the script, as shown above, to copy the binaries into your target file system.</div><div id="wwpID0E0XF0HA" class="List_Continue">If the <span class="Code_Char">apply_binaries.sh</span> script installs the binaries correctly, the last message output from the script is “Success!”.</div><div id="wwpID0E0WF0HA" class="Number_Continue">You have now completed setting up the root file system. Proceed to flash the rootfs onto the target SoC device.</div><H3 id="wwpID0E0VF0HA" class="Heading_3">Step 2: Copy the rootfs to the Jetson Device</H3><div id="wwpID0E0UF0HA" class="Body_Text">The procedure you must use to copy the rootfs depends on the type of storage you want to hold it</div><div id="wwpID0E0TF0HA" class="Body_Text">To use the flashing tool to set up a root file system on the device, see the topic <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/flashing.html#" title="Flashing and Booting the Target Device">Flashing and Booting the Target Device</a></span>.</div><div id="wwpID0E0SF0HA" class="Body_Text">If you prefer to set up a root file system yourself rather than use the flashing tool, use the following procedure.</div><div id="wwpID0E0RF0HA" class="Heading_5">To copy the file system to an external storage device</div><div id="wwpID0E0QF0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Plug your rootfs device into the host system.</div><div id="wwpID0E0PF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>If your device is not formatted as Ext4, enter the following command to format it with an Ext4 file system:</div><div id="wwpID0E0OF0HA" class="Code">$ sudo mkfs.ext4 /dev/sd&lt;port&gt;&lt;device_number&gt;</div><div id="wwpID0E0NF0HA" class="Number_Continue">Where:</div><div id="wwpID0E0MF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;port&gt;</span> is the port to which your device is mounted.</div><div id="wwpID0E0LF0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;device_number&gt;</span> is the device number of the device attached to the port. You can use the <span class="Code_Char">dmesg</span> command to determine the port.</div><div id="wwpID0E0KF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>If needed, mount your device with the following command:</div><div id="wwpID0E0JF0HA" class="Code">$ sudo mount /dev/sdX1 &lt;mntpoint&gt;</div><div id="wwpID0E0IF0HA" class="Number_Continue">Where <span class="Code_Char">&lt;mntpoint&gt;</span> is the mount point on the host system for your rootfs device.</div><div id="wwpID0E0HF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Copy the file system. If <span class="Code_Char">LDK_ROOTFS_DIR</span> is set, execute these commands:</div><div id="wwpID0E0GF0HA" class="Code">$ cd ${LDK_ROOTFS_DIR}</div><div id="wwpID0E0FF0HA" class="Code">$ sudo cp –a * &lt;mntpoint&gt; &amp;&amp; sync</div><div id="wwpID0E0EF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>If it is not set, copy the rootfs directory that is included in the release by executing the following commands:</div><div id="wwpID0E0DF0HA" class="Code">$ cd &lt;your_L4T_root&gt;/Linux_for_Tegra/rootfs</div><div id="wwpID0E0CF0HA" class="Code">$ sudo cp –a * &lt;mntpoint&gt; &amp;&amp; sync</div><div id="wwpID0E0BF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>6.	</span></span>After copying the content to the external disk or device, unmount the disk and connect it to the target SoC device. </div><div id="wwpID0E0AF0HA" class="Body_Text">Proceed to <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/flashing.html#" title="Flashing and Booting the Target Device">Flashing and Booting the Target Device</a></span>.</div><H2 id="wwpID0E06E0HA" class="Heading_2">Root File System Redundancy</H2><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0ZE0HA">Rootfs Selection</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0WE0HA">Rootfs Selection with Unified Bootloader and Rootfs A/B Disabled</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0JE0HA">Rootfs Selection with Unified Bootloader and Rootfs A/B Enabled</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0GE0HA">How to Create Redundant Root File Systems</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E3HA">Managing Rootfs Slots with nvbootctrl</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0EHHA">Using UUID for Root File System Partitions APP and APP_b</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0EEHA">Over-the-Air Update with Rootfs Redundancy Enabled</a></div></dd></dl></div><div id="wwpID0E05E0HA" class="Body_Text">NVIDIA<span style="vertical-align: super">®</span> Jetson™ Linux provides full support for root file system redundancy (“rootfs redundancy”) on NVIDIA Jetson Xavier™ NX, Jetson AGX Xavier™ series, and Jetson TX2 series. It uses two root file systems, one designated <span class="Strong">rootfs A</span> and stored in the usual file system partition, <span class="Code_Char">APP</span>, and the other designated <span class="Strong">rootfs B</span> and stored in a new partition, <span class="Code_Char">APP_b</span>, located after <span class="Code_Char">APP</span> on the disk.</div><div class="ww_skin_page_overflow"><div id="wwpID0E04E0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image4.png" style="display: inline; left: 0pt; top: 0pt" alt="Graphical user interface, text, application, chat or text message Description automatically generated" title="Graphical user interface, text, application, chat or text message Description automatically generated" /></div></div><div id="wwpID0E03E0HA" class="Body_Text">Rootfs redundancy supports independent creation and updates of the two file systems, switching, and failover.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA02E0HA" class="Note_Image">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 315pt"><div id="wwpID0EAAA02E0HA" class="Note_Text">Rootfs redundancy is an advanced feature, and is intended for customers who have the capability to create customized rootfs images.</div></td></tr></table></div><div id="wwpID0E01E0HA" class="Body_Text">The partition names <span class="Code_Char">APP</span> and <span class="Code_Char">APP_b</span> may not be changed.</div><H3 id="wwpID0E0ZE0HA" class="Heading_3">Rootfs Selection</H3><div id="wwpID0E0YE0HA" class="Body_Text">L4T provides an option to tie bootloader A/B and rootfs A/B. If rootfs A/B is enabled, bootloader A/B is tied to rootfs A/B by default.</div><div id="wwpID0E0XE0HA" class="Body_Text">For information about how to enable and disable the option, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0AD0HA" title="Setting Up Your File System">To customize the SMD partition image</a></span>.</div><H4 id="wwpID0E0WE0HA" class="Heading_4">Rootfs Selection with Unified Bootloader and Rootfs A/B Disabled</H4><div id="wwpID0E0VE0HA" class="Body_Text">When the option “Unified bootloader A/B and rootfs A/B” is disabled, bootloader A/B and rootfs A/B slot selection are independent of each other. There are four possible combinations of Bootloader and Rootfs:</div><div class="ww_skin_page_overflow"><div id="wwpID0E0UE0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image5.png" style="display: inline; left: 0pt; top: 0pt" alt="A picture containing text Description automatically generated" title="A picture containing text Description automatically generated" /></div></div><div id="wwpID0E0TE0HA" class="Body_Text">Each rootfs has several attributes:</div><div id="wwpID0E0SE0HA" class="Body_Text">Each rootfs occupies a <span class="List_Continue_Char">slot</span> in the redundant file system architecture: “slot A” or “slot B.”</div><div class="ww_skin_page_overflow"><div id="wwpID0E0RE0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image6.png" style="display: inline; left: 0pt; top: 0pt" alt="A picture containing graphical user interface Description automatically generated" title="A picture containing graphical user interface Description automatically generated" /></div></div><div id="wwpID0E0QE0HA" class="Body_Text">When rootfs redundancy is in use, the <span class="Code_Char">kernel</span> and <span class="Code_Char">kernel-dtb</span> partitions belong to the userspace, not the bootloader. Consequently, they belong to the rootfs slots and are selected by their rootfs slots, not their bootloader slots.</div><div id="wwpID0E0PE0HA" class="Body_Text">The <span class="List_Continue_Char">active rootfs slot</span> is the slot that the next boot operation will attempt to boot from. The active rootfs slot (the slot whose rootfs Linux uses) is not necessarily the bootloader active slot (the slot from whose Bootloader Linux was booted).</div><div id="wwpID0E0OE0HA" class="Body_Text">The <span class="List_Continue_Char">current rootfs slot </span>is the one that the system booted from and is currently using. The other rootfs slot is called the <span class="List_Continue_Char">unused rootfs slot</span>. The system may exchange the roles of the current and unused rootfs slots in the course of an update, or when the current rootfs fails repeatedly while booting or immediately after. The current rootfs slot does not relate to the bootloader current slot.</div><div id="wwpID0E0NE0HA" class="Body_Text">A rootfs slot’s <span class="List_Continue_Char">Status attribute</span> indicates whether the rootfs contains a valid system image that can be used to boot the device. When the system is running, the current rootfs slot’s status is necessarily bootable. The unused rootfs slot may have an older, identical, or newer version of the system, and may or may not be bootable. The Status attribute is managed by CBoot and the <span class="List_Continue_Char">Update Engine</span> (UE), which manages updating the rootfs partitions .</div><div id="wwpID0E0ME0HA" class="Body_Text">The <span class="List_Continue_Char">Update Mode attribute</span> indicates that the system has attempted to run OTA update on this rootfs. This attribute is also handled by the UE.</div><div id="wwpID0E0LE0HA" class="Body_Text">If the current rootfs fails to boot a specified number of times, CBoot resets its Status attribute and switches the roles of the current and unused rootfs slots. If both root file systems are unbootable, the device tries to boot from the recovery kernel image.</div><div id="wwpID0E0KE0HA" class="Body_Text">By default the CBoot tries to boot the rootfs three times. The number of tries is configurable; see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0AD0HA" title="Setting Up Your File System">To customize the SMD partition image</a></span>.</div><H4 id="wwpID0E0JE0HA" class="Heading_4">Rootfs Selection with Unified Bootloader and Rootfs A/B Enabled</H4><div id="wwpID0E0IE0HA" class="Body_Text">When the option “Unified bootloader A/B and rootfs A/B” is enabled, bootloader A/B and rootfs A/B are configured together. The bootloader slot and the rootfs slot are switched together, so that Bootloader&nbsp;A boots only with rootfs&nbsp;A, and Bootloader&nbsp;B boots only with rootfs&nbsp;B. There are two combinations of bootloader and rootfs:</div><div class="ww_skin_page_overflow"><div id="wwpID0E0HE0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image7.png" style="display: inline; left: 0pt; top: 0pt" alt="A picture containing chat or text message Description automatically generated" title="A picture containing chat or text message Description automatically generated" /></div></div><H3 id="wwpID0E0GE0HA" class="Heading_3">How to Create Redundant Root File Systems</H3><div id="wwpID0E0FE0HA" class="Body_Text">L4T provides a simple flash command to create and flash the target board with rootfs redundancy. You can do some customizations before the flashing.</div><div id="wwpID0E0EE0HA" class="Body_Text">Before you create the file systems, find the layout file for your Jetson device and examine them side by side with the corresponding layout file for a non-redundant system. Understanding the differences is important to your understanding of how file system redundancy works.</div><div id="wwpID0E0DE0HA" class="Body_Text">A layout file is an XML file which describes the partition layout for an L4T system. One or more particular layout files describe the partition layout for each Jetson platform. The following list names the layout files for redundant file systems on various platforms. In each case, the corresponding non-redundant layout file has the same name without the filename suffix <span class="Code_Char">_rootfs_ab</span></div><div id="wwpID0E0CE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Xavier NX with SD memory:</div><div id="wwpID0E0BE0HA" class="Code">Linux_for_tegra/bootloader/t186ref/cfg/flash_l4t_t194_spi_sd_p3668_rootfs_ab.xml</div><div id="wwpID0E0AE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Xavier NX with eMMC:</div><div id="wwpID0E06D0HA" class="Code">Linux_for_Tegra/bootloader/t186ref/cfg/flash_l4t_t194_spi_emmc_p3668_rootfs_ab.xml</div><div id="wwpID0E05D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson AGX Xavier series:</div><div id="wwpID0E04D0HA" class="Code">Linux_for_Tegra/bootloader/t186ref/cfg/flash_t194_sdmmc_rootfs_ab.xml</div><div id="wwpID0E03D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson TX2 series:</div><div id="wwpID0E02D0HA" class="Code">Linux_for_Tegra/bootloader/t186ref/cfg/flash_l4t_t186_rootfs_ab.xml</div><div id="wwpID0E01D0HA" class="Heading_5">To flash the target board with redundant root file systems</div><div id="wwpID0E0ZD0HA" class="Body_Text">Go to the directory Linux_for_Tegra and enter the command:</div><div id="wwpID0E0YD0HA" class="Code">$ sudo ROOTFS_AB=1 ./flash.sh [options] &lt;target_board&gt; &lt;rootdev&gt;</div><div id="wwpID0E0XD0HA" class="Body_Text">Where:</div><div id="wwpID0E0WD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>ROOTFS_AB=1 enables rootfs redundancy.</div><div id="wwpID0E0VD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;target_board&gt;</span> indicates the type of device:</div><div id="wwpID0E0UD0HA" class="List_Continue">For Jetson Xavier NX: <span class="Code_Char">jetson-xavier-nx-devkit-emmc or jetson-xavier-nx-devkit</span></div><div id="wwpID0E0TD0HA" class="List_Continue">For Jetson AGX Xavier series: <span class="Code_Char">jetson-agx-xavier-devkit</span></div><div id="wwpID0E0SD0HA" class="List_Continue">For Jetson TX2 series: <span class="Code_Char">jetson-tx2-devkit</span></div><div id="wwpID0E0RD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;rootdev&gt;</span> specifies the location of the root file systems.</div><div id="wwpID0E0QD0HA" class="List_Continue">For example:</div><div id="wwpID0E0PD0HA" class="Code">$ sudo ROOTFS_AB=1 ./flash.sh jetson-tx2-devkit mmcblk0p1</div><div id="wwpID0E0OD0HA" class="Body_Text">To flash redundant root file systems on an external storage device, see Workflow #5 in <span class="Code_Char">Linux_for_Tegra/tools/kernel_flash/README.txt</span>.</div><div id="wwpID0E0ND0HA" class="Heading_5">To customize the rootfs size</div><div id="wwpID0E0MD0HA" class="Body_Text">When rootfs redundancy is in use, the size of each rootfs partition (<span class="Code_Char">APP</span> and <span class="Code_Char">APP_b</span>) is half the size that the rootfs would be if rootfs redundancy were not in use. That size is specified by <span class="Code_Char">ROOTFSSIZE</span> in the configuration file for the target board.</div><div id="wwpID0E0LD0HA" class="Body_Text">You can change the amount of space allocated to the root file systems by changing the value of <span class="Code_Char">ROOTFSSIZE</span> before you flash the target.</div><div id="wwpID0E0KD0HA" class="Body_Text">The configuration file you must change to customize the rootfs size is:</div><div id="wwpID0E0JD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Xavier NX: <span class="Code_Char">Linux_for_Tegra/p3668.conf.common</span></div><div id="wwpID0E0ID0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson AGX Xavier series: <span class="Code_Char">Linux_for_Tegra/p2972-0000.conf.common</span></div><div id="wwpID0E0HD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson TX2 series: <span class="Code_Char">Linux_for_Tegra/P2771-0000.conf.common</span></div><div id="wwpID0E0GD0HA" class="Body_Text">For example, to change the rootfs size for a Jetson TX2, edit <span class="Code_Char">p2771-0000.conf.common</span>:</div><div id="wwpID0E0FD0HA" class="Code">if [ "${ROOTFS_AB}" == 1 ]; then</div><div id="wwpID0E0ED0HA" class="Code">    rootfs_ab=1</div><div id="wwpID0E0DD0HA" class="Code">    EMMC_CFG=flash_l4t_t186_rootfs_ab.xml;</div><div id="wwpID0E0CD0HA" class="Code">    ROOTFSSIZE=14GiB;</div><div id="wwpID0E0BD0HA" class="Code">fi;</div><div id="wwpID0E0AD0HA" class="Heading_5">To customize the SMD partition image</div><div id="wwpID0E06C0HA" class="Body_Text">The <span class="Code_Char">SMD</span> partition holds information about the status of a slot. A device with redundant file systems has two partitions, <span class="Code_Char">SMD</span> for slot&nbsp;A and <span class="Code_Char">SMD_b</span> for slot&nbsp;B. You can customize the <span class="Code_Char">SMD</span> partitions before you flash the target.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA05C0HA" class="Note_Image">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 351pt"><div id="wwpID0EAAA05C0HA" class="Note_Text">Some L4T documents refer to the SMD and SMD_b partitions together as “the SMD partition.” Keep this in mind as you read REAME files and other documents.</div></td></tr></table></div><div id="wwpID0E04C0HA" class="Body_Text">Rootfs redundancy requires the SMD partitions to function. The SMD partition image is stored in the file <span class="Code_Char">slot_metadata.bin.rootfsAB</span>, which the script <span class="Code_Char">nv_smd_generator</span> generates from <span class="Code_Char">l4t_smd_info.rootfs_AB.cfg</span>.</div><div id="wwpID0E03C0HA" class="Body_Text">The default <span class="Code_Char">l4t_smd_info.rootfs_AB.cfg</span> file looks like this:</div><div id="wwpID0E02C0HA" class="Code">&lt; VERSION 5 &gt;</div><div id="wwpID0E01C0HA" class="Code">&nbsp;</div><div id="wwpID0E0ZC0HA" class="Code"># Set the maximum rootfs slot retry count</div><div id="wwpID0E0YC0HA" class="Code"># Please make sure this field is set before slot info config</div><div id="wwpID0E0XC0HA" class="Code"># The valid setting is 1 to 3</div><div id="wwpID0E0WC0HA" class="Code"><span style="background-color: yellow">&lt; MAX_ROOTFS_AB_RETRY_COUNT 3 &gt;</span></div><div id="wwpID0E0VC0HA" class="Code">&nbsp;</div><div id="wwpID0E0UC0HA" class="Code">#</div><div id="wwpID0E0TC0HA" class="Code"># Config 1: Disable A/B support (by removing comments ##)</div><div id="wwpID0E0SC0HA" class="Code">#</div><div id="wwpID0E0RC0HA" class="Code">&nbsp;</div><div id="wwpID0E0QC0HA" class="Code"># slot info order is important!</div><div id="wwpID0E0PC0HA" class="Code"># &lt;priority&gt;    &lt;suffix&gt;     &lt;retry_count&gt;  &lt;boot_successful&gt;</div><div id="wwpID0E0OC0HA" class="Code">##15                  _a          7               1</div><div id="wwpID0E0NC0HA" class="Code">&nbsp;</div><div id="wwpID0E0MC0HA" class="Code">#</div><div id="wwpID0E0LC0HA" class="Code"># Config 2: Enable rootfs A/B support (default)</div><div id="wwpID0E0KC0HA" class="Code">#</div><div id="wwpID0E0JC0HA" class="Code">&lt; REDUNDANCY_ENABLE 1 &gt;</div><div id="wwpID0E0IC0HA" class="Code"><span style="background-color: yellow">&lt; ROOTFS_AB 1 &gt;</span></div><div id="wwpID0E0HC0HA" class="Code">&nbsp;</div><div id="wwpID0E0GC0HA" class="Code"># To enable rootfs autosync, use &lt; RF_AUTOSYNC_ENABLE 1 &gt;</div><div id="wwpID0E0FC0HA" class="Code"># This option must be defined after "&lt; ROOTFS_AB 1 &gt;"</div><div id="wwpID0E0EC0HA" class="Code">##&lt; RF_AUTOSYNC_ENABLE 1 &gt;</div><div id="wwpID0E0DC0HA" class="Code">&nbsp;</div><div id="wwpID0E0CC0HA" class="Code"># Select rootfs A as the active rootfs slot</div><div id="wwpID0E0BC0HA" class="Code"><span style="background-color: yellow">&lt; ROOTFS_ACTIVE_A 1 &gt;</span></div><div id="wwpID0E0AC0HA" class="Code">##&lt; ROOTFS_ACTIVE_B 1 &gt;</div><div id="wwpID0E06B0HA" class="Code">&nbsp;</div><div id="wwpID0E05B0HA" class="Code"># Enable/disable unified bootloader AB and rootfs AB</div><div id="wwpID0E04B0HA" class="Code"># Set 1 to enable, set 0 to disable. Default is enabled</div><div id="wwpID0E03B0HA" class="Code"># This option must be defined after "&lt; ROOTFS_AB 1 &gt;"</div><div id="wwpID0E02B0HA" class="Code"># When &lt; ROOTFS_BL_UNIFIED_AB 1 &gt; is set,</div><div id="wwpID0E01B0HA" class="Code"># auto sync for both BL and RF are disabled.</div><div id="wwpID0E0ZB0HA" class="Code"><span style="background-color: yellow">&lt; ROOTFS_BL_UNIFIED_AB 1 &gt;</span></div><div id="wwpID0E0YB0HA" class="Code">&nbsp;</div><div id="wwpID0E0XB0HA" class="Code"># To disable bootloader autosync, use &lt; BL_AUTOSYNC_DISABLE 1 &gt;, default is disabled.</div><div id="wwpID0E0WB0HA" class="Code"># REDUNDANCY_ENABLE or REDUNDANCY_USER must be defined before</div><div id="wwpID0E0VB0HA" class="Code"># BL_AUTOSYNC_DISABLE !</div><div id="wwpID0E0UB0HA" class="Code">&lt; BL_AUTOSYNC_DISABLE 1 &gt;</div><div id="wwpID0E0TB0HA" class="Code">&nbsp;</div><div id="wwpID0E0SB0HA" class="Code"># slot info order is important!</div><div id="wwpID0E0RB0HA" class="Code"># &lt;priority&gt;    &lt;suffix&gt;     &lt;retry_count&gt;  &lt;boot_successful&gt;</div><div id="wwpID0E0QB0HA" class="Code">15                  _a          7               1</div><div id="wwpID0E0PB0HA" class="Code">14                  _b          7               1</div><div id="wwpID0E0OB0HA" class="Body_Text"><span class="Code_Char">&lt;&nbsp;MAX_ROOTFS_AB_RETRY_COUNT 3&nbsp;&gt;</span> (highlighted above) sets the maximum rootfs slot try count. This is the number of times CBoot tries to boot the rootfs before switching the roles of the current and unused rootfs slots. The setting range is 1 to 3; the default is 3.</div><div id="wwpID0E0NB0HA" class="Body_Text"><span class="Code_Char">&lt;&nbsp;ROOTFS_AB 1&nbsp;&gt;</span> (also highlighted above) enables rootfs redundancy. To disable rootfs redundancy, change this line to <span class="Code_Char">&lt;&nbsp;ROOTFS_AB&nbsp;0&nbsp;&gt;</span>.</div><div id="wwpID0E0MB0HA" class="Body_Text"><span class="Code_Char">&lt;&nbsp;ROOTFS_ACTIVE_A 1&nbsp;&gt;</span> (also highlighted) makes rootfs slot&nbsp;A the default active rootfs slot. To make rootfs slot&nbsp;B the default active rootfs slot, change this line to <span class="Code_Char">&lt;&nbsp;ROOTFS_ACTIVE_B&nbsp;1&nbsp;&gt;</span>.</div><div id="wwpID0E0LB0HA" class="Body_Text"><span class="Code_Char">&lt;&nbsp;ROOTFS_BL_UNIFIED_AB 1&nbsp;&gt;</span> (also highlighted) enables or disables unified bootloader A/B and rootfs A/B. To disable unified bootloader A/B and rootfs A/B, set this line to <span class="Code_Char">&lt;&nbsp;ROOTFS_BL_UNIFIED_AB 0&nbsp;&gt;</span>. The default setting is 1. When <span class="Code_Char">ROOTFS_BL_UNIFIED_AB</span> is set, auto sync for both Bootloader and root file system are disabled.</div><div id="wwpID0E0KB0HA" class="Body_Text">If rootfs A/B and unified bootloader A/B are both to be enabled, <span class="Code_Char">&lt;&nbsp;ROOTFS_ACTIVE_A 1&nbsp;&gt;</span> must precede <span class="Code_Char">&lt;&nbsp;ROOTFS_BL_UNIFIED_AB 1&nbsp;&gt;</span> in the <span class="Code_Char">.cfg</span> file.<span class="Comment_Reference"> </span></div><div id="wwpID0E0JB0HA" class="Body_Text"><span class="Code_Char">&lt;&nbsp;BL_AUTOSYNC_DISABLE 1&nbsp;&gt;</span> (also highlighted) disables bootloader auto sync. To enable bootloader auto sync, change this line to <span class="Code_Char">&lt;&nbsp;BL_AUTOSYNC_DISABLE 0&nbsp;&gt;</span>. Note that 1 <span class="Emphasis">disables</span> bootloader auto sync, and 0 <span style="font-style: italic">enables</span> it. The default value is 1.</div><div id="wwpID0E0IB0HA" class="Body_Text">To customize the SMD partitions:</div><div id="wwpID0E0HB0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Modify <span class="Code_Char">l4t_smd_info.rootfs_AB.cfg</span>.</div><div id="wwpID0E0GB0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Run <span class="Code_Char">nv_smd_generator</span> on an X86 host system to generate the new SMD image, <span class="Code_Char">slot_metadata.bin.rootfsAB</span>.</div><div id="wwpID0E0FB0HA" class="Code">C:\...&gt; nv_smd_generator &lt;config_file&gt; &lt;output_file&gt;</div><div id="wwpID0E0EB0HA" class="List_Continue">Where:</div><div id="wwpID0E0DB0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;config_file&gt;</span> is the SMD configuration file.</div><div id="wwpID0E0CB0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;output_file&gt;</span> is the name of the output SMD image file.</div><div id="wwpID0E0BB0HA" class="List_Continue">For example:</div><div id="wwpID0E0AB0HA" class="Code">C:\...&gt; nv_smd_generator l4t_smd_info.rootfs_AB.cfg slot_metadata.bin.rootfsAB</div><div id="wwpID0E6HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Copy <span class="Code_Char">slot_metadata.bin.rootfsAB</span> to the host machine.</div><div id="wwpID0E5HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Flash the <span class="Code_Char">SMD</span> partitions to the target device:</div><div id="wwpID0E4HA" class="Body_Text">For more information about the SMD partitions, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_agx_tx2.html#wwpID0E0ZH0HA" title="Jetson Xavier NX / AGX Xavier / TX2 Update and Redundancy">Enabling Rootfs Redundancy</a></span> in the topic <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_agx_tx2.html#" title="Jetson Xavier NX / AGX Xavier / TX2 Update and Redundancy">Jetson Xavier NX&nbsp;/ AGX Xavier&nbsp;/ TX2 Update and Redundancy</a></span>.</div><H3 id="wwpID0E3HA" class="Heading_3">Managing Rootfs Slots with nvbootctrl</H3><div id="wwpID0E2HA" class="Body_Text">The <span class="Code_Char">nvbootctrl</span> tool can help you test and develop a pair of redundant file systems. You can use it to display the status of both root file systems or to change the active rootfs slot between slots A and B.</div><div id="wwpID0E1HA" class="Body_Text">This tool’s default usage, shown below, is for Bootloader. For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootloader_update_agx_tx2.html#" title="Jetson Xavier NX / AGX Xavier / TX2 Update and Redundancy">Jetson Xavier NX&nbsp;/ AGX Xavier&nbsp;/ TX2 Update and Redundancy</a></span>.</div><div id="wwpID0EZHA" class="Body_Text">The shell command that runs the <span class="Cell_code">nvbootctrl</span> tool is:</div><div id="wwpID0EYHA" class="Code">$ sudo nvbootctrl [ -t &lt;target&gt;] &lt;command&gt;</div><div id="wwpID0EXHA" class="Body_Text">Where:</div><div id="wwpID0EWHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;target&gt;</span> is the type of target. It can be either <span class="Code_Char">bootloader</span> or <span class="Code_Char">rootfs</span>. The default, effective when the <span class="Code_Char">-t</span> option is not used, is <span class="Code_Char">bootloader</span>.</div><div id="wwpID0EVHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;command&gt;</span> is one of the commands to the tool shown in this table:</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 161.75pt"><div id="wwpID0EABNUHA" class="Cell_Heading">Command</div></th><th style="background-color: #DDEEBF; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 252.25pt"><div id="wwpID0EAANUHA" class="Cell_Heading">Description</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABMUHA" class="Cell_Text">get-number-slots</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAMUHA" class="Cell_Text">Prints the number of slots.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABLUHA" class="Cell_Text">get-current-slot</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAALUHA" class="Cell_Text">Prints the index of the currently running slot.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABKUHA" class="Cell_Text">mark-boot-successful</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAKUHA" class="Cell_Text">Marks the current slot as Good.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABJUHA" class="Cell_Text">set-active-boot-slot &lt;slot&gt;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAJUHA" class="Cell_Text">Causes next boot to load and execute the specified slot.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABIUHA" class="Cell_Text">set-slot-as-unbootable &lt;slot&gt;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAIUHA" class="Cell_Text">Marks &lt;slot&gt; as invalid.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABHUHA" class="Cell_Text">is-slot-bootable &lt;slot&gt;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAHUHA" class="Cell_Text">Returns 0 if &lt;slot&gt; is bootable, or a non-zero value otherwise.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABGUHA" class="Cell_Text">is-slot-marked-successful &lt;slot&gt;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAGUHA" class="Cell_Text">Returns 0 only if &lt;slot&gt; is marked Good, or a non-zero value otherwise.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABFUHA" class="Cell_Text">get-suffix &lt;slot&gt;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAFUHA" class="Cell_Text">Prints the suffix of &lt;slot&gt;.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABEUHA" class="Cell_Text">dump-slots-info</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAEUHA" class="Cell_Text">Prints information about slots.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABDUHA" class="Cell_Text">is-autosync-enabled</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAADUHA" class="Cell_Text">Prints the status of autosync (enabled or disabled). For Bootloader only.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABCUHA" class="Cell_Text">toggle-autosync</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAACUHA" class="Cell_Text">Toggles the enablement status of autosync. For Bootloader only.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABBUHA" class="Cell_Text">is-unified-enabled</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EEABUHA" class="Cell_Text">Returns:</div><div id="wwpID0EDABUHA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>0 if both unified A/B and unified A/B are enabled</div><div id="wwpID0ECABUHA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>69 if both unified A/B and rootfs A/B are disabled </div><div id="wwpID0EBABUHA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>70 if rootfs A/B is enabled and unified A/B is disabled</div><div id="wwpID0EAABUHA" class="Cell_Text">(The fourth combination, rootfs A/B disabled and unified A/B enabled, is not possible.)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" colspan="2"><div id="wwpID0EAAAUHA" class="Cell_Text">&lt;slot&gt; is a zero-based slot number: 0 for slot&nbsp;A, or 1 for slot&nbsp;B.</div></td></tr></table></div><div id="wwpID0ETHA" class="Leading">&nbsp;</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABASHA" class="Note_Image">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 346.5pt"><div id="wwpID0EAAASHA" class="Note_Text">When “Unified bootloader A/B and rootfs A/B” is enabled, the command <span class="Code_Char">sudo nvbootctrl ‑t rootfs &lt;command&gt;</span> is not supported, and <span class="Code_Char">nvbootctrl</span> prints the warning message “sudo nvbootctrl &lt;command&gt; indicates both bootloader and rootfs information.”</div></td></tr></table></div><div id="wwpID0ERHA" class="Heading_5">To dump root file systems slot A and slot B information</div><div id="wwpID0EQHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Enter the command:</div><div id="wwpID0EPHA" class="Code">$ sudo nvbootctrl -t rootfs dump-slots-info</div><div id="wwpID0EOHA" class="Heading_5">To switch between root file systems slot A and slot B</div><div id="wwpID0ENHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Enter the command:</div><div id="wwpID0EMHA" class="Code">$ sudo nvbootctrl -t rootfs set-active-boot-slot &lt;slot&gt;</div><div id="wwpID0ELHA" class="List_Continue">Where <span class="Cell_code">&lt;slot&gt;</span> is the active slot after the device is next rebooted.</div><div id="wwpID0EKHA" class="Heading_5">Failover Rootfs Slot Switching</div><div id="wwpID0EJHA" class="Body_Text">If a Jetson device with rootfs redundancy fails to boot the specified number of consecutive times (see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0AD0HA" title="Setting Up Your File System">To customize the SMD partition image</a></span>), it fails over to the unused rootfs slot. That is, it makes the unused rootfs slot the active rootfs slot and vice versa, then tries to boot again.</div><div id="wwpID0EIHA" class="Body_Text">If both rootfs slots are unbootable, the device boots into the recovery kernel image.</div><H3 id="wwpID0EHHA" class="Heading_3">Using UUID for Root File System Partitions APP and APP_b</H3><div id="wwpID0EGHA" class="Body_Text">Always use a partition UUID, rather than a device name, to identify the <span class="Cell_code">APP</span> and <span class="Code_Char">APP_b</span> partitions when rootfs redundancy is enabled. The form of a UUID reference to a partition is <span class="Code_Char">&lt;xxxx&gt;(UUID)</span>, where <span class="Code_Char">&lt;xxxx&gt;</span> is the partition’s UUID.</div><div id="wwpID0EFHA" class="Body_Text">After you flash the Jetson device with the two root file systems, the UUID used for the <span class="Code_Char">APP</span> partition is stored in <span class="Code_Char">bootloader/l4t-rootfs-uuid.txt</span>, and the UUID used for the <span class="Cell_code">APP_b</span> partition is stored in <span class="Code_Char">bootloader/l4t-rootfs-uuid.txt_b</span>. You may specify your own UUID by writing the UUID to these files before executing the flash command as shown in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0GE0HA" title="Setting Up Your File System">How to Create and Flash Root File Systems A and B</a></span>.</div><H3 id="wwpID0EEHA" class="Heading_3">Over-the-Air Update with Rootfs Redundancy Enabled</H3><div id="wwpID0EDHA" class="Body_Text">Jetson Linux supports image-based Over-the-Air (OTA) update with rootfs redundancy enabled. For more information about the update process, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/updating_jetson_and_host.html#wwpID0E0UI0HA" title="Over-the-Air Update">Updating Jetson Linux with Image-Based Over-the-Air Update</a></span> in the topic <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/updating_jetson_and_host.html#" title="Over-the-Air Update">Over-the-Air Update</a></span>.</div><div id="wwpID0ECHA" class="Body_Text">When the option “Unified bootloader A/B and rootfs A/B” is enabled, the Jetpack Debian package <span class="Code_Char">over-the-air update</span> is disabled.</div><div id="wwpID0EBHA" class="Body_Text">Performing an OTA update with a Debian package is not recommended for systems that use rootfs redundance, although it is possible when the option “Unified bootloader A/B and rootfs A/B” is disabled. This is because Debian packages only update files in the current rootfs slot. The system does not switch the active rootfs slot after rebooting.</div></div><div id="page_dates"></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></body></html>