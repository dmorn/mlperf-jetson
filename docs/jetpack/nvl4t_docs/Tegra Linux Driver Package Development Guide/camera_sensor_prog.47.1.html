<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- NVIDIA customization --><title>NVIDIA Jetson Linux Driver Package Software Features : Camera Development | NVIDIA Docs </title><link rel="Prev" href="jetson_xavier_camera_soft_archi.html" title="Previous" /><link rel="Next" href="camera_sensor_prog.47.2.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/camera_sensor_prog.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="psIdC2wC_002f3mpYDs5Ep174hw" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="fa"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --></header><div id="page_content_container" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px"><div id="page_content"><H1 id="wwpID0E0BDB0HA" class="Heading_2_Top">Sensor Software Driver Programming</H1><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E03CB0HA">Camera Core Library Interface</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0WCB0HA">Direct V4L2 Interface</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0JCB0HA">Camera Modules and the Device Tree</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0NBB0HA">Individual Imaging Device</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0F60HA">Device Properties</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0B60HA">Property-Value Pairs</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0450HA">Property-Value Pairs (Version 2.0 Only)</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0150HA">Example Piece-wise Linear Compression Function</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0Q50HA">Example Digital Overlap WDR Exposure Frame (3840×2160)</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0B50HA">Port Binding</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0T30HA">To verify the port binding result</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0S20HA">Sensor Pixel Clock</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0310HA">SerDes Pixel Clock</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0Z10HA">Port Index</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0S10HA">V4L2 Kernel Driver (Version 1.0)</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0M10HA">Macro Definitions</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0H10HA">Sensor-Private Data</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0TZ0HA">Configuring Regmap</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0KZ0HA">Configuring Controls</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0BX0HA">Setting Up Control Registers</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E01W0HA">Read-Write Wrapper in the Register</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0UW0HA">Power Functions</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0PW0HA">Setting Up the V4L2 Subdevice and Camera Common</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0IV0HA">Control Handlers</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0UT0HA">Boot-Time Initialization</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0RP0HA">Removing Sensor Drivers</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0CP0HA">V4L2 Kernel Driver (Version 2.0)</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E03O0HA">Macro Definitions</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0XO0HA">Sensor-Private Data</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0KO0HA">Regmap</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0DO0HA">Sensor Controls</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0YN0HA">Control Handlers</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0EN0HA">How Controls Are Implemented</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0FM0HA">Setting Up Registers for the Control Handler</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E06L0HA">Read-Write Wrapper in the Register</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E01L0HA">Power Functions</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0WL0HA">Stream Functions</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0TL0HA">Miscellaneous Functions</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0RL0HA">Control Operations</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0XJ0HA">Boot-Time Initialization</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0GI0HA">Removing Sensor Drivers</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0BI0HA">Loadable Kernel Module (LKM)</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0NH0HA">Kernel Configuration</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0HH0HA">Device Registration</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0FH0HA">Using Plugin Manager</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwconnect_header">Using the Jetson-IO Tool</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0E0XF0HA">Using the Main Platform Device Tree File</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0E0LF0HA">Verifying the V4L2 Sensor Driver</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0E0YE0HA">Debugging Tips</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0E0KD0HA">Mode Tables</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0E0FB0HA">Camera Sensor Drivers Porting</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0E4HA">Changes for the V4L2 API</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0ETHA">Changes to Device Tree Properties</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EPHA">Porting version 1.0 drivers to version 2.0</a></div></dd></dl></dl></div><div id="wwpID0E0ADB0HA" class="Body_Text">The camera sensor driver acquires data from the camera’s sensor over the CSI bus, in the sensor’s native format.</div><div id="wwpID0E06CB0HA" class="Body_Text">There are two types of camera programming paths. You must choose one, depending on the camera and your application:</div><div id="wwpID0E05CB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Camera Core Library Interface</div><div id="wwpID0E04CB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Direct V4L2 Interface</div><H3 id="wwpID0E03CB0HA" class="Heading_3">Camera Core Library Interface</H3><div id="wwpID0E02CB0HA" class="Body_Text">The camera core library provides all of the controls and performs all of the processing between the application and kernel-mode V4L2 drivers. Typical use cases for the camera core library interface include:</div><div id="wwpID0E01CB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Applications that use the Jetson ISP functionality</div><div id="wwpID0E0ZCB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Applications that must convert RGB format to YUV format and perform various post-processing tasks for Bayer sensors</div><div id="wwpID0E0YCB0HA" class="Body_Text">The NVIDIA<span style="vertical-align: super">®</span> Jetson™ Linux Driver Package (L4T) architecture framework with the application and kernel mode V4L2 drivers is shown in the following diagram.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0XCB0HA" class="Body_Text"> <img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image1_4.png" style="display: inline; left: 0pt; top: 0pt" alt="A screenshot of a cell phone Description generated with high confidence" title="A screenshot of a cell phone Description generated with high confidence" /></div></div><H3 id="wwpID0E0WCB0HA" class="Heading_3">Direct V4L2 Interface</H3><div id="wwpID0E0VCB0HA" class="Body_Text">In applications that support a direct V4L2 interface, use this interface to communicate with the NVIDIA V4L2 driver without using the camera core library. Use this path for capturing RAW data from a sensor or for validating sensor drivers.</div><div id="wwpID0E0UCB0HA" class="Body_Text">An application uses the kernel mode V4L2 drivers like this:</div><div class="ww_skin_page_overflow"><div id="wwpID0E0TCB0HA" class="Body_Text"> <img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image2.jpg" style="display: inline; left: 0pt; top: 0pt" alt="A screenshot of a cell phone Description generated with very high confidence" title="A screenshot of a cell phone Description generated with very high confidence" /></div></div><div id="wwpID0E0SCB0HA" class="Body_Text">To bring up a Bayer pixel format sensor you must:</div><div id="wwpID0E0RCB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Add an appropriate device tree node in the kernel</div><div id="wwpID0E0QCB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Develop a V4L2 sensor driver</div><div id="wwpID0E0PCB0HA" class="Body_Text">You can use either of two versions of the sensor driver for driver development:</div><div id="wwpID0E0OCB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Version 1.0: The version used in past releases. Some version 1.0 features are not available in later releases.</div><div id="wwpID0E0NCB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Version 2.0: A new version that uses the new Jetson V4L2 Camera Framework to modularize code, simplify sensor driver architecture, and encapsulate redundant code. NVIDIA recommends using this version for any new driver development.</div><div id="wwpID0E0MCB0HA" class="Body_Text">The examples provided use Sony IMX185 sensors. Source code for the Sony IMX185 sensor drivers is in these files:</div><div id="wwpID0E0LCB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Version 1.0 driver: <span class="Code_Char">imx185_v1.c</span></div><div id="wwpID0E0KCB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Version 2.0 driver: <span class="Code_Char">imx185.c</span></div><H3 id="wwpID0E0JCB0HA" class="Heading_3">Camera Modules and the Device Tree</H3><div id="wwpID0E0ICB0HA" class="Body_Text">A <span class="Strong">camera module</span> attached to the target platform can consist of one or more devices. A typical rear camera module includes a complementary metal-oxide semiconductor (CMOS) sensor. A typical front camera module may include a single CMOS sensor.</div><div id="wwpID0E0HCB0HA" class="Heading_5">To add camera modules to a device tree</div><div id="wwpID0E0GCB0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Locate or create a <span class="Code_Char">tegra-camera-platform</span> device tree node in the kernel source tree at:</div><div id="wwpID0E0FCB0HA" class="Code_Indent">&lt;top&gt;/hardware/nvidia/platform/t19x/common/kernel-dts/t19x-common-modules/tegra194-camera-imx185-a00.dtsi</div><div id="wwpID0E0ECB0HA" class="List_Continue">Where <span class="Code_Char">&lt;top&gt;</span> is the directory where you installed the board support package.</div><div id="wwpID0E0DCB0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>In a <span class="Code_Char">tegra-camera-platform</span> device tree node, create a module table (modules) with one or more modules.</div><div id="wwpID0E0CCB0HA" class="List_Continue">Each module must contain its basic information and the definition of the devices that are inside that module.</div><div id="wwpID0E0BCB0HA" class="Body_Text">This is a typical device tree node for a camera module:</div><div id="wwpID0E0ACB0HA" class="Code">    tegra-camera-platform {</div><div id="wwpID0E06BB0HA" class="Code">        compatible = "nvidia, tegra-camera-platform";</div><div id="wwpID0E05BB0HA" class="Code">        modules {</div><div id="wwpID0E04BB0HA" class="Code">            module0 {</div><div id="wwpID0E03BB0HA" class="Code">                badge = "imx185_bottom_liimx185";</div><div id="wwpID0E02BB0HA" class="Code">                position = "bottom";</div><div id="wwpID0E01BB0HA" class="Code">                orientation = "0";</div><div id="wwpID0E0ZBB0HA" class="Code">                drivernode0 {</div><div id="wwpID0E0YBB0HA" class="Code">                    pcl_id = "v4l2_sensor";</div><div id="wwpID0E0XBB0HA" class="Code">                    devname = "imx185 30-001a";</div><div id="wwpID0E0WBB0HA" class="Code">                    proc-device-tree =</div><div id="wwpID0E0VBB0HA" class="Code">          "/proc/device-tree/i2c@3180000/tca9546@70/i2c@0/imx185_a@1a";</div><div id="wwpID0E0UBB0HA" class="Code">                };</div><div id="wwpID0E0TBB0HA" class="Code">            };</div><div id="wwpID0E0SBB0HA" class="Code">        };</div><div id="wwpID0E0RBB0HA" class="Code">    };</div><div id="wwpID0E0QBB0HA" class="Heading_5">Module Properties</div><div id="wwpID0E0PBB0HA" class="Body_Text">The information for <span class="Code_Char">moduleX: module</span> (or <span class="Code_Char">moduleX: modules</span>) is:</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 107.65pt"><div id="wwpID0EABD0OBB0HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 292.85pt"><div id="wwpID0EAAD0OBB0HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0OBB0HA" class="Cell_Text">badge</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EFAC0OBB0HA" class="Cell_Text">A unique name that identifies this module. The name must consist of three parts separated by underscores:</div><div id="wwpID0EEAC0OBB0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>The module’s camera board ID (<span class="Code_Char">camera_board_id</span>).</div><div id="wwpID0EDAC0OBB0HA" class="List_Bullet" style="text-indent: -13.5pt"><span class="WebWorks_Number" style="width: 13.5pt"><span style="color: #004831; font-size: 10pt">•	</span></span>The position of the module, for example, <span class="Code_Char">rear</span> or <span class="Code_Char">front</span>.</div><div id="wwpID0ECAC0OBB0HA" class="List_Bullet" style="text-indent: -13.5pt"><span class="WebWorks_Number" style="width: 13.5pt"><span style="color: #004831; font-size: 10pt">•	</span></span>The module’s part number, which you can find in the module datasheet. If the part number is not available, use a unique identifier. Only the last six characters of the part number are significant.</div><div id="wwpID0EBAC0OBB0HA" class="Cell_Text">For example, <span class="Code_Char">imx185_rear_liimx185</span> represents a module with a rear-facing IMX185 camera and the part number “llimx185.”</div><div id="wwpID0EAAC0OBB0HA" class="Cell_Text">If your system has multiple identical modules, each module must have a different position, making the module name unique.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0OBB0HA" class="Cell_Text">position</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EDAB0OBB0HA" class="Cell_Text">Camera position. Values supported depend on the number of cameras in the system:</div><div id="wwpID0ECAB0OBB0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>In a two-camera system: <span class="Code_Char">rear</span> and <span class="Code_Char">front</span>.</div><div id="wwpID0EBAB0OBB0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>In a three-camera system: <span class="Code_Char">bottom</span>, <span class="Code_Char">top</span>, and <span class="Code_Char">center</span>.</div><div id="wwpID0EAAB0OBB0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>In a six-camera system: <span class="Code_Char">bottomleft</span>, <span class="Code_Char">bottomright</span>, <span class="Code_Char">centerleft</span>, <span class="Code_Char">centerright</span>, <span class="Code_Char">topleft</span>, and topright.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0OBB0HA" class="Cell_Text">orientation</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0OBB0HA" class="Cell_Text">Sensor orientation; a numeric index representing the orientation of the sensor. The relation between indices and orientations is arbitrary, but typically in two-camera systems 0 is “rear facing” and 1 is “front facing.”</div></td></tr></table></div><H3 id="wwpID0E0NBB0HA" class="Heading_3">Individual Imaging Device</H3><div id="wwpID0E0MBB0HA" class="Body_Text">An imaging device is a component inside the camera module. It can be:</div><div id="wwpID0E0LBB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>A sensor</div><div id="wwpID0E0KBB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>A focuser</div><div id="wwpID0E0JBB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>A flash</div><div id="wwpID0E0IBB0HA" class="Body_Text">Information must be added to the device tree node to support the device’s operation.</div><div id="wwpID0E0HBB0HA" class="Body_Text">For each device tree node for a device, assign a device tree node that contains:</div><div id="wwpID0E0GBB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>The device’s name</div><div id="wwpID0E0FBB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>The device’s slave address (available from the device datasheet)</div><div id="wwpID0E0EBB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>A <span class="Code_Char">compatible</span> property that identifies the node</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0DBB0HA" class="Note_Heading">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 351pt"><div id="wwpID0EAAA0DBB0HA" class="Note_Text">Except for devices that refer to other device tree nodes, all value fields in camera-related device tree nodes must use the string data type.</div></td></tr></table></div><div id="wwpID0E0CBB0HA" class="Body_Text">This is an example of a device tree node for the IMX185 V4L2 sensor driver:</div><div id="wwpID0E0BBB0HA" class="Code">imx185_a@1a {</div><div id="wwpID0E0ABB0HA" class="Code">    compatible = "nvidia,imx185";</div><div id="wwpID0E06AB0HA" class="Code">    reg = &lt;0x1a&gt;;</div><div id="wwpID0E05AB0HA" class="Code">    physical_w = "15.0";</div><div id="wwpID0E04AB0HA" class="Code">    physical_h = "12.5";</div><div id="wwpID0E03AB0HA" class="Code">    sensor_model ="imx185";</div><div id="wwpID0E02AB0HA" class="Code">    post_crop_frame_drop = "0";</div><div id="wwpID0E01AB0HA" class="Code">    use_decibel_gain = "true";</div><div id="wwpID0E0ZAB0HA" class="Code">    delayed_gain = "true";</div><div id="wwpID0E0YAB0HA" class="Code">    use_sensor_mode_id = "true";</div><div id="wwpID0E0XAB0HA" class="Code">&nbsp;</div><div id="wwpID0E0WAB0HA" class="Code">    mode0 {</div><div id="wwpID0E0VAB0HA" class="Code">        mclk_khz = "37125";</div><div id="wwpID0E0UAB0HA" class="Code">        num_lanes = "4";</div><div id="wwpID0E0TAB0HA" class="Code">        tegra_sinterface = "serial_a";</div><div id="wwpID0E0SAB0HA" class="Code">        phy_mode = "DPHY";</div><div id="wwpID0E0RAB0HA" class="Code">        discontinuous_clk = "no";</div><div id="wwpID0E0QAB0HA" class="Code">        dpcm_enable = "false";</div><div id="wwpID0E0PAB0HA" class="Code">        cil_settletime = "0";</div><div id="wwpID0E0OAB0HA" class="Code">        dynamic_pixel_bit_depth = "12";</div><div id="wwpID0E0NAB0HA" class="Code">        csi_pixel_bit_depth = "12";</div><div id="wwpID0E0MAB0HA" class="Code">        mode_type = "bayer";</div><div id="wwpID0E0LAB0HA" class="Code">        pixel_phase = "rggb";</div><div id="wwpID0E0KAB0HA" class="Code">        active_w = "1920";</div><div id="wwpID0E0JAB0HA" class="Code">        active_h = "1080";</div><div id="wwpID0E0IAB0HA" class="Code">        readout_orientation = "0";</div><div id="wwpID0E0HAB0HA" class="Code">        line_length = "2200";</div><div id="wwpID0E0GAB0HA" class="Code">        inherent_gain = "1";</div><div id="wwpID0E0FAB0HA" class="Code">        mclk_multiplier = "2";</div><div id="wwpID0E0EAB0HA" class="Code">        pix_clk_hz = "74250000";</div><div id="wwpID0E0DAB0HA" class="Code">&nbsp;</div><div id="wwpID0E0CAB0HA" class="Code">        gain_factor = "10";</div><div id="wwpID0E0BAB0HA" class="Code">        min_gain_val = "0";         /* 0dB */</div><div id="wwpID0E0AAB0HA" class="Code">        max_gain_val = "480";       /* 48dB */</div><div id="wwpID0E0660HA" class="Code">        step_gain_val = "3";        /* 0.3 */</div><div id="wwpID0E0560HA" class="Code">        default_gain = "0";</div><div id="wwpID0E0460HA" class="Code">        min_hdr_ratio = "1";</div><div id="wwpID0E0360HA" class="Code">        max_hdr_ratio = "1";</div><div id="wwpID0E0260HA" class="Code">        framerate_factor = "1000000";</div><div id="wwpID0E0160HA" class="Code">        min_framerate = "1500000";</div><div id="wwpID0E0Z60HA" class="Code">        max_framerate = "30000000"; /* 30 */</div><div id="wwpID0E0Y60HA" class="Code">        min_exp_time = "30";        /* us */</div><div id="wwpID0E0X60HA" class="Code">        max_exp_time = "660000";    /* us */</div><div id="wwpID0E0W60HA" class="Code">        step_exp_time = "1";</div><div id="wwpID0E0V60HA" class="Code">        default_exp_time = "33334"; /* us */</div><div id="wwpID0E0U60HA" class="Code">        embedded_metadata_height = "1";</div><div id="wwpID0E0T60HA" class="Code">    };</div><div id="wwpID0E0S60HA" class="Code">    . . .</div><div id="wwpID0E0R60HA" class="Code">    ports {</div><div id="wwpID0E0Q60HA" class="Code">        #address-cells = &lt;1&gt;;</div><div id="wwpID0E0P60HA" class="Code">        #size-cells = &lt;0&gt;;</div><div id="wwpID0E0O60HA" class="Code">        port@0 {</div><div id="wwpID0E0N60HA" class="Code">            reg = &lt;0&gt;;</div><div id="wwpID0E0M60HA" class="Code">            liimx185_imx185_out0: endpoint {</div><div id="wwpID0E0L60HA" class="Code">            port-index = &lt;0&gt;;</div><div id="wwpID0E0K60HA" class="Code">            bus-width = &lt;4&gt;;</div><div id="wwpID0E0J60HA" class="Code">            remote-endpoint = &lt;&amp;liimx185_csi_in0&gt;;</div><div id="wwpID0E0I60HA" class="Code">        };</div><div id="wwpID0E0H60HA" class="Code">    };</div><div id="wwpID0E0G60HA" class="Code">};</div><H4 id="wwpID0E0F60HA" class="Heading_4">Device Properties</H4><div id="wwpID0E0E60HA" class="Body_Text">The following table describes the device tree node properties for the V4L2 sensor device.</div><div id="wwpID0E0D60HA" class="Body_Text">Properties in this table can be specified in different DTSI files. For example, clock, GPIO, and regulator properties can be specified in the platform DTSI file and the rest of the properties can be specified in the sensor DTSI files.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 97.65pt"><div id="wwpID0EABP0C60HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 302.85pt"><div id="wwpID0EAAP0C60HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABO0C60HA" class="Cell_Text">compatible</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAO0C60HA" class="Cell_Text">Device identifier. The Linux kernel uses this keyword to bind the device driver to a specific device.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABN0C60HA" class="Cell_Text">reg</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAN0C60HA" class="Cell_Text">I2C slave address.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABM0C60HA" class="Cell_Text">mclk*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAM0C60HA" class="Cell_Text">Name of the input clock for the device. The default value is <span class="Code_Char">extperiph1</span>.</div><div id="wwpID0EBAM0C60HA" class="Cell_Text">The maximum frequency for <span class="Code_Char">extperiph1</span> is 24&nbsp;MHz. If a frequency greater than 24&nbsp;MHz is required, use an external clock source.</div><div id="wwpID0EAAM0C60HA" class="Cell_Text">Not needed if the sensor is using the clock source provided by the camera module.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABL0C60HA" class="Cell_Text">&lt;xxx&gt;-gpio*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EGAL0C60HA" class="Cell_Text">General-purpose input/output (GPIO) pins for the device, where <span class="Code_Char">&lt;xxx&gt;</span> identifies the GPIO pin for the camera.</div><div id="wwpID0EFAL0C60HA" class="Cell_Text">Default GPIO pins for the camera are:</div><div id="wwpID0EEAL0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>H3-gpio: Camera0 Reset</div><div id="wwpID0EDAL0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>H6-gpio: Camera0 Power Down</div><div id="wwpID0ECAL0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>T6-gpio: Camera1 Reset</div><div id="wwpID0EBAL0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>T5-gpio: Camera1 Power Down</div><div id="wwpID0EAAL0C60HA" class="Cell_Text">Not needed if the sensor has its own I/O control mechanism and does not require specific I/O controls from Jetson.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABK0C60HA" class="Cell_Text">&lt;xxx&gt;-supply*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EGAK0C60HA" class="Cell_Text">Specifies the regulator for the device, where <span class="Code_Char">&lt;xxx&gt;</span> is the regulator name for the sensor driver. The value is a reference to the actual regulator name (defined elsewhere in the device tree files), enclosed in angle brackets.</div><div id="wwpID0EFAK0C60HA" class="Cell_Text">The defined regulators are:</div><div id="wwpID0EEAK0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>vana-supply: Value must be <span class="Code_Char">&lt;&amp;en_vdd_cam_hv_2v8&gt;</span> (analog 2.8v).</div><div id="wwpID0EDAK0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>vdig-supply: Value must be <span class="Code_Char">&lt;&amp;en-vdd-cam_1v2&gt;</span> (digital 1.2v).</div><div id="wwpID0ECAK0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>vif-supply: Value must be <span class="Code_Char">&lt;&amp;en-vdd-cam&gt;</span> (interface 1.8v).</div><div id="wwpID0EBAK0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>vvcm-supply: Value must be <span class="Code_Char">&lt;&amp;en_vdd_vcm_2v8&gt;</span> (analog 2.8v for vcm).</div><div id="wwpID0EAAK0C60HA" class="Cell_Text">Not needed if the sensor is using the power sources provided by the camera module.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABJ0C60HA" class="Cell_Text">&lt;xxx&gt;-reg</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EFAJ0C60HA" class="Cell_Text">A unique identifier for the regulator, where <span class="Code_Char">&lt;xxx&gt;</span> is the regulator name for the sensor driver. The value of this field is the regulator name with the suffix <span class="Code_Char">-reg</span>.</div><div id="wwpID0EEAJ0C60HA" class="Cell_Text">The defined regulators are:</div><div id="wwpID0EDAJ0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>avdd-reg: <span class="Code_Char">vana</span></div><div id="wwpID0ECAJ0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>dvdd-reg: <span class="Code_Char">vdig</span></div><div id="wwpID0EBAJ0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>iovdd-reg: <span class="Code_Char">vif</span></div><div id="wwpID0EAAJ0C60HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>vcmvdd-reg: <span class="Code_Char">vvcm</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABI0C60HA" class="Cell_Text">physical_w</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAI0C60HA" class="Cell_Text">Physical width of the sensor in millimeters.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0C60HA" class="Cell_Text">physical_h</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAH0C60HA" class="Cell_Text">Physical height of the sensor in millimeters.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0C60HA" class="Cell_Text">sensor_model*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0C60HA" class="Cell_Text">Type of sensor in this module, e.g. <span class="Code_Char">"imx185"</span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0C60HA" class="Cell_Text">set_mode_delay_ms*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAF0C60HA" class="Cell_Text">Maximum wait time for the first frame after capture starts, in milliseconds.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0C60HA" class="Cell_Text">post_crop_frame_drop*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAE0C60HA" class="Cell_Text">Number of frames the driver is to drop after applying sensor crop settings.</div><div id="wwpID0EAAE0C60HA" class="Cell_Text">Some sensors must drop frames to avoid  receiving corrupted frames after applying crop settings.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0C60HA" class="Cell_Text">use_decibel_gain*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAD0C60HA" class="Cell_Text">A Boolean, default value false. Determines whether the driver returns analog gain in decibels (dB), according to the formula:</div><div id="wwpID0EBAD0C60HA" class="Cell_Text_Indent">dB = 20 * log(Analog Gain)</div><div id="wwpID0EAAD0C60HA" class="Cell_Text">If false, analog gain received by the driver is returned without change.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0C60HA" class="Cell_Text">delayed_gain*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0C60HA" class="Cell_Text">A Boolean, default value false. If true, the user mode driver delays sending updated gain values by one frame. If false, it sends updated gain values to the driver immediately.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0C60HA" class="Cell_Text">use_sensor_mode_id*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0C60HA" class="Cell_Text">A Boolean, default value false. If true, the user mode driver bypasses the default mode selection logic and uses the <span class="Code_Char">TEGRA_CAMERA_CID_SENSOR_MODE_ID</span> control to select a specific sensor mode. If false, it uses default mode selection logic, which selects a mode based on resolution, color format, and frame rate.</div></td></tr><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" colspan="2"><div id="wwpID0EAAA0C60HA" class="Cell_Text">* Optional</div></td></tr></table></div><H4 id="wwpID0E0B60HA" class="Heading_4">Property-Value Pairs</H4><div id="wwpID0E0A60HA" class="Body_Text">This table describes the property-value pairs that apply to the sensor mode for the V4L2 implementation.</div><div id="wwpID0E0650HA" class="Body_Text">All properties are set per-mode, and must be set precisely.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 97.65pt"><div id="wwpID0EAB0LB00550HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 302.85pt" colspan="3"><div id="wwpID0EAA0LB00550HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0KB00550HA" class="Cell_Text">mode&lt;n&gt;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA0KB00550HA" class="Cell_Text">Specifies the sensor mode that this group of properties applies to, where <span class="Code_Char">&lt;n&gt;</span> is a 0-based index.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0JB00550HA" class="Cell_Text">ports</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA0JB00550HA" class="Cell_Text">Media controller graph binding information. For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0B50HA" title="Sensor Software Driver Programming">Port Binding</a></span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0IB00550HA" class="Cell_Text">mclk_khz</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA0IB00550HA" class="Cell_Text">Standard MIPI driving clock frequency, in kilohertz.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0HB00550HA" class="Cell_Text">num_lanes</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA0HB00550HA" class="Cell_Text">Number of lane channels the sensor is programmed to output.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0GB00550HA" class="Cell_Text">tegra_sinterface</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA0GB00550HA" class="Cell_Text">Base NVIDIA<span style="vertical-align: super">®</span> Tegra<span style="vertical-align: super">®</span> serial interface to which the lanes are connected, for example, "serial_a".</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0FB00550HA" class="Cell_Text">discontinuous_clk</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA0FB00550HA" class="Cell_Text">A Boolean; indicates whether the sensor is programmed to use a discontinuous clock on MIPI lanes.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0EB00550HA" class="Cell_Text">cil_settletime</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EJA0EB00550HA" class="Cell_Text">THS settle time of the MIPI lane, in nanoseconds. Calculate the range of acceptable values with the appropriate formula.</div><div id="wwpID0EIA0EB00550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>For NVIDIA<span style="vertical-align: super">®</span> Jetson™ Nano devices and Jetson TX1:</div><div class="ww_skin_page_overflow"><div id="wwpID0EHA0EB00550HA" class="Cell_Text" style="text-indent: 0pt"><img class="Equation" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/camera_sensor_prog.1.3.jpg" width="100%" style="display: block; left: 0pt; max-height: 18px; max-width: 505px; top: 0pt" alt="" title="" /></div></div><div id="wwpID0EGA0EB00550HA" class="Cell_Text_Indent">Where one lp clock period is 1/(102&nbsp;MHz).</div><div id="wwpID0EFA0EB00550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>For NVIDIA<span style="vertical-align: super">®</span> Jetson AGX Xavier™ series and Jetson TX2 series:</div><div class="ww_skin_page_overflow"><div id="wwpID0EEA0EB00550HA" class="Cell_Text" style="text-indent: 0pt"><img class="Equation" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/camera_sensor_prog.1.4.jpg" width="100%" style="display: block; left: 0pt; max-height: 18px; max-width: 505px; top: 0pt" alt="" title="" /></div></div><div id="wwpID0EDA0EB00550HA" class="Cell_Text_Indent">Where one lp clock period is 1/(204&nbsp;MHz).</div><div id="wwpID0ECA0EB00550HA" class="Cell_Text">UI is the unit interval, equal to the duration of the HS state on the clock lane.</div><div id="wwpID0EBA0EB00550HA" class="Cell_Text">If the value is 0, the driver attempts to auto-calibrate according to the <span class="Code_Char">mclk_multiplier</span> parameter.</div><div id="wwpID0EAA0EB00550HA" class="Cell_Text">See the <span class="Hyperlink"><a href="http://bfiles.chinaaet.com/justlxy/blog/20171110/1000019445-6364593011828743047249885.pdf" target="external_window">MIPI Alliance Specification for D-PHY</a></span> for details.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0DB00550HA" class="Cell_Text">dpcm_enable</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA0DB00550HA" class="Cell_Text">A Boolean; specifies whether to enable DPCM compression for this mode.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0CB00550HA" class="Cell_Text">active_h</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA0CB00550HA" class="Cell_Text">Specifies the height of the pixel active region.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0BB00550HA" class="Cell_Text">active_w</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA0BB00550HA" class="Cell_Text">Specifies the width of the pixel active region.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB0AB00550HA" class="Cell_Text">pixel_t</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EDA0AB00550HA" class="Cell_Text">Deprecated. Use the following properties instead:</div><div id="wwpID0ECA0AB00550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span><span class="Code_Char">mode_type</span></div><div id="wwpID0EBA0AB00550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span><span class="Code_Char">csi_pixel_bit_depth</span></div><div id="wwpID0EAA0AB00550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span><span class="Code_Char">pixel_phase</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB60550HA" class="Cell_Text">mode_type</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EEA60550HA" class="Cell_Text">Sensor mode type. Possible values are:</div><div id="wwpID0EDA60550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span><span class="Code_Char">yuv</span></div><div id="wwpID0ECA60550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span><span class="Code_Char">bayer</span></div><div id="wwpID0EBA60550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span><span class="Code_Char">bayer_wdr_pwl</span>: Wide Dynamic Range mode. Uses the piece-wise linear function to compress multi-exposure fused pixel data. Multi-exposure fusion is also performed on the sensor.</div><div id="wwpID0EAA60550HA" class="Cell_Text">For more information, see the IMX185 Sensor Driver documentation.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB50550HA" class="Cell_Text">readout_orientation</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0ECA50550HA" class="Cell_Text">Specifies clockwise rotation in degrees of the sensor image presented on the display. Intended for use in an Android environment; has no effect with Jetson Linux Driver Package.</div><div id="wwpID0EBA50550HA" class="Cell_Text">This property is used to ensure that the sensor image display is oriented correctly for the end user.</div><div id="wwpID0EAA50550HA" class="Cell_Text">For example, suppose the sensor is rotated 90° counterclockwise, so that the top of the image falls on the right side of the sensor’s imaging surface. The image on the display appears to be rotated 90° clockwise, with the top of the sensor’s imaging area at the top of the display, and the top of the image on the right. To correct this, set <span class="Code_Char">readout_orientation=270</span>. This rotates the displayed image 270° clockwise (90° counterclockwise), rotating the top of the image from the right side of the display to the top.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB40550HA" class="Cell_Text">csi_pixel_bit_depth</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0ECA40550HA" class="Cell_Text">Bit depth of sensor output on the CSI bus.</div><div id="wwpID0EBA40550HA" class="Cell_Text">If <span class="Code_Char">mode_type</span> is set to <span class="Code_Char">bayer_wdr_pwl</span>, this property represents the bit depth of sensor output after piece-wise linear function based compression.</div><div id="wwpID0EAA40550HA" class="Cell_Text">For more information, see the IMX185 Sensor Driver documentation.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EAB30550HA" class="Cell_Text">dynamic_pixel_bit_depth*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EDA30550HA" class="Cell_Text">True dynamic range of the signal.</div><div id="wwpID0ECA30550HA" class="Cell_Text">If <span class="Code_Char">mode type</span> is set to <span class="Code_Char">bayer_wdr_pwl</span>, specifies the bit depth of the multi-exposure fused output before piece-wise linear function based compression.</div><div id="wwpID0EBA30550HA" class="Cell_Text">For other mode types, must be equal to <span class="Code_Char">csi_pixel_bit_depth</span>.</div><div id="wwpID0EAA30550HA" class="Cell_Text">For more information, see the IMX185 Sensor Driver documentation.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt" rowspan="3"><div id="wwpID0EAB20550HA" class="Cell_Text">pixel_phase*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAA20550HA" class="Cell_Text">Sensor pixel phase. Possible values are:</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 95.85pt"><div id="wwpID0ECC10550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>uyvy</div><div id="wwpID0EBC10550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>vyuy</div><div id="wwpID0EAC10550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>yuyv</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.5pt"><div id="wwpID0ECB10550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>yvyu</div><div id="wwpID0EBB10550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>rggb</div><div id="wwpID0EAB10550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>bggr</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 112.5pt"><div id="wwpID0EBA10550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>grbg</div><div id="wwpID0EAA10550HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>gbrg</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAAZ0550HA" class="Cell_Text">For more information, consult to the IMX185 Sensor Driver documentation.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABY0550HA" class="Cell_Text">line_length</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EBAY0550HA" class="Cell_Text">Pixel line width horizontal timing size for the sensor mode. Used to calibrate the features in the camera stack.</div><div id="wwpID0EAAY0550HA" class="Cell_Text">The value must be greater than or equal to <span class="Code_Char">active_w</span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EBBX0550HA" class="Cell_Text">mclk_multiplier</div><div id="wwpID0EABX0550HA" class="Cell_Text">(deprecated)</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EDAX0550HA" class="Cell_Text">MCLK multiplier for timing the capture sequence of the hardware. Calculate this value with the equation:</div><div id="wwpID0ECAX0550HA" class="Cell_Text_Indent">mclk_multiplier =<br />desired ISP clock frequency in Hertz / <span class="Code_Char">mclk</span></div><div id="wwpID0EBAX0550HA" class="Cell_Text">The value must be greater than <span class="Code_Char">pixel_clk_hz</span> divided by <span class="Code_Char">mclk</span> to prevent ISP underrun.</div><div id="wwpID0EAAX0550HA" class="Cell_Text">This switch is no longer needed because the value it specifies is calculated internally.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABW0550HA" class="Cell_Text">pix_clk_hz</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0ECAW0550HA" class="Cell_Text">Sensor pixel clock for calculating exposure, frame rate, etc.</div><div id="wwpID0EBAW0550HA" class="Cell_Text">Calculate the value based on the input clock (<span class="Code_Char">mclk</span>) and PLL settings from sensor mode table. See the sensor data sheet for detailed instructions.</div><div id="wwpID0EAAW0550HA" class="Cell_Text">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Sensor Pixel Clock</a></span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABV0550HA" class="Cell_Text">serdes_pix_clk_hz</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EBAV0550HA" class="Cell_Text">Output clock rate for the serializer/deserializer (GMSL or FPD link), in Hertz. Required only for camera modules that use SerDes.</div><div id="wwpID0EAAV0550HA" class="Cell_Text">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">SerDes Pixel Clock</a></span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABU0550HA" class="Cell_Text">inherent_gain</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EBAU0550HA" class="Cell_Text">Gain obtained inherently from the mode, that is, pixel binning.</div><div id="wwpID0EAAU0550HA" class="Cell_Text">May be set to 1 if you do not know the actual value.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABT0550HA" class="Cell_Text">min_gain_val</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAAT0550HA" class="Cell_Text">Minimum gain limit for the mode. The value is rounded down to six decimal places. Usually set to 1.0, representing 1x gain.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABS0550HA" class="Cell_Text">max_gain_val</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EBAS0550HA" class="Cell_Text">Maximum gain limit for the mode. The value is truncated to six decimal places.</div><div id="wwpID0EAAS0550HA" class="Cell_Text">If supported by the sensor, it may be increased to include digital gain.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABR0550HA" class="Cell_Text">min_exp_time</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EDAR0550HA" class="Cell_Text">Specifies the minimum exposure time limit for the mode, in microseconds. The value is rounded up to an integer.</div><div id="wwpID0ECAR0550HA" class="Cell_Text">Calculate the value according to this equation:</div><div id="wwpID0EBAR0550HA" class="Cell_Text_Indent">min_exp_time = (minimum coarse integration time) *<br />line_ length / pix_clk_hz * 1000000</div><div id="wwpID0EAAR0550HA" class="Cell_Text">The minimum coarse integration time is the minimum exposure intervals. Unit in lines.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABQ0550HA" class="Cell_Text">max_exp_time</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EDAQ0550HA" class="Cell_Text">Specifies the maximum exposure time limit for the mode, in microseconds. The value is rounded up to an integer.</div><div id="wwpID0ECAQ0550HA" class="Cell_Text">Calculate this value with the equation:</div><div id="wwpID0EBAQ0550HA" class="Cell_Text_Indent">max_exp_time = (maximum coarse integration time) * line_length / pix_clk_hz * 1000000</div><div id="wwpID0EAAQ0550HA" class="Cell_Text">The maximum coarse integration time is the maximum exposure intervals. Unit in lines.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABP0550HA" class="Cell_Text">min_hdr_ratio</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAAP0550HA" class="Cell_Text">Minimum high-dynamic-range (HDR) ratio denominator for the mode for HDR sensors. Must be an integer greater than 0. For non-HDR sensors, set to 1.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABO0550HA" class="Cell_Text">max_hdr_ratio</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EBAO0550HA" class="Cell_Text">Maximum HDR ratio denominator for the mode for HDR sensors.</div><div id="wwpID0EAAO0550HA" class="Cell_Text">Must be an integer greater than 0. For non-HDR sensors, set to 1.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABN0550HA" class="Cell_Text">min_framerate</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0ECAN0550HA" class="Cell_Text">Minimum frame rate limit for the mode, in frames/second (fps). The value is rounded down to six decimal places.</div><div id="wwpID0EBAN0550HA" class="Cell_Text">Calculate this value with the equation:</div><div id="wwpID0EAAN0550HA" class="Cell_Text_Indent">min_framerate = pix_clk_hz / (line_length * maximum frame length)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABM0550HA" class="Cell_Text">max_framerate</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0ECAM0550HA" class="Cell_Text">Maximum frame rate limit for the mode in fps. The value is rounded down to six decimal places.</div><div id="wwpID0EBAM0550HA" class="Cell_Text">Calculate this value with the equation:</div><div id="wwpID0EAAM0550HA" class="Cell_Text_Indent">max_framerate = pix_clk_hz / (line_length * minimum frame length)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABL0550HA" class="Cell_Text">embedded_metadata_height</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EBAL0550HA" class="Cell_Text">Specifies the number of extra embedded metadata rows for each frame.</div><div id="wwpID0EAAL0550HA" class="Cell_Text">Set to 0 to disable embedded metadata support.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABK0550HA" class="Cell_Text">num_control_point*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EDAK0550HA" class="Cell_Text">Number of control points used in the piece-wise linear function for compressing multi-exposure fused pixel data. Multi-exposure fusion is also performed on the sensor.</div><div id="wwpID0ECAK0550HA" class="Cell_Text">Valid if <span class="Code_Char">mode_type</span> is set to <span class="Code_Char">bayer_wdr_pwl</span>.</div><div id="wwpID0EBAK0550HA" class="Cell_Text">The camera core library interface supports up to 9&nbsp;control points.</div><div id="wwpID0EAAK0550HA" class="Cell_Text">For more information, see the IMX185 Sensor Driver documentation.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABJ0550HA" class="Cell_Text">control_point_x_[&lt;n&gt;]*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0ECAJ0550HA" class="Cell_Text">X&nbsp;coordinate of control point <span class="Code_Char">&lt;n&gt;</span> from the piece-wise linear compression function, where <span class="Code_Char">&lt;n&gt;</span> is an index from 0 to 15. (Do not include angle brackets in an actual property name.)</div><div id="wwpID0EBAJ0550HA" class="Cell_Text">Valid if <span class="Code_Char">mode_type</span> is set to <span class="Code_Char">bayer_wdr_pwl</span>.</div><div id="wwpID0EAAJ0550HA" class="Cell_Text">The value may not exceed 2<span style="vertical-align: super">dynamic_pixel_width_depth</span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABI0550HA" class="Cell_Text">control_point_y_ [&lt;n&gt;]*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0ECAI0550HA" class="Cell_Text">Y&nbsp;coordinate of control point <span class="Code_Char">&lt;n&gt;</span> from the piece-wise linear compression function, where <span class="Code_Char">&lt;n&gt;</span> is an index from 0 to 15. (Do not include angle brackets in an actual property name.)</div><div id="wwpID0EBAI0550HA" class="Cell_Text">Valid if <span class="Code_Char">mode_type</span> is set to <span class="Code_Char">bayer_wdr_pwl</span>.</div><div id="wwpID0EAAI0550HA" class="Cell_Text">The value may not exceed 2<span style="vertical-align: super">csi_pixel_width_depth</span>.</div></td></tr><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 400.5pt" colspan="4"><div id="wwpID0EAAH0550HA" class="Cell_Text">For WDR DOL (Digital Overlap) sensors</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABG0550HA" class="Cell_Text">num_of_exposure†</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAAG0550HA" class="Cell_Text">Number of exposure frames in a DOL multi-frame.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABF0550HA" class="Cell_Text">num_of_ignored_lines†</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAAF0550HA" class="Cell_Text">Number lines to crop at the top of each exposure frame. Usually includes the OB (Optical Black) rows and ignored area of effective pixel rows, both of which use the same LI (line information) header as the exposure frame on which they reside. The VI (video input) module handles cropping for these lines.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABE0550HA" class="Cell_Text">num_of_lines_offset_0†</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0ECAE0550HA" class="Cell_Text">Number of VBP rows appearing in a single exposure frame of a two-exposure DOL multi-frame. These VBP rows are filtered out as they have LI (line information) indicating that they are blank.</div><div id="wwpID0EBAE0550HA" class="Cell_Text">Note that the same number of VBP rows appear at the end of a long exposure frame and at the start of a short exposure frame.</div><div id="wwpID0EAAE0550HA" class="Cell_Text">For DOL mode with two exposure frames, there is only one type of VBP row. With more than two exposure frames, there may be different types of VBP rows. Hence the parameter can be extended to <span class="Code_Char">number_of_offset_1</span>, <span class="Code_Char">number_of_offset_2</span>,…. The number of VBP row types is usually one less than the number of exposure frames in a DOL frame.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABD0550HA" class="Cell_Text">num_of_ignored_pixels†</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAAD0550HA" class="Cell_Text">Size of LI (line information) header for each row, in pixels. The line information helps differentiate VBP (Vertical Blank Period) rows and different exposure rows such as long exposure and short exposure. The VI (video input) module handles cropping for these lines.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABC0550HA" class="Cell_Text">num_of_left_margin_pixels†</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAAC0550HA" class="Cell_Text">Size of the left margin, before the active pixel area, in pixels. These lines are required for cropping alignment. The VI (video input) module handles cropping for them. </div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 97.65pt"><div id="wwpID0EABB0550HA" class="Cell_Text">num_of_right_margin_pixels†</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 302.85pt" colspan="3"><div id="wwpID0EAAB0550HA" class="Cell_Text">Size of the right margin, after the active pixel area, in pixels. These lines are required for cropping alignment. The VI (video input) module handles cropping for them.</div></td></tr><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 400.5pt" colspan="4"><div id="wwpID0EBAA0550HA" class="Cell_Text">* &nbsp;Alternative to <span class="Code_Char">pixel_t</span> when WDR PWL sensor is used.</div><div id="wwpID0EAAA0550HA" class="Cell_Text">†&nbsp; When WDR DOL sensor is used. See the diagram below.</div></td></tr></table></div><H4 id="wwpID0E0450HA" class="Heading_4">Property-Value Pairs (Version 2.0 Only)</H4><div id="wwpID0E0350HA" class="Body_Text">These properties are supported for version 2.0 sensor drivers only, and should not be used with version 1.0 drivers.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 97.65pt"><div id="wwpID0EABP0250HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 302.85pt"><div id="wwpID0EAAP0250HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABO0250HA" class="Cell_Text">gain_factor</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAO0250HA" class="Cell_Text">Multiplication factor for gain control to represent float values in fixed point.</div><div id="wwpID0EAAO0250HA" class="Cell_Text">Choose a gain factor which ensures that the range and delta of gain can be configured as required by the sensor driver.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABN0250HA" class="Cell_Text">default_gain</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAN0250HA" class="Cell_Text">Default gain value for gain control with the specified mode. </div><div id="wwpID0EBAN0250HA" class="Cell_Text"><span class="Code_Char">default_gain</span> is an integer value equal to the actual default gain scaled by <span class="Code_Char">gain_factor</span>:</div><div id="wwpID0EAAN0250HA" class="Cell_Text_Indent">default_gain = int(default gain in float * gain_factor)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABM0250HA" class="Cell_Text">step_gain_val</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAM0250HA" class="Cell_Text">Minimum delta value to which gain control can be adjusted.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABL0250HA" class="Cell_Text">exposure_factor</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAL0250HA" class="Cell_Text">Multiplication factor for exposure control to represent floating point values in fixed point.</div><div id="wwpID0EAAL0250HA" class="Cell_Text">Choose an <span class="Code_Char">exposure_factor</span> which ensures that the range and delta of exposure can be configured as required by the sensor driver.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABK0250HA" class="Cell_Text">default_exp_time</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAK0250HA" class="Cell_Text">Default exposure value to be used for exposure control with the specified mode.</div><div id="wwpID0EBAK0250HA" class="Cell_Text"><span class="Code_Char">default_exp_time</span> is an integer value equal to the default exposure time scaled by <span class="Code_Char">exposure_factor</span>:</div><div id="wwpID0EAAK0250HA" class="Cell_Text_Indent">default_exp_time = int(default exposure time in float * exposure_factor)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABJ0250HA" class="Cell_Text">step_exp_time</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAJ0250HA" class="Cell_Text">Minimum delta value to which the exposure control can be adjusted.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABI0250HA" class="Cell_Text">framerate_factor</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAI0250HA" class="Cell_Text">Multiplication factor for frame rate control to represent float values in fixed point.</div><div id="wwpID0EAAI0250HA" class="Cell_Text">Choose a framerate factor which ensures that the range and delta of frame rate can be configured as required by the sensor driver.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0250HA" class="Cell_Text">default_framerate</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAH0250HA" class="Cell_Text">Default framerate value for framerate control with the specified mode.</div><div id="wwpID0EBAH0250HA" class="Cell_Text"><span class="Code_Char">default_framerate</span> is an integer value equal to the actual default framerate scaled by <span class="Code_Char">framerate_factor</span>:</div><div id="wwpID0EAAH0250HA" class="Cell_Text_Indent">default_framerate = int(default framerate in float * framerate_factor)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0250HA" class="Cell_Text">step_framerate</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0250HA" class="Cell_Text">Minimum delta value to which the framerate control can be adjusted.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0250HA" class="Cell_Text">min_gain_val</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAF0250HA" class="Cell_Text">Minimum gain limit for the specified mode.</div><div id="wwpID0EBAF0250HA" class="Cell_Text">The value specified must be multiplied by <span class="Code_Char">gain_factor</span>.</div><div id="wwpID0EAAF0250HA" class="Cell_Text_Indent">min_gain_val = (minimum gain value in float) * gain_factor</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0250HA" class="Cell_Text">max_gain_val</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAE0250HA" class="Cell_Text">Maximum gain limit for the specified mode.</div><div id="wwpID0EBAE0250HA" class="Cell_Text">The value specified must be multiplied by <span class="Code_Char">gain_factor</span>.</div><div id="wwpID0EAAE0250HA" class="Cell_Text_Indent">max_gain_val = (maximum gain value in float) * gain_factor</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0250HA" class="Cell_Text">min_exp_time</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EEAD0250HA" class="Cell_Text">Minimum exposure time limit for the mode, in microseconds. The value is rounded up to an integer.</div><div id="wwpID0EDAD0250HA" class="Cell_Text">This value is calculated from:</div><div id="wwpID0ECAD0250HA" class="Cell_Text_Indent">minimum exposure time in float = (minimum coarse integration time) * line_length / pix_clk_hz * 1000000</div><div id="wwpID0EBAD0250HA" class="Cell_Text">The value specified must be multiplied by <span class="Code_Char">exposure_factor</span>.</div><div id="wwpID0EAAD0250HA" class="Cell_Text_Indent">min_exp_time = (minimum exposure time in float) * exposure_factor</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0250HA" class="Cell_Text">max_exp_time</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EEAC0250HA" class="Cell_Text">Maximum exposure time limit for the mode, in microseconds. The value is rounded up to an integer.</div><div id="wwpID0EDAC0250HA" class="Cell_Text">The value is calculated from:</div><div id="wwpID0ECAC0250HA" class="Cell_Text_Indent">maximum exposure time in float = (maximum coarse integration time) * line_length / pix_clk_hz * 1000000</div><div id="wwpID0EBAC0250HA" class="Cell_Text">The value specified must be multiplied by <span class="Code_Char">exposure_factor</span>.</div><div id="wwpID0EAAC0250HA" class="Cell_Text_Indent">max_exp_time = (maximum exposure time in float) * exposure_factor</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0250HA" class="Cell_Text">min_framerate</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EEAB0250HA" class="Cell_Text">Minimum frame rate limit for the mode, in frames/second (fps).</div><div id="wwpID0EDAB0250HA" class="Cell_Text">The value is calculated from:</div><div id="wwpID0ECAB0250HA" class="Cell_Text_Indent">minimum framerate in float = pix_clk_hz / (line_length * maximum frame length)</div><div id="wwpID0EBAB0250HA" class="Cell_Text">The value specified must be multiplied by <span class="Code_Char">framerate_factor</span>.</div><div id="wwpID0EAAB0250HA" class="Cell_Text_Indent">min_framerate = (minimum framerate in float) * framerate_factor</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0250HA" class="Cell_Text">max_framerate</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EEAA0250HA" class="Cell_Text">Maximum frame rate limit for the mode in fps. The value is rounded down to six decimal places.</div><div id="wwpID0EDAA0250HA" class="Cell_Text">The equation to calculate this value is:</div><div id="wwpID0ECAA0250HA" class="Cell_Text_Indent">maximum framerate in float = pix_clk_hz / (line_length * minimum frame length)</div><div id="wwpID0EBAA0250HA" class="Cell_Text">The value specified must be multiplied by <span class="Code_Char">framerate_factor</span>.</div><div id="wwpID0EAAA0250HA" class="Cell_Text_Indent">max_framerate = (maximum framerate in float) * framerate_factor</div></td></tr></table></div><H4 id="wwpID0E0150HA" class="Heading_4">Example Piece-wise Linear Compression Function</H4><div id="wwpID0E0Z50HA" class="Body_Text">This diagram shows an example of a piece-wise linear compression function.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0Y50HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image3_3.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><div id="wwpID0E0X50HA" class="Body_Text">In this example:</div><div id="wwpID0E0W50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Input signal has 16-bit depth</div><div id="wwpID0E0V50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Output signal has 12-bit depth</div><div id="wwpID0E0U50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">csi_pixel_bit_depth</span> = "12"</div><div id="wwpID0E0T50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">dynamic_pixel_bit_depth</span> = "16"</div><div id="wwpID0E0S50HA" class="Body_Text">The following table shows the control point properties.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 97.65pt"><div id="wwpID0EABJ0R50HA" class="Cell_Heading" style="text-align: center">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 58.5pt"><div id="wwpID0EAAJ0R50HA" class="Cell_Heading" style="text-align: center">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABI0R50HA" class="Cell_Text">num_control_point</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAI0R50HA" class="Cell_Text">4</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0R50HA" class="Cell_Text">control_point_x_0</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAH0R50HA" class="Cell_Text">0</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0R50HA" class="Cell_Text">control_point_x_1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0R50HA" class="Cell_Text">2048</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0R50HA" class="Cell_Text">control_point_x_2</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAF0R50HA" class="Cell_Text">16384</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0R50HA" class="Cell_Text">control_point_x_3</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE0R50HA" class="Cell_Text">65536</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0R50HA" class="Cell_Text">control_point_y_0</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0R50HA" class="Cell_Text">0</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0R50HA" class="Cell_Text">control_point_y_1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0R50HA" class="Cell_Text">2048</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0R50HA" class="Cell_Text">control_point_y_2</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0R50HA" class="Cell_Text">2944</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0R50HA" class="Cell_Text">control_point_y_3</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0R50HA" class="Cell_Text">3712</div></td></tr></table></div><H4 id="wwpID0E0Q50HA" class="Heading_4">Example Digital Overlap WDR Exposure Frame (3840×2160)</H4><div id="wwpID0E0P50HA" class="Body_Text">This diagram shows an example of a two-exposure DOL (Digital Overlap) multi-frame.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0O50HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image4_10.png" style="display: inline; left: 0pt; top: 0pt" alt="A screenshot of a cell phone Description generated with very high confidence" title="A screenshot of a cell phone Description generated with very high confidence" /></div></div><div id="wwpID0E0N50HA" class="Body_Text">The following table shows the values that apply to the diagram under <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0150HA" title="Sensor Software Driver Programming">Example Piece-wise Linear Compression Function</a></span> for a 4K digital overlap WDR frame.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 138.15pt"><div id="wwpID0EABI0M50HA" class="Cell_Heading" style="text-align: center">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 58.5pt"><div id="wwpID0EAAI0M50HA" class="Cell_Heading" style="text-align: center">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0M50HA" class="Cell_Text">active_w</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAH0M50HA" class="Cell_Text">3856</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0M50HA" class="Cell_Text">active_h</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0M50HA" class="Cell_Text">4436</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0M50HA" class="Cell_Text">num_of_exposure</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAF0M50HA" class="Cell_Text">2</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0M50HA" class="Cell_Text">num_of_ignored_lines</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE0M50HA" class="Cell_Text">14</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0M50HA" class="Cell_Text">num_of_lines_offset_0</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0M50HA" class="Cell_Text">50</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0M50HA" class="Cell_Text">num_of_ignored_pixels</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0M50HA" class="Cell_Text">4</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0M50HA" class="Cell_Text">num_of_left_margin_pixels</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0M50HA" class="Cell_Text">12</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0M50HA" class="Cell_Text">num_of_right_margin_pixels</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0M50HA" class="Cell_Text">0</div></td></tr></table></div><div id="wwpID0E0L50HA" class="Body_Text">Line Information (LI) header pixels help differentiate Vertical Blank Period (VBP) rows and different types of exposure rows. Thus there are three kinds of LI for the diagram above: VBP, long exposure, and short exposure. VPB rows are filtered out by the VI (video input) module based on LI.</div><div id="wwpID0E0K50HA" class="Body_Text">The property values are computed as follows:</div><div id="wwpID0E0J50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">active_w</span>: Total width of the pixel-active region. In this case, it is 3840 + 4 (LI) + 12 (left margin) + 0 (right margin) = 3856.</div><div id="wwpID0E0I50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">active_h</span>: Total height of the pixel-active region. In this case, it is 2160 + 8 (OB) + 6 (Ignored Area Effective Pixel + 50 (VBP)) * 2 = 4448.</div><div id="wwpID0E0H50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">num_of_exposure</span>: Number of exposures in each digital overlap capture. For the above example of 4K digital overlap WDR, this is 2 (two exposures).</div><div id="wwpID0E0G50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">num_of_ignored_lines</span>: Number of rows at the top of each exposure frame that are not included in the output frame. This includes OB rows and Ignored Area Effective Pixel rows, both of which use the same LI header as the exposure frame on which they reside. Hence, these rows are read by the VI module and are cropped out. For the example above, this value is 14 rows = 8 OB rows + 6 Ignored Area Effective Pixel rows.</div><div id="wwpID0E0F50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">num_of_lines_offset_0</span>: Number of VBP rows appearing in a single exposure and frame in a two-exposure DOL multi-frame. The same number of VBP rows appear at the end of a long exposure frame and at the start of a short exposure frame. For the example above, this value is 50 (50 rows at the end of a long exposure frame and 50 rows at the start of a short exposure frame).</div><div id="wwpID0E0E50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">num_of_ignored_pixels</span>: Number of LI pixels at the start of each line that distinguish between different exposure rows and VBP rows. For the example above, this value is 4 (four pixels).</div><div id="wwpID0E0D50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">num_of_left_margin_pixels</span>: Number of left margin pixels before the image data on each row. These pixels are required for cropping alignment. For the example above, this value is 12 (12 pixels).</div><div id="wwpID0E0C50HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">num_of_right_margin_pixels</span>: Number of right margin pixels after the image data on each row. These are required for cropping alignment. For the example above, this value is 0 (zero pixels).</div><H4 id="wwpID0E0B50HA" class="Heading_4">Port Binding</H4><div id="wwpID0E0A50HA" class="Body_Text">The following node definitions demonstrate the port binding for VI, NvCSI, and sensor modules.</div><div id="wwpID0E0640HA" class="Code">vi {</div><div id="wwpID0E0540HA" class="Code">    num-channels = &lt;1&gt;;</div><div id="wwpID0E0440HA" class="Code">    ports {</div><div id="wwpID0E0340HA" class="Code">        #address-cells = &lt;1&gt;;</div><div id="wwpID0E0240HA" class="Code">        #size-cells = &lt;0&gt;;</div><div id="wwpID0E0140HA" class="Code">        port@0 {</div><div id="wwpID0E0Z40HA" class="Code">            reg = &lt;0&gt;;</div><div id="wwpID0E0Y40HA" class="Code">            liimx185_vi_in0: endpoint {</div><div id="wwpID0E0X40HA" class="Code">                port-index = &lt;2&gt;;</div><div id="wwpID0E0W40HA" class="Code">                bus-width = &lt;4&gt;;</div><div id="wwpID0E0V40HA" class="Code">                remote-endpoint = &lt;&amp;liimx185_csi_out0&gt;;</div><div id="wwpID0E0U40HA" class="Code">            };</div><div id="wwpID0E0T40HA" class="Code">        };</div><div id="wwpID0E0S40HA" class="Code">    };</div><div id="wwpID0E0R40HA" class="Code">};</div><div id="wwpID0E0Q40HA" class="Code">&nbsp;</div><div id="wwpID0E0P40HA" class="Code">nvcsi {</div><div id="wwpID0E0O40HA" class="Code">    num-channels = &lt;1&gt;;</div><div id="wwpID0E0N40HA" class="Code">    #address-cells = &lt;1&gt;;</div><div id="wwpID0E0M40HA" class="Code">    #size-cells = &lt;0&gt;;</div><div id="wwpID0E0L40HA" class="Code">    channel@0 {</div><div id="wwpID0E0K40HA" class="Code">        reg = &lt;0&gt;;</div><div id="wwpID0E0J40HA" class="Code">        ports {</div><div id="wwpID0E0I40HA" class="Code">            #address-cells = &lt;1&gt;;</div><div id="wwpID0E0H40HA" class="Code">            #size-cells = &lt;0&gt;;</div><div id="wwpID0E0G40HA" class="Code">            port@0 {</div><div id="wwpID0E0F40HA" class="Code">                reg = &lt;0&gt;;</div><div id="wwpID0E0E40HA" class="Code">                liimx185_csi_in0: endpoint@0 {</div><div id="wwpID0E0D40HA" class="Code">                    port-index = &lt;0&gt;;</div><div id="wwpID0E0C40HA" class="Code">                    bus-width = &lt;4&gt;;</div><div id="wwpID0E0B40HA" class="Code">                    remote-endpoint = &lt;&amp;liimx185_imx185_out0&gt;;</div><div id="wwpID0E0A40HA" class="Code">                };</div><div id="wwpID0E0630HA" class="Code">            };</div><div id="wwpID0E0530HA" class="Code">            port@1 {</div><div id="wwpID0E0430HA" class="Code">                reg = &lt;1&gt;;</div><div id="wwpID0E0330HA" class="Code">                liimx185_csi_out0: endpoint@1 {</div><div id="wwpID0E0230HA" class="Code">                    remote-endpoint = &lt;&amp;liimx185_vi_in0&gt;;</div><div id="wwpID0E0130HA" class="Code">                };</div><div id="wwpID0E0Z30HA" class="Code">            };</div><div id="wwpID0E0Y30HA" class="Code">        };</div><div id="wwpID0E0X30HA" class="Code">    };</div><div id="wwpID0E0W30HA" class="Code">};</div><div id="wwpID0E0V30HA" class="Body_Text">The following table shows the port binding properties.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 97.65pt"><div id="wwpID0EABE0U30HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 302.85pt"><div id="wwpID0EAAE0U30HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0U30HA" class="Cell_Text">port</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0U30HA" class="Cell_Text">Specifies the media pad port connection. All imager devices have one media pad for binding the connection with VI.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0U30HA" class="Cell_Text">port-index</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAC0U30HA" class="Cell_Text">Defines the sensor port connection. This field is not required for imager devices, such as a focuser or flash.</div><div id="wwpID0EAAC0U30HA" class="Cell_Text">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Port Index</a></span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0U30HA" class="Cell_Text">bus-width</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0U30HA" class="Cell_Text">Number of CSI lanes connected to sensor; determines the bus width.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0U30HA" class="Cell_Text">remote-endpoint</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0U30HA" class="Cell_Text">Label for binding two ports. The binding expects one port to be for the sink and the other one for the source.</div></td></tr></table></div><H4 id="wwpID0E0T30HA" class="Heading_4">To verify the port binding result</H4><div id="wwpID0E0S30HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Enter the command:</div><div id="wwpID0E0R30HA" class="Code_Indent">sudo media-ctl -p -d /dev/media0</div><div id="wwpID0E0Q30HA" class="Body_Text">The output returned is similar to this:</div><div id="wwpID0E0P30HA" class="Code">Media controller API version 0.1.0</div><div id="wwpID0E0O30HA" class="Code">&nbsp;</div><div id="wwpID0E0N30HA" class="Code">Media device information</div><div id="wwpID0E0M30HA" class="Code">------------------------</div><div id="wwpID0E0L30HA" class="Code">driver          tegra-vi4</div><div id="wwpID0E0K30HA" class="Code">model           NVIDIA Tegra Video Input Device</div><div id="wwpID0E0J30HA" class="Code">serial</div><div id="wwpID0E0I30HA" class="Code">bus info</div><div id="wwpID0E0H30HA" class="Code">hw revision     0x3</div><div id="wwpID0E0G30HA" class="Code">driver version  0.0.0</div><div id="wwpID0E0F30HA" class="Code">&nbsp;</div><div id="wwpID0E0E30HA" class="Code">Device topology</div><div id="wwpID0E0D30HA" class="Code">- entity 1: 15a00000.nvcsi--1 (2 pads, 2 links)</div><div id="wwpID0E0C30HA" class="Code">            type V4L2 subdev subtype Unknown flags 0</div><div id="wwpID0E0B30HA" class="Code">            device node name /dev/v4l-subdev0</div><div id="wwpID0E0A30HA" class="Code">      pad0: Sink</div><div id="wwpID0E0620HA" class="Code">            &lt;- "imx185 30-001a":0 [ENABLED]</div><div id="wwpID0E0520HA" class="Code">      pad1: Source</div><div id="wwpID0E0420HA" class="Code">            -&gt; "vi-output, imx185 30-001a":0 [ENABLED]</div><div id="wwpID0E0320HA" class="Code">&nbsp;</div><div id="wwpID0E0220HA" class="Code">- entity 4: imx185 30-001a (1 pad, 1 link)</div><div id="wwpID0E0120HA" class="Code">            type V4L2 subdev subtype Sensor flags 0</div><div id="wwpID0E0Z20HA" class="Code">      pad0: Source</div><div id="wwpID0E0Y20HA" class="Code">            -&gt; "15a00000.nvcsi--1":0 [ENABLED]</div><div id="wwpID0E0X20HA" class="Code">&nbsp;</div><div id="wwpID0E0W20HA" class="Code">- entity 6: vi-output, imx185 30-001a (1 pad, 1 link)</div><div id="wwpID0E0V20HA" class="Code">            type Node subtype V4L flags 0</div><div id="wwpID0E0U20HA" class="Code">      pad0: Sink</div><div id="wwpID0E0T20HA" class="Code">            &lt;- "15A00000.nvcsi--1":1 [ENABLED]</div><H4 id="wwpID0E0S20HA" class="Heading_4">Sensor Pixel Clock</H4><div id="wwpID0E0R20HA" class="Body_Text">The camera software uses the sensor pixel clock to calculate the exposure and frame rate of the sensor. It must be set correctly to avoid potential issues.</div><div id="wwpID0E0Q20HA" class="Body_Text">Depending on the information provided by the sensor vendors, there are several ways to obtain the correct sensor pixel clock rate:</div><div id="wwpID0E0P20HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Using PLL multiplier and PLL pre/post dividers:</div><div id="wwpID0E0O20HA" class="List_Continue">MCLK Multiplier =  PLL Multiplier / PLL Pre-divider / PLL Post-divider</div><div id="wwpID0E0N20HA" class="List_Continue">pixel_clk_hz = MCLK * MCLK Multiplier</div><div id="wwpID0E0M20HA" class="List_Continue">For example:</div><div id="wwpID0E0L20HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-family: &quot;Trebuchet MS&quot;; font-size: 8pt; font-style: normal; font-weight: normal">●	</span></span>MCLK = 24MHz</div><div id="wwpID0E0K20HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-family: &quot;Trebuchet MS&quot;; font-size: 8pt; font-style: normal; font-weight: normal">●	</span></span>PLL Multiplier = 30</div><div id="wwpID0E0J20HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-family: &quot;Trebuchet MS&quot;; font-size: 8pt; font-style: normal; font-weight: normal">●	</span></span>PLL Pre-divider = 3</div><div id="wwpID0E0I20HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-family: &quot;Trebuchet MS&quot;; font-size: 8pt; font-style: normal; font-weight: normal">●	</span></span>PLL Post-divider = 3</div><div id="wwpID0E0H20HA" class="List_Continue">MCLK Multiplier = 30 / 3 / 3 = 6.67<br />Pixel_clk_hz = 24000000 * 6.67 = 160000000</div><div id="wwpID0E0G20HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Using sensor CSI lane output rate:</div><div id="wwpID0E0F20HA" class="List_Continue">pixel_clk_hz = sensor data rate per lane (Mbps) * number of lanes / bits per pixel</div><div id="wwpID0E0E20HA" class="List_Continue">For example:</div><div id="wwpID0E0D20HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-family: &quot;Trebuchet MS&quot;; font-size: 8pt; font-style: normal; font-weight: normal">●	</span></span>Sensor data rate = 891 Mbps (per lane)</div><div id="wwpID0E0C20HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-family: &quot;Trebuchet MS&quot;; font-size: 8pt; font-style: normal; font-weight: normal">●	</span></span>Number of lanes = 4</div><div id="wwpID0E0B20HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-family: &quot;Trebuchet MS&quot;; font-size: 8pt; font-style: normal; font-weight: normal">●	</span></span>Bits per pixel = 10</div><div id="wwpID0E0A20HA" class="List_Continue">pixel_clk_hz = 891 Mbps * 4 / 10 = 356400000</div><div id="wwpID0E0610HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Using frame size and frame rate</div><div id="wwpID0E0510HA" class="List_Continue">pixel_clk_hz = sensor output size * frame rate</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0410HA" class="Note_Heading">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 351pt"><div id="wwpID0EEAA0410HA" class="Note_Text">The sensor output size is not the final output size. It is the total number of pixels the sensor used to generate the final output size.</div><div id="wwpID0EDAA0410HA" class="Note_Text">For example:</div><div id="wwpID0ECAA0410HA" class="Note_Text" style="text-indent: 0pt">Sensor output size = 2200 * 1125<br />	(actual output size 1920 * 1080)</div><div id="wwpID0EBAA0410HA" class="Note_Text">Frame rate = 30 FPS</div><div id="wwpID0EAAA0410HA" class="Note_Text" style="margin-top: 9pt">pixel_clk_hz = 2200 * 1125 * 30 = 74250000</div></td></tr></table></div><H4 id="wwpID0E0310HA" class="Heading_4">SerDes Pixel Clock</H4><div id="wwpID0E0210HA" class="Body_Text">For sensor modules that use serializer/deserializer chips (GMSL or FPD link), the frames received by the SoC are output from SerDes, not from the sensors. Therefore, the SerDes pixel clock must be specified correctly to configure the SoC-camera interface correctly and avoid buffer overrun issues.</div><div id="wwpID0E0110HA" class="Body_Text">The SerDes pixel clock must be set based on the use case (on the number of cameras connected to SerDes). If you are not sure which use case to adopt, set it to the SerDes maximum output rate.</div><H4 id="wwpID0E0Z10HA" class="Heading_4">Port Index</H4><div id="wwpID0E0Y10HA" class="Body_Text">Port index is used to specify the connection between two different modules. For the VI module, the port index represents the input stream. For the CSI module, it represents the actual CSI port to which the camera is connected.</div><div id="wwpID0E0X10HA" class="Body_Text">The following diagrams show the port index mapping for different Jetson platforms.</div><div id="wwpID0E0W10HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>For NVIDIA<span style="vertical-align: super">®</span> Jetson Nano™ series,<span style="vertical-align: super"> </span>Jetson™ TX2 series, and Jetson TX1:<span style="vertical-align: super">:</span></div><div class="ww_skin_page_overflow"><div id="wwpID0E0V10HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image5_8.png" style="display: inline; left: 0pt; top: 0pt" alt="http://sw-mobile-docs/DRAFT/L4T_32/Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image5_3.png" title="http://sw-mobile-docs/DRAFT/L4T_32/Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image5_3.png" /></div></div><div id="wwpID0E0U10HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>NVIDIA<span style="vertical-align: super">®</span> Jetson AGX Xavier™ series:</div><div class="ww_skin_page_overflow"><div id="wwpID0E0T10HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image6_6.png" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><H3 id="wwpID0E0S10HA" class="Heading_3">V4L2 Kernel Driver (Version 1.0)</H3><div id="wwpID0E0R10HA" class="Body_Text">This topic is based on the Video for Linux 2 (V4L2) driver for the Sony IMX185 sensor (<span class="Code_Char">imx185_v1.c</span>) at:</div><div id="wwpID0E0Q10HA" class="Code">&lt;top&gt;/kernel/nvidia/drivers/media/i2c/imx185_1.c</div><div id="wwpID0E0P10HA" class="Body_Text">Examine this source file to obtain a complete understanding of the driver.</div><div id="wwpID0E0O10HA" class="Body_Text">For information on the V4L2 implementation, consult:</div><div id="wwpID0E0N10HA" class="Code"><span class="Hyperlink"><a href="https://linuxtv.org/downloads/v4l-dvb-apis/" target="external_window">https://linuxtv.org/downloads/v4l-dvb-apis/</a></span></div><H4 id="wwpID0E0M10HA" class="Heading_4">Macro Definitions</H4><div id="wwpID0E0L10HA" class="Body_Text">Sensor-specific macro values include:</div><div id="wwpID0E0K10HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>The minimum and maximum values for each control</div><div id="wwpID0E0J10HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>The default value for each control</div><div id="wwpID0E0I10HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>The macro values required for sensor timing or general functionality</div><H4 id="wwpID0E0H10HA" class="Heading_4">Sensor-Private Data</H4><div id="wwpID0E0G10HA" class="Body_Text">The structure contains the private data specific to the sensor:</div><div id="wwpID0E0F10HA" class="Code">struct imx185 {</div><div id="wwpID0E0E10HA" class="Code">    struct camera_common_power_rail power;</div><div id="wwpID0E0D10HA" class="Code">    int                             numctrls;</div><div id="wwpID0E0C10HA" class="Code">    struct v4l2_ctrl_handler        ctrl_handler;</div><div id="wwpID0E0B10HA" class="Code">    struct i2c_client              *i2c_client;</div><div id="wwpID0E0A10HA" class="Code">    struct v4l2_subdev             *subdev;</div><div id="wwpID0E06Z0HA" class="Code">    struct media_pad                pad;</div><div id="wwpID0E05Z0HA" class="Code">    u32                             frame_length;</div><div id="wwpID0E04Z0HA" class="Code">    s32                             group_hold_prev;</div><div id="wwpID0E03Z0HA" class="Code">    bool                            group_hold_en;</div><div id="wwpID0E02Z0HA" class="Code">    s64                             last_wdr_et_val;</div><div id="wwpID0E01Z0HA" class="Code">    struct regmap                  *regmap;</div><div id="wwpID0E0ZZ0HA" class="Code">    struct camera_common_data      *s_data;</div><div id="wwpID0E0YZ0HA" class="Code">    struct camera_common_pdata     *pdata;</div><div id="wwpID0E0XZ0HA" class="Code">    struct v4l2_ctrl               *ctrls[];</div><div id="wwpID0E0WZ0HA" class="Code">};</div><div id="wwpID0E0VZ0HA" class="Body_Text">The following table describes the sensor properties.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 97.65pt"><div id="wwpID0EABN0UZ0HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 302.85pt"><div id="wwpID0EAAN0UZ0HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABM0UZ0HA" class="Cell_Text">power</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAM0UZ0HA" class="Cell_Text">Generic power controls, including regulators, clocks, and GPIOs.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABL0UZ0HA" class="Cell_Text">numctrls</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAL0UZ0HA" class="Cell_Text">Number of V4L2 controls for the sensor.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABK0UZ0HA" class="Cell_Text">ctrl_handler</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAK0UZ0HA" class="Cell_Text">Holds the V4L2 handler for controls, needed for V4L2 control initialization.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABJ0UZ0HA" class="Cell_Text">i2c_client</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAJ0UZ0HA" class="Cell_Text">Holds a handle to <span class="Code_Char">i2c_client</span>, used to access the sensor’s I2C client instance.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABI0UZ0HA" class="Cell_Text">subdev</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAI0UZ0HA" class="Cell_Text">Holds a handle for the V4L2 subdevice; used to run subdev operations (ops).</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0UZ0HA" class="Cell_Text">pad</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAH0UZ0HA" class="Cell_Text">Holds a media pad used to initialize the media controller for a device to work as a sink pad or source pad.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0UZ0HA" class="Cell_Text">group_hold_prev</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0UZ0HA" class="Cell_Text">Holds the previous state. Used by the group hold control handler to check for change of state.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0UZ0HA" class="Cell_Text">group_hold_en</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAF0UZ0HA" class="Cell_Text">Holds a group hold enable flag directly related to group hold control.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0UZ0HA" class="Cell_Text">frame_length</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE0UZ0HA" class="Cell_Text">Holds the previous value of <span class="Code_Char">frame_length</span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0UZ0HA" class="Cell_Text">reg_map</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0UZ0HA" class="Cell_Text">Holds a register map setup for I2C read and write.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0UZ0HA" class="Cell_Text">s_data</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAC0UZ0HA" class="Cell_Text">Holds a handle to common data. For more information, see <span class="Code_Char">struct</span></div><div id="wwpID0EAAC0UZ0HA" class="Cell_Text"><span class="Code_Char">camera_common_data</span> in the file <span class="Code_Char">camera_common.h</span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0UZ0HA" class="Cell_Text">pdata</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0UZ0HA" class="Cell_Text">Holds a handle to common platform data, populated by reading the device tree.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0UZ0HA" class="Cell_Text">ctrls</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0UZ0HA" class="Cell_Text">Holds handles to initialized V4L2 controls and dynamic array. Must be the last property specified.</div></td></tr></table></div><H4 id="wwpID0E0TZ0HA" class="Heading_4">Configuring Regmap</H4><div id="wwpID0E0SZ0HA" class="Body_Text">You must update the <span class="Code_Char">sensor_regmap_config</span> structure with appropriate values of <span class="Code_Char">reg_bits</span> and <span class="Code_Char">val_bits</span> to describe the sensor’s I2C interface: The following table shows the members of the structure.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 97.65pt"><div id="wwpID0EABC0RZ0HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 302.85pt"><div id="wwpID0EAAC0RZ0HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0RZ0HA" class="Cell_Text">reg_bits</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0RZ0HA" class="Cell_Text">Size of the register address, in bits.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0RZ0HA" class="Cell_Text">val_bits</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0RZ0HA" class="Cell_Text">Size of the register value, in bits.</div></td></tr></table></div><div id="wwpID0E0QZ0HA" class="Body_Text">A definition of <span class="Code_Char">sensor_regmap_config</span> looks like this:</div><div id="wwpID0E0PZ0HA" class="Code">struct regmap_config sensor_regmap_config {</div><div id="wwpID0E0OZ0HA" class="Code">    reg_bits = 16;</div><div id="wwpID0E0NZ0HA" class="Code">    val_bits = 8;</div><div id="wwpID0E0MZ0HA" class="Code">};</div><div id="wwpID0E0LZ0HA" class="Body_Text">Check the vendor’s register programming table for your sensor to determine the values for the structure’s members.</div><H4 id="wwpID0E0KZ0HA" class="Heading_4">Configuring Controls</H4><div id="wwpID0E0JZ0HA" class="Body_Text">The controls must be linked to their control handlers.</div><div id="wwpID0E0IZ0HA" class="Heading_5">To link the controls to their control handlers</div><div id="wwpID0E0HZ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Define a static <span class="Code_Char">v4l2_ctrl_ops</span> structure. Initialize structure members as follows:</div><div id="wwpID0E0GZ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-family: &quot;Trebuchet MS&quot;; font-size: 8pt; font-style: normal; font-weight: normal">●	</span></span>Point <span class="Code_Char">g_volatile_ctrl</span> to the sensor’s internal Get Volatile Control handler.</div><div id="wwpID0E0FZ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-family: &quot;Trebuchet MS&quot;; font-size: 8pt; font-style: normal; font-weight: normal">●	</span></span>Point <span class="Code_Char">s_ctrl</span> to the sensor’s internal set control handler.</div><div id="wwpID0E0EZ0HA" class="Body_Text">A definition of the <span class="Code_Char">v4l2_ctrl_ops</span> structure looks like this:</div><div id="wwpID0E0DZ0HA" class="Code">static const struct v4l2_ctrl_ops imx185_ctrl_ops = {</div><div id="wwpID0E0CZ0HA" class="Code">    .g_volatile_ctrl = imx185_g_volatile_ctrl,</div><div id="wwpID0E0BZ0HA" class="Code">    .s_ctrl = imx185_s_ctrl,</div><div id="wwpID0E0AZ0HA" class="Code">};</div><div id="wwpID0E06Y0HA" class="Body_Text">The following example code lists the controls and their initialized values. The initial <span class="Code_Char">ctrls_init()</span> call loops through this list to initialize each of the controls. Each control is then accessible through the ctrls handler in the private data. The set of controls defined here for IMX185 are the standard ones used by the user-mode library.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA05Y0HA" class="Note_Heading">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 351pt"><div id="wwpID0EAAA05Y0HA" class="Note_Text" style="margin-top: 9pt">To implement additional controls you must change the camera core library.</div></td></tr></table></div><div id="wwpID0E04Y0HA" class="Body_Text">Three types of controls, <span class="Code_Char">integer</span>, <span class="Code_Char">menu</span>, and <span class="Code_Char">string</span>, are defined for the IMX185 sensor, as shown in the following example code.</div><div id="wwpID0E03Y0HA" class="Code">static struct v4l2_ctrl_config ctrl_config_list[] = {</div><div id="wwpID0E02Y0HA" class="Code">    /* Integer Control: setting integer values such as gain, coarse</div><div id="wwpID0E01Y0HA" class="Code">     time, and frame length. */</div><div id="wwpID0E0ZY0HA" class="Code">    {</div><div id="wwpID0E0YY0HA" class="Code">        .ops = &amp;imx185_ctrl_ops,    // Pointer to control ops function.</div><div id="wwpID0E0XY0HA" class="Code">        .id = TEGRA_CAMERA_CID_GAIN,// id, defined in camera_common.h.</div><div id="wwpID0E0WY0HA" class="Code">        .name = "Gain",             // String name of control.</div><div id="wwpID0E0VY0HA" class="Code">        .type = V4L2_CTRL_TYPE_INTEGER, // Type of control.</div><div id="wwpID0E0UY0HA" class="Code">        .flags = V4L2_CTRL_FLAG_SLIDER, // Control flags.</div><div id="wwpID0E0TY0HA" class="Code">&nbsp;</div><div id="wwpID0E0SY0HA" class="Code">        /* The following values define the scaling factor, and are</div><div id="wwpID0E0RY0HA" class="Code">         the values most likely to change. */</div><div id="wwpID0E0QY0HA" class="Code">        .min = 0 * FIXED POINT SCALING FACTOR,  // Lower bound.</div><div id="wwpID0E0PY0HA" class="Code">        .max = 48 * FIXED POINT SCALING FACTOR, // Upper bound.</div><div id="wwpID0E0OY0HA" class="Code">        .def = 0 * FIXED POINT SCALING FACTOR,  // Default.</div><div id="wwpID0E0NY0HA" class="Code">        .step = 3 * FIXED POINT SCALING FACTOR, / 10,</div><div id="wwpID0E0MY0HA" class="Code">                                                // Increment step size.</div><div id="wwpID0E0LY0HA" class="Code">    },</div><div id="wwpID0E0KY0HA" class="Code">&nbsp;</div><div id="wwpID0E0JY0HA" class="Code">    /* Menu Control: used as on/off switch for group hold and HDR.</div><div id="wwpID0E0IY0HA" class="Code">     * switch_ctrl_qmenu is used to define the states on/off. You do</div><div id="wwpID0E0HY0HA" class="Code">     * not need to change these controls unless you add a completely </div><div id="wwpID0E0GY0HA" class="Code">     * new one.</div><div id="wwpID0E0FY0HA" class="Code">     *</div><div id="wwpID0E0EY0HA" class="Code">     * enum switch_state {</div><div id="wwpID0E0DY0HA" class="Code">     *  	SWITCH_OFF,</div><div id="wwpID0E0CY0HA" class="Code">     *  	SWITCH_ON,</div><div id="wwpID0E0BY0HA" class="Code">     * };</div><div id="wwpID0E0AY0HA" class="Code">     *</div><div id="wwpID0E06X0HA" class="Code">     * static const s64 switch_ctrl_qmenu[] = {</div><div id="wwpID0E05X0HA" class="Code">     *     SWITCH OFF, SWITCH ON</div><div id="wwpID0E04X0HA" class="Code">     * };</div><div id="wwpID0E03X0HA" class="Code">     */</div><div id="wwpID0E02X0HA" class="Code">    {</div><div id="wwpID0E01X0HA" class="Code">        .ops = &amp;imx185_ctrl_ops,</div><div id="wwpID0E0ZX0HA" class="Code">        .id = TEGRA_CAMERA_CID_GROUP_HOLD,</div><div id="wwpID0E0YX0HA" class="Code">        .name = "Group Hold",</div><div id="wwpID0E0XX0HA" class="Code">        .type = V4L2_CTRL_TYPE_INTEGER_MENU,</div><div id="wwpID0E0WX0HA" class="Code">        .min = 0,</div><div id="wwpID0E0VX0HA" class="Code">        .max = ARRAY_SIZE(switch_ctrl_qmenu) - 1,</div><div id="wwpID0E0UX0HA" class="Code">        .menu_skip_mask = 0,</div><div id="wwpID0E0TX0HA" class="Code">        .def = 0,</div><div id="wwpID0E0SX0HA" class="Code">        .qmenu_int = switch_ctrl_qmenu,</div><div id="wwpID0E0RX0HA" class="Code">    },</div><div id="wwpID0E0QX0HA" class="Code">&nbsp;</div><div id="wwpID0E0PX0HA" class="Code">    /* String Control: used to get static sensor information like</div><div id="wwpID0E0OX0HA" class="Code">     * EEPROM content or Fuse ID.</div><div id="wwpID0E0NX0HA" class="Code">     */</div><div id="wwpID0E0MX0HA" class="Code">    {</div><div id="wwpID0E0LX0HA" class="Code">	  .ops = &amp;imx185_ctrl_ops,</div><div id="wwpID0E0KX0HA" class="Code">	  .id = TEGRA_CAMERA_CID_FUSE_ID,</div><div id="wwpID0E0JX0HA" class="Code">	  .name = "Fuse ID",</div><div id="wwpID0E0IX0HA" class="Code">	  .type = V4L2_CTRL_TYPE_STRING,</div><div id="wwpID0E0HX0HA" class="Code">	  .flags = V4L2_CTRL_FLAG_READ_ONLY,</div><div id="wwpID0E0GX0HA" class="Code">	  .min = 0,</div><div id="wwpID0E0FX0HA" class="Code">	  .max = IMX185_FUSE_ID_STR_SIZE,</div><div id="wwpID0E0EX0HA" class="Code">	  .step = 2,</div><div id="wwpID0E0DX0HA" class="Code">    },</div><div id="wwpID0E0CX0HA" class="Code">};</div><H4 id="wwpID0E0BX0HA" class="Heading_4">Setting Up Control Registers</H4><div id="wwpID0E0AX0HA" class="Body_Text">You can use the helper functions below to update sensor registers based on the control types. Each function takes two input parameters, an array of register address/value pairs and a control value.</div><div id="wwpID0E06W0HA" class="Body_Text">When the control handlers call each function, it updates the address/value pairs specified in the array based on the control types. The array of address/values pairs are used to program the sensor using the register write wrapper functions.</div><div id="wwpID0E05W0HA" class="Code">imx185_get_frame_length_regs()</div><div id="wwpID0E04W0HA" class="Code">imx185_get_coarse_time_regs_shs1()</div><div id="wwpID0E03W0HA" class="Code">imx185_get_coarse_time_regs_shs2()</div><div id="wwpID0E02W0HA" class="Code">imx185_get_gain_reg()</div><H4 id="wwpID0E01W0HA" class="Heading_4">Read-Write Wrapper in the Register</H4><div id="wwpID0E0ZW0HA" class="Body_Text">The following functions are wrappers for reading and writing sensor registers. You can use them to read or write a single register, or to write a table of registers.</div><div id="wwpID0E0YW0HA" class="Body_Text">For IMX185, the functions use the <span class="Code_Char">regmap</span> I2C interface. You must modify them if your sensor uses some other interface (e.g. SPI).</div><div id="wwpID0E0XW0HA" class="Code">imx185_read_reg()</div><div id="wwpID0E0WW0HA" class="Code">imx185_write_reg()</div><div id="wwpID0E0VW0HA" class="Code">imx185_write_table()</div><H4 id="wwpID0E0UW0HA" class="Heading_4">Power Functions</H4><div id="wwpID0E0TW0HA" class="Body_Text">The following table describes the functions for power-related controls.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 108pt"><div id="wwpID0EABE0SW0HA" class="Cell_Heading">Function</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 292.5pt"><div id="wwpID0EAAE0SW0HA" class="Cell_Heading">Description</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0SW0HA" class="Cell_Text">imx185_power_on()</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAD0SW0HA" class="Cell_Text">Implements the sensor power-on sequence. Modify this function according to the sensor specification sheets.</div><div id="wwpID0EAAD0SW0HA" class="Cell_Text">The function uses <span class="Code_Char">regulator_enable()</span> to turn on regulators, and <span class="Code_Char">gpio_set_value()</span> to toggle the GPIO pins.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0SW0HA" class="Cell_Text">imx185_power_off()</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAC0SW0HA" class="Cell_Text">Implements the sensor power-off sequence. Modify this function according to the sensor specification sheets.</div><div id="wwpID0EAAC0SW0HA" class="Cell_Text">The function uses <span class="Code_Char">regulator_enable()</span> to turn on regulators, and <span class="Code_Char">gpio_set_value()</span> to toggle the GPIO pins.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0SW0HA" class="Cell_Text">imx185_power_put()</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAB0SW0HA" class="Cell_Text">Releases all resources used by the sensor.</div><div id="wwpID0EAAB0SW0HA" class="Cell_Text">The function uses <span class="Code_Char">regulator_put()</span> to release resources for all regulators.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0SW0HA" class="Cell_Text">imx185_power_get()</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAA0SW0HA" class="Cell_Text">Acquires resources used by the sensor.</div><div id="wwpID0EAAA0SW0HA" class="Cell_Text">The function uses the <span class="Code_Char">camera_common_regulator_get()</span> helper function or <span class="Code_Char">regulator_get()</span> to acquire all regulators.</div></td></tr></table></div><div id="wwpID0E0RW0HA" class="Body_Text">The driver must call <span class="Code_Char">imx185_power_get()</span>first to acquire all regulators prior to calling <span class="Code_Char">imx185_power_on()</span> and <span class="Code_Char">imx185_power_off()</span>.</div><div id="wwpID0E0QW0HA" class="Body_Text">Additionally, the driver must call <span class="Code_Char">imx185_power_put()</span>to release all regulators when the driver is being released.</div><H4 id="wwpID0E0PW0HA" class="Heading_4">Setting Up the V4L2 Subdevice and Camera Common</H4><div id="wwpID0E0OW0HA" class="Body_Text">The <span class="Code_Char">imx185_s_stream()</span> function enables and disables sensor streaming. It programs sensor registers using the mode tables in the file <span class="Code_Char">imx185_mode_tbls.h</span> file.</div><div id="wwpID0E0NW0HA" class="Body_Text">Instead of using the default settings in mode tables, you can also override some of the settings in this function by providing updated values. The code below shows how to override gain, exposure and frame rate values immediately after the mode tables are programmed to sensor.</div><div id="wwpID0E0MW0HA" class="Code">Control[0].id = TEGRA_CAMERA_CID_GAIN;</div><div id="wwpID0E0LW0HA" class="Code">Control[1].id = TEGRA_CAMERA _CID_FRAME_RATE;</div><div id="wwpID0E0KW0HA" class="Code">Control[2].id = TEGRA_CAMERA _CID_EXPOSURE;</div><div id="wwpID0E0JW0HA" class="Code">err = v4l2_g_ext_ctrls(&amp;priv-&gt;ctrl_handler, &amp;cotrl);</div><div id="wwpID0E0IW0HA" class="Code">err |= imx185_set_gain(priv, control[0].value64);</div><div id="wwpID0E0HW0HA" class="Code">. . .</div><div id="wwpID0E0GW0HA" class="Body_Text">If the sensor supports a sensor test pattern, you can enable it in this function by selecting the proper test pattern mode tables.</div><div id="wwpID0E0FW0HA" class="Body_Text"><span class="Strong">Camera Common</span> is a set of kernel functions that are used by the camera drivers in the NVIDIA kernel and by V4L2 drivers. Camera Common sets up most of the V4L2 framework. You communicate with it through <span class="Code_Char">camera_common_sensor_ops</span> and <span class="Code_Char">camera_common_data</span> structures, which you must define in your driver.</div><div id="wwpID0E0EW0HA" class="Body_Text">For details on modifying and adding new modes, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Mode Tables</a></span>.</div><div id="wwpID0E0DW0HA" class="Body_Text">The following code snippets set up the V4L2 subdevices and Camera Common for registering the sensor driver with the V4L2 framework.</div><div id="wwpID0E0CW0HA" class="Body_Text">The <span class="Code_Char">s_stream</span> pointer in the following declaration (highlighted below) must point to the sensor’s implementation of the <span class="Code_Char">s_stream()</span> function; you can leave the other pointers as they are.</div><div id="wwpID0E0BW0HA" class="Code">static struct v4l2_subdev_video_ops imx185_subdev_video_ops = {</div><div id="wwpID0E0AW0HA" class="Code">    .s_stream = <span style="background-color: yellow">imx185_s_stream</span>,</div><div id="wwpID0E06V0HA" class="Code">    ...</div><div id="wwpID0E05V0HA" class="Code">};</div><div id="wwpID0E04V0HA" class="Body_Text">You do not need to modify this declaration:</div><div id="wwpID0E03V0HA" class="Code">static struct v4l2_subdev_core_ops imx185_subdev_core_ops = {</div><div id="wwpID0E02V0HA" class="Code">    ...</div><div id="wwpID0E01V0HA" class="Code">};</div><div id="wwpID0E0ZV0HA" class="Body_Text">In the following declaration, initialize the core and video members with references to the two corresponding structures (highlighted below).</div><div id="wwpID0E0YV0HA" class="Code">static struct v4l2_subdev_ops imx185_subdev_ops = {</div><div id="wwpID0E0XV0HA" class="Code">    .core = <span style="background-color: yellow">&amp;imx185_subdev_core_ops</span>,</div><div id="wwpID0E0WV0HA" class="Code">    .video = <span style="background-color: yellow">&amp;imx185_subdev_video_ops</span>,</div><div id="wwpID0E0VV0HA" class="Code">};</div><div id="wwpID0E0UV0HA" class="Body_Text">The <span class="Code_Char">compatible</span> member of the <span class="Code_Char">of_device_id </span>structure (highlighted below) must match what is specified in sensor’s device tree node. The Linux kernel uses this member to identify and bind the driver to the sensor.</div><div id="wwpID0E0TV0HA" class="Code">static struct of_device_id imx185_of_match[] = {</div><div id="wwpID0E0SV0HA" class="Code">    { .compatible = <span style="background-color: yellow">"nvidia, imx185"</span>, },</div><div id="wwpID0E0RV0HA" class="Code">    { },</div><div id="wwpID0E0QV0HA" class="Code">};</div><div id="wwpID0E0PV0HA" class="Body_Text">Link this declaration’s <span class="Code_Char">power_on</span>, <span class="Code_Char">power_off</span>, <span class="Code_Char">write_reg</span>, and <span class="Code_Char">read_reg</span> members to the appropriate functions (highlighted below):</div><div id="wwpID0E0OV0HA" class="Code">static struct camera_common_sensor_ops imx185_common_ops = {</div><div id="wwpID0E0NV0HA" class="Code">    .power_on = <span style="background-color: yellow">imx185_power_on</span>,</div><div id="wwpID0E0MV0HA" class="Code">    .power_off = <span style="background-color: yellow">imx185_power_off</span>,</div><div id="wwpID0E0LV0HA" class="Code">    .write_reg = <span style="background-color: yellow">imx185_write_reg</span>,</div><div id="wwpID0E0KV0HA" class="Code">    .read_reg = <span style="background-color: yellow">imx185_read_reg</span>,</div><div id="wwpID0E0JV0HA" class="Code">};</div><H4 id="wwpID0E0IV0HA" class="Heading_4">Control Handlers</H4><div id="wwpID0E0HV0HA" class="Body_Text">This topic describes the control handlers that control the top-level structure and tells the function how many controls the handler is expected to handle.</div><div id="wwpID0E0GV0HA" class="Heading_5">Set Control</div><div id="wwpID0E0FV0HA" class="Body_Text">The following table describes controls that may be implemented for a sensor driver. Each control needs a dedicated control handler.</div><div id="wwpID0E0EV0HA" class="Body_Text">The property values that were originally floating point are scaled to integers by their respective scaling factors. (See, for example, the discussion of <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Fixed Point Format</a></span>.)</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 31.25pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 130.5pt"><div id="wwpID0EABN0DV0HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 270pt"><div id="wwpID0EAAN0DV0HA" class="Cell_Heading">Input</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABM0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_GAIN</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAM0DV0HA" class="Cell_Text">Updates the gain settings.</div><div id="wwpID0EAAM0DV0HA" class="Cell_Text">The value is the actual gain scaled by <span class="Code_Char">gain_factor</span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECBL0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_FRAME_LENGTH</div><div id="wwpID0EBBL0DV0HA" class="Cell_Text">or</div><div id="wwpID0EABL0DV0HA" class="Cell_Text">V4L2 CID_FRAME_RATE</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAL0DV0HA" class="Cell_Text">Updates the frame length register with the frame length in lines, or the frame rate settings with the frame rate in frames/second.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECBK0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_COARSE_TIME</div><div id="wwpID0EBBK0DV0HA" class="Cell_Text">or</div><div id="wwpID0EABK0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_EXPOSURE</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAK0DV0HA" class="Cell_Text">Updates the coarse integration time registers with the time in lines, or the exposure settings with the exposure time in seconds. See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E05N0HA" title="Sensor Software Driver Programming">Exposure Controls</a></span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECBJ0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_COARSE_TIME_SHORT*</div><div id="wwpID0EBBJ0DV0HA" class="Cell_Text">or</div><div id="wwpID0EABJ0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_EXPOSURE_SHORT*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAJ0DV0HA" class="Cell_Text">Updates the short coarse integration time registers with the time in lines, or the short exposure settings with the exposure time in seconds. Only available for HDR sensors.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABI0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_GROUP_HOLD</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAI0DV0HA" class="Cell_Text">Updates the sensor group hold (register hold) control for sensors supporting this feature.</div><div id="wwpID0EAAI0DV0HA" class="Cell_Text">Create an empty control handler if sensor hardware does not support this feature.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_HDR_ENABLE*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAH0DV0HA" class="Cell_Text">A Boolean; indicates whether the sensor is operating in HDR sensor mode (true) or normal sensor mode (false).  Only available for HDR sensors.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_EEPROM_DATA</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0DV0HA" class="Cell_Text">Reads the module’s EEPROM data.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_OTP_DATA*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAF0DV0HA" class="Cell_Text">Reads the module’s One-Time Programmable (OTP) memory data.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_FUSE_ID*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE0DV0HA" class="Cell_Text">Reads the sensor fuse ID.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_SENSOR_MODE_ID*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0DV0HA" class="Cell_Text">Selects specific sensor mode. Value is a zero-based index.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_VI_BYPASS_MODE†</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0DV0HA" class="Cell_Text">A Boolean; true bypasses VI settings in the kernel driver. Default is true when using camera core library.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0DV0HA" class="Cell_Text">TEGRA_CAMERA_CID_OVERRIDE_ENABLE**</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0DV0HA" class="Cell_Text">Overrides gain and exposure settings from the default sensor mode table.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" colspan="2"><div id="wwpID0EBAA0DV0HA" class="Cell_Text"> *  Optional</div><div id="wwpID0EAAA0DV0HA" class="Cell_Text">†  Provided by NVIDIA V4L2 Media Controller Framework kernel driver.</div></td></tr></table></div><div id="wwpID0E0CV0HA" class="Body_Text"><span class="Strong">Gain Control</span></div><div id="wwpID0E0BV0HA" class="Body_Text"><span class="Strong">Gain control</span> applies to the per-frame gain setting. It takes a 32-bit or 64-bit input value from the camera core library.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 31.25pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 130.5pt"><div id="wwpID0EABB0AV0HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 270pt"><div id="wwpID0EAAB0AV0HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0AV0HA" class="Cell_Text">TEGRA_CAMERA_CID_GAIN</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EEAA0AV0HA" class="Cell_Text">Specifies the gain values from the camera core library.</div><div id="wwpID0EDAA0AV0HA" class="Cell_Text"><span class="Strong">32-bit mode (deprecated)</span>: Uses 24.8 format (24‑bit integer, 8‑bit fraction) by default. To change the format, adjust the min/max gain range in the driver.</div><div id="wwpID0ECAA0AV0HA" class="Cell_Text">Uses the minimum gain value to determine how many bits of a fraction to use.</div><div id="wwpID0EBAA0AV0HA" class="Cell_Text"><span class="Strong">64-bit mode</span>: Uses 42.22 format (42‑bit integer, 22‑bit fraction). (See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Fixed Point Format</a></span>.)</div><div id="wwpID0EAAA0AV0HA" class="Cell_Text">For details, see the definition of <span class="Code_Char">imx185_set_gain()</span> in the file <span class="Code_Char">imx185.c</span>.</div></td></tr></table></div><div id="wwpID0E06U0HA" class="Body_Text"><span class="Strong">Exposure Control</span></div><div id="wwpID0E05U0HA" class="Body_Text">You exercise exposure control with one of two pairs of controls: one pair for 32‑bit input parameters (deprecated), and one for 64‑bit. You may implement and use either pair of controls, but do not implement both.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 31.25pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 130.5pt"><div id="wwpID0EABC04U0HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 270pt"><div id="wwpID0EAAC04U0HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBBB04U0HA" class="Cell_Text">TEGRA_CAMERA_CID_FRAME_LENGTH + TEGRA_CAMERA_CID_COARSE_TIME</div><div id="wwpID0EABB04U0HA" class="Cell_Text">(Deprecated)</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAB04U0HA" class="Cell_Text">Specifies the pre-processed 32-bit value.</div><div id="wwpID0EBAB04U0HA" class="Cell_Text">The camera core library converts the frame rate to the sensor frame length and converts exposure to sensor coarse integration time.</div><div id="wwpID0EAAB04U0HA" class="Cell_Text">The driver uses these values to program the frame length and coarse integration time registers.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA04U0HA" class="Cell_Text">TEGRA_CAMERA_CID_FRAME_RATE + V4L2 CID_EXPOSURE</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAA04U0HA" class="Cell_Text">Specifies the unprocessed 64-bit value. (See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Fixed Point Format</a></span>.)</div><div id="wwpID0EBAA04U0HA" class="Cell_Text">The camera core library passes the frame rate and exposure values to the driver with no pre-processing. The driver is responsible for converting these values into frame length and coarse integration time settings.</div><div id="wwpID0EAAA04U0HA" class="Cell_Text">See the definitions of the <span class="Code_Char">imx185_set_frame_rate()</span> and <span class="Code_Char">imx185_set_exposure()</span> functions in the file <span class="Code_Char">imx185_1.c</span>.</div></td></tr></table></div><div id="wwpID0E03U0HA" class="Body_Text"><span class="Strong">Fixed Point Format</span></div><div id="wwpID0E02U0HA" class="Body_Text">If the driver implements the <span class="Code_Char">TEGRA_CAMERA_CID_FRAME_RATE</span> and <span class="Code_Char">TEGRA_CAMERA_CID_EXPOSURE</span> controls, the received control values are in Q42.22 fixed point format. In this format the upper 42 bits are for storing integer values and the lower 22 bits are for fraction values. This is a workaround for the lack of floating point capability in the kernel.</div><div id="wwpID0E01U0HA" class="Body_Text">To convert a floating point number to Q42.22 format, multiply it by <span class="Code_Char">1&lt;&lt;22</span>. To convert it back to floating point format, divide it by <span class="Code_Char">1&lt;&lt;22</span>. The manifest constant <span class="Code_Char">FIXED_POINT_SCALING_FACTOR</span> represents this factor:</div><div id="wwpID0E0ZU0HA" class="Code">#define FIXED_POINT_SCALING_FACTOR (1ULL &lt;&lt; 22)</div><div id="wwpID0E0YU0HA" class="Body_Text">To minimize loss of precision, perform multiplication first, then division. For example, these statements yield different results:</div><div id="wwpID0E0XU0HA" class="Code">u64 gain64 = 10485760;          // 2.5 * FIXED_POINT_SCALING_FACTOR.</div><div id="wwpID0E0WU0HA" class="Code">&nbsp;</div><div id="wwpID0E0VU0HA" class="Code">gain8 = (u8) (gain64 / FIXED_POINT_SCALING_FACTOR * 160 / 48);</div><div id="wwpID0E0UU0HA" class="Code">                                // Incorrect, gain8 = 6.</div><div id="wwpID0E0TU0HA" class="Code">&nbsp;</div><div id="wwpID0E0SU0HA" class="Code">gain8 = (u8) (gain64 * 160 / 48 / FIXED_POINT_SCALING_FACTOR);</div><div id="wwpID0E0RU0HA" class="Code">                                // Correct, gain8 = 8.</div><div id="wwpID0E0QU0HA" class="Body_Text"><span class="Strong">V4L2 Set-Control Operation</span></div><div id="wwpID0E0PU0HA" class="Body_Text">The V4L2 set-control function contains a switch statement to redirect set-control calls to the appropriate control handlers.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0OU0HA" class="Note_Heading">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 355.5pt"><div id="wwpID0EAAA0OU0HA" class="Note_Text">Read-only controls, such as <span class="Code_Char">TEGRA_CAMERA_CID_FUSE_ID</span> (which reads the camera’s fused module ID) and <span class="Code_Char">TEGRA_CAMERA_CID_OTP_DATA</span> (which reads its One-Time Programmable Read-Only Memory), do not have a case statement in the control ID switch statement.</div></td></tr></table></div><div id="wwpID0E0NU0HA" class="Body_Text">&nbsp;</div><div id="wwpID0E0MU0HA" class="Code">imx185_s_ctrl {</div><div id="wwpID0E0LU0HA" class="Code">    ...</div><div id="wwpID0E0KU0HA" class="Code">    switch (ctrl-&gt;id) {</div><div id="wwpID0E0JU0HA" class="Code">        case TEGRA_CAMERA_CID_GAIN:</div><div id="wwpID0E0IU0HA" class="Code">            ...</div><div id="wwpID0E0HU0HA" class="Code">        case TEGRA_CAMERA_CID_EEPROM_DATA:</div><div id="wwpID0E0GU0HA" class="Code">            ...</div><div id="wwpID0E0FU0HA" class="Code">        case TEGRA_CAMERA_CID_HDR_EN:</div><div id="wwpID0E0EU0HA" class="Code">            break;</div><div id="wwpID0E0DU0HA" class="Code">    }</div><div id="wwpID0E0CU0HA" class="Code">    ...</div><div id="wwpID0E0BU0HA" class="Body_Text">(<span class="Code_Char">TEGRA_CAMERA_CID_HDR_EN</span> is a pure software control. No control handler writes to the hardware, so simply break out of the switch statement.)</div><div id="wwpID0E0AU0HA" class="Body_Text"><span class="Strong">Setter-Control Handlers (Writes)</span></div><div id="wwpID0E06T0HA" class="Body_Text">Setter-control handlers are the control handlers called by <span class="Code_Char">s_ctrl()</span>. They perform additional control-handling operations, such as writes to registers. The majority of these controls make calls to the control register setup functions.</div><div id="wwpID0E05T0HA" class="Code">imx185_set_group_hold()</div><div id="wwpID0E04T0HA" class="Code">imx185_set_gain()</div><div id="wwpID0E03T0HA" class="Code">imx185_set_frame_length()</div><div id="wwpID0E02T0HA" class="Code">imx185_set_coarse_time()</div><div id="wwpID0E01T0HA" class="Code">imx185_set_coarse_time_short()</div><div id="wwpID0E0ZT0HA" class="Code">imx185_write_eeprom()</div><div id="wwpID0E0YT0HA" class="Body_Text">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Setting Up Control Registers</a></span>.</div><div id="wwpID0E0XT0HA" class="Heading_5">Get-Volatile Control</div><div id="wwpID0E0WT0HA" class="Body_Text"><span class="Code_Char">imx185_g_volatile_ctrl()</span> is a wrapper function that redirects get-control calls to their appropriate volatile control handlers.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0VT0HA" class="Note_Heading">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 355.5pt"><div id="wwpID0EAAA0VT0HA" class="Note_Text">For non-volatile controls, get-control calls simply return the previously written value stored in the control handler.</div></td></tr></table></div><H4 id="wwpID0E0UT0HA" class="Heading_4">Boot-Time Initialization</H4><div id="wwpID0E0TT0HA" class="Body_Text">These sections describe functions for boot-time initialization.</div><div id="wwpID0E0ST0HA" class="Heading_5">Control Initialization</div><div id="wwpID0E0RT0HA" class="Body_Text">The <span class="Code_Char">imx185_ctrls_init()</span> function iterates through <span class="Code_Char">ctrl_config_list[]</span> and registers each control as a new custom control with the V4L2 framework. <span class="Code_Char">imx185_s_ctrl()</span> is also called for each control to initialize its default value as defined in <span class="Code_Char">ctrl_config_list</span>.</div><div id="wwpID0E0QT0HA" class="Body_Text">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Configuring Controls</a></span>.</div><div id="wwpID0E0PT0HA" class="Body_Text">If your driver has read-only controls (EEPROM, OTP or fuse ID), you must implement a function for each control and make <span class="Code_Char">imx185_ctrls_init{}</span> call it.</div><div id="wwpID0E0OT0HA" class="Code">imx185_ctrls_init {</div><div id="wwpID0E0NT0HA" class="Code">    ...</div><div id="wwpID0E0MT0HA" class="Code">    err = imx185_fuse_id_setup(priv);</div><div id="wwpID0E0LT0HA" class="Code">    ...</div><div id="wwpID0E0KT0HA" class="Code">}</div><div id="wwpID0E0JT0HA" class="Heading_5">Device Tree Parser</div><div id="wwpID0E0IT0HA" class="Body_Text">The <span class="Code_Char">imx185_parse_dt()</span> function, which parses device trees, searches the device tree node for settings for clocks, GPIOs, and regulators, as well as any device-specific properties.</div><div id="wwpID0E0HT0HA" class="Body_Text">The values include but are not limited to:</div><div id="wwpID0E0GT0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">mclk</span></div><div id="wwpID0E0FT0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">pwdn-gpios</span></div><div id="wwpID0E0ET0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">reset-gpios</span></div><div id="wwpID0E0DT0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">af-gpios</span></div><div id="wwpID0E0CT0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">avdd-reg</span></div><div id="wwpID0E0BT0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">dvdd-reg</span></div><div id="wwpID0E0AT0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">iovdd-reg</span></div><div id="wwpID0E06S0HA" class="Body_Text">For information about setting up device trees, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Device Properties</a></span>. You must match the name list with the names in the device tree to get the respective property-value pairs.</div><div id="wwpID0E05S0HA" class="Heading_5">Media Controller Setup</div><div id="wwpID0E04S0HA" class="Body_Text">A few additional components are needed to set up the media controller for V4L2. The “open” function call is a placeholder operation for satisfying the V4L2 subdevice internal operation requirements. The setup likely does not need to be changed apart from changing the name to match the devices.</div><div id="wwpID0E03S0HA" class="Code">imx185_open()</div><div id="wwpID0E02S0HA" class="Body_Text">Subdevice function operations must link to the open operation:</div><div id="wwpID0E01S0HA" class="Code">static const struct v4l2_subdev_internal_ops</div><div id="wwpID0E0ZS0HA" class="Code">        imx185_subdev_internal_ops = {</div><div id="wwpID0E0YS0HA" class="Code">    .open = imx185_open,</div><div id="wwpID0E0XS0HA" class="Code">};</div><div id="wwpID0E0WS0HA" class="Body_Text">Media entity function operations must link to the V4L2 subdevice link validation method:</div><div id="wwpID0E0VS0HA" class="Code">static const struct media_entity_operations imx185_media_ops = {</div><div id="wwpID0E0US0HA" class="Code">    .link_validate = v4l2_subdev_link_validate,</div><div id="wwpID0E0TS0HA" class="Code">};</div><div id="wwpID0E0SS0HA" class="Heading_5">Sensor Driver Probing</div><div id="wwpID0E0RS0HA" class="Body_Text">This topic describes the probing functions of the sensor driver.</div><div id="wwpID0E0QS0HA" class="Body_Text"><span class="Strong">Entry Point for Initialization During Boot</span></div><div id="wwpID0E0PS0HA" class="Body_Text">The <span class="Code_Char">imx185_probe()</span> function is the driver’s entry point. The function first allocates memory for common data and sensor-private data. For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0H10HA" title="Sensor Software Driver Programming">Sensor-Private Data</a></span>.</div><div id="wwpID0E0OS0HA" class="Code">common_data = devm_kzalloc(&amp;client-&gt;dev,</div><div id="wwpID0E0NS0HA" class="Code">    sizeof(struct camera_common_data), GFP_KERNEL);</div><div id="wwpID0E0MS0HA" class="Code">&nbsp;</div><div id="wwpID0E0LS0HA" class="Code">priv = devm_kzalloc(&amp;client-&gt;dev,</div><div id="wwpID0E0KS0HA" class="Code">    sizeof(struct imx185) + sizeof(struct v4l2_ctrl *) *</div><div id="wwpID0E0JS0HA" class="Code">    ARRAY_SIZE(ctrl_config_list),</div><div id="wwpID0E0IS0HA" class="Code">    GFP_KERNEL);</div><div id="wwpID0E0HS0HA" class="Body_Text">It then initializes <span class="Code_Char">regmap</span>.</div><div id="wwpID0E0GS0HA" class="Code">priv-&gt;regmap = devm_regmap_init_i2c(client, &amp;sensor_regmap_config);</div><div id="wwpID0E0FS0HA" class="Body_Text">Then it calls the other initialization functions.</div><div id="wwpID0E0ES0HA" class="Code">// See the section Parser for Device Trees: stored in private</div><div id="wwpID0E0DS0HA" class="Code">// data pdata field.</div><div id="wwpID0E0CS0HA" class="Code">imx185_parse_dt(client);</div><div id="wwpID0E0BS0HA" class="Code">&nbsp;</div><div id="wwpID0E0AS0HA" class="Code">// See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Power Functions</a></span>.</div><div id="wwpID0E06R0HA" class="Code">imx185_power_get(priv);</div><div id="wwpID0E05R0HA" class="Code">&nbsp;</div><div id="wwpID0E04R0HA" class="Code">// Link the appropriate subdevice ops. See</div><div id="wwpID0E03R0HA" class="Code">// <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0PW0HA" title="Sensor Software Driver Programming">Setting Up V4L2 Subdevice and Camera Common</a></span>.</div><div id="wwpID0E02R0HA" class="Code">v4l2_i2c_subdev_init(&amp;common_data-&gt;subdev, client, &amp;subdev_ops);</div><div id="wwpID0E01R0HA" class="Code">&nbsp;</div><div id="wwpID0E0ZR0HA" class="Code">// See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0ST0HA" title="Sensor Software Driver Programming">Control Initialization</a></span>.</div><div id="wwpID0E0YR0HA" class="Code">imx185_ctrls_init(priv);</div><div id="wwpID0E0XR0HA" class="Body_Text">Next, the function links the common data and sensor-private values:</div><div id="wwpID0E0WR0HA" class="Code">// Link to ops. See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0PW0HA" title="Sensor Software Driver Programming">Setting Up V4L2 Subdevice and Camera Common</a></span>.</div><div id="wwpID0E0VR0HA" class="Code">common_data-&gt;ops = &amp; imx185_common_ops;</div><div id="wwpID0E0UR0HA" class="Code">&nbsp;</div><div id="wwpID0E0TR0HA" class="Code">// Control handler linking.</div><div id="wwpID0E0SR0HA" class="Code">common_data-&gt;ctrl_handler = &amp;priv-&gt;ctrl_handler;</div><div id="wwpID0E0RR0HA" class="Code">&nbsp;</div><div id="wwpID0E0QR0HA" class="Code">// I2C client passed in to probe.</div><div id="wwpID0E0PR0HA" class="Code">common_data-&gt;i2c_client = client;</div><div id="wwpID0E0OR0HA" class="Code">&nbsp;</div><div id="wwpID0E0NR0HA" class="Code">// Default to frame format 0. See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Mode Tables</a></span>.</div><div id="wwpID0E0MR0HA" class="Code">common_data-&gt;frmfmt = &amp; imx185_frmfmt[0];</div><div id="wwpID0E0LR0HA" class="Code">&nbsp;</div><div id="wwpID0E0KR0HA" class="Code">// Based on default data format definition, generally defaults</div><div id="wwpID0E0JR0HA" class="Code">// to the same format. See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Macro Definitions</a></span>.</div><div id="wwpID0E0IR0HA" class="Code">common_data-&gt;colorfmt = camera_common_find_datafmt(</div><div id="wwpID0E0HR0HA" class="Code">                            IMX185_DEFAULT_DATAFMT);</div><div id="wwpID0E0GR0HA" class="Code">&nbsp;</div><div id="wwpID0E0FR0HA" class="Code">// Power-handler linking.</div><div id="wwpID0E0ER0HA" class="Code">common_data-&gt;power = &amp;priv-&gt;power;</div><div id="wwpID0E0DR0HA" class="Code">&nbsp;</div><div id="wwpID0E0CR0HA" class="Code">// Sensor-private data linking.</div><div id="wwpID0E0BR0HA" class="Code">common_data-&gt;priv = (void *)priv;</div><div id="wwpID0E0AR0HA" class="Code">&nbsp;</div><div id="wwpID0E06Q0HA" class="Code">// Number of format is frame format. See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Macro Definitions</a></span>.</div><div id="wwpID0E05Q0HA" class="Code">common_data-&gt;numfmts = ARRAY_SIZE(imx185_frmfmt);</div><div id="wwpID0E04Q0HA" class="Code">&nbsp;</div><div id="wwpID0E03Q0HA" class="Code">// Initialize camera common code.</div><div id="wwpID0E02Q0HA" class="Code">camera_common_initialize(common_data, “imx185”);</div><div id="wwpID0E01Q0HA" class="Body_Text"><span class="Strong">Setup of Default Values for Common Data</span></div><div id="wwpID0E0ZQ0HA" class="Body_Text">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Macro Definitions</a></span>.</div><div id="wwpID0E0YQ0HA" class="Code">common_data-&gt;def_mode = IMX185_DEFAULT_MODE;</div><div id="wwpID0E0XQ0HA" class="Code">common_data-&gt;def_width = IMX185_DEFAULT_WIDTH;</div><div id="wwpID0E0WQ0HA" class="Code">common_data-&gt;def_height = IMX185_DEFAULT_HEIGHT;</div><div id="wwpID0E0VQ0HA" class="Code">common_data-&gt;def_clk_freq = IMX185_DEFAULT_CLK_FREQ;</div><div id="wwpID0E0UQ0HA" class="Code">&nbsp;</div><div id="wwpID0E0TQ0HA" class="Code">// I2C client passed in to probe</div><div id="wwpID0E0SQ0HA" class="Code">priv-&gt;i2c_client = client;</div><div id="wwpID0E0RQ0HA" class="Code">&nbsp;</div><div id="wwpID0E0QQ0HA" class="Code">// Link to common data above.</div><div id="wwpID0E0PQ0HA" class="Code">priv-&gt;s_data = common_data;</div><div id="wwpID0E0OQ0HA" class="Code">&nbsp;</div><div id="wwpID0E0NQ0HA" class="Code">// Link to V4L2 subdevice handler.</div><div id="wwpID0E0MQ0HA" class="Code">priv-&gt;subdev = &amp;common_data-&gt;subdev;</div><div id="wwpID0E0LQ0HA" class="Code">// Link subdevice dev to i2c_client dev (for media controller usage).</div><div id="wwpID0E0KQ0HA" class="Code">priv-&gt;subdev-&gt;dev = &amp;client-&gt;dev;</div><div id="wwpID0E0JQ0HA" class="Heading_5">Setup of Media Controller</div><div id="wwpID0E0IQ0HA" class="Body_Text">All imager devices must register themselves as sub-devices to the media controller framework. VI acts as the primary device which controls the binding, parses the device tree, and establishes the media links once all of the sub-devices are registered.</div><div id="wwpID0E0HQ0HA" class="Body_Text">Each subdevice registers with the media controller framework by defining the entity and pads information.</div><div id="wwpID0E0GQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">Entity</span>: The unit device represented by the media controller framework for establishing connections. Each media entity can have multiple pads. The framework provides a list of known entity types and corresponding media operations.</div><div id="wwpID0E0FQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Strong">Pad</span>: Determines whether the device behaves as a SINK or a SOURCE port. An imager device must have a SOURCE port which is bound to VI. If an imager device has a SINK port, then the SOURCE port which binds the device SINK port must be represented in the device tree to complete the binding.</div><div id="wwpID0E0EQ0HA" class="Code_Indent">// Link subdevice internal and media entity operations.</div><div id="wwpID0E0DQ0HA" class="Code_Indent">priv-&gt;subdev-&gt;internal_ops = &amp; imx185_subdev_internal_ops;</div><div id="wwpID0E0CQ0HA" class="Code_Indent">&nbsp;</div><div id="wwpID0E0BQ0HA" class="Code_Indent">// Set up subdevice flags and media entity type.</div><div id="wwpID0E0AQ0HA" class="Code_Indent">priv-&gt;subdev-&gt;flags |= V4L2_SUBDEV_FL_HAS_DEVNODE |</div><div id="wwpID0E06P0HA" class="Code_Indent">        V4L2_SUBDEV_FL_HAS_EVENTS;</div><div id="wwpID0E05P0HA" class="Code_Indent">&nbsp;</div><div id="wwpID0E04P0HA" class="Code_Indent">// Set up media controller pad flags.</div><div id="wwpID0E03P0HA" class="Code_Indent">priv-&gt;pad.flags = MEDIA_PAD_FL_SOURCE;</div><div id="wwpID0E02P0HA" class="Code_Indent">&nbsp;</div><div id="wwpID0E01P0HA" class="Code_Indent">priv-&gt;subdev-&gt;entity.type = MEDIA_ENT_T_V4L2_SUBDEV_SENSOR;</div><div id="wwpID0E0ZP0HA" class="Code_Indent">priv-&gt;subdev-&gt;entity.ops = &amp;imx185_media_ops;</div><div id="wwpID0E0YP0HA" class="Code_Indent">&nbsp;</div><div id="wwpID0E0XP0HA" class="Code_Indent">// Initialize and register the subdevice and media entity with</div><div id="wwpID0E0WP0HA" class="Code_Indent">// the media controller framework.</div><div id="wwpID0E0VP0HA" class="Code_Indent">tegra_media_entity_init(&amp;priv-&gt;subdev-&gt;entity, 1, &amp;priv-&gt;pad, true,</div><div id="wwpID0E0UP0HA" class="Code_Indent">        true);</div><div id="wwpID0E0TP0HA" class="Code_Indent">&nbsp;</div><div id="wwpID0E0SP0HA" class="Code_Indent">v4l2_async_register_subdev(priv-&gt;subdev);</div><H4 id="wwpID0E0RP0HA" class="Heading_4">Removing Sensor Drivers</H4><div id="wwpID0E0QP0HA" class="Body_Text">The <span class="Code_Char">imx185_remove()</span> function is called on device shutdown to release any resources prior to removing the sensor device instance.</div><div id="wwpID0E0PP0HA" class="Code">// Unregister V4L2 subdevice.</div><div id="wwpID0E0OP0HA" class="Code">v4l2_async_unregister_subdev(priv-&gt;subdev);</div><div id="wwpID0E0NP0HA" class="Code">&nbsp;</div><div id="wwpID0E0MP0HA" class="Code">// Cleanup and unregister subdevice and media entity with media</div><div id="wwpID0E0LP0HA" class="Code">// controller framework.</div><div id="wwpID0E0KP0HA" class="Code">media_entity_cleanup(&amp;priv-&gt;subdev-&gt;entity);</div><div id="wwpID0E0JP0HA" class="Code">&nbsp;</div><div id="wwpID0E0IP0HA" class="Code">// See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0ST0HA" title="Sensor Software Driver Programming">Control Initialization</a></span> for details on freeing the control</div><div id="wwpID0E0HP0HA" class="Code">// handler.</div><div id="wwpID0E0GP0HA" class="Code">v4l2_ctrl_handler free(&amp;priv-&gt;ctrl_handler);</div><div id="wwpID0E0FP0HA" class="Code">&nbsp;</div><div id="wwpID0E0EP0HA" class="Code">// Clean up camera common code.</div><div id="wwpID0E0DP0HA" class="Code">camera_common_cleanup(s_data);</div><H3 id="wwpID0E0CP0HA" class="Heading_3">V4L2 Kernel Driver (Version 2.0)</H3><div id="wwpID0E0BP0HA" class="Body_Text">This topic is based on the Video for Linux 2 (V4L2) driver for the Sony IMX185 sensor, located at:</div><div id="wwpID0E0AP0HA" class="Code">&lt;top&gt;/kernel/nvidia/drivers/media/i2c/imx185.c</div><div id="wwpID0E06O0HA" class="Body_Text">Examine this source file to obtain a complete understanding of the driver.</div><div id="wwpID0E05O0HA" class="Body_Text">For information on the V4L2 implementation, consult:</div><div id="wwpID0E04O0HA" class="Code"><span style="text-decoration: underline"><a href="https://linuxtv.org/downloads/v4l-dvb-apis/" target="external_window">https://linuxtv.org/downloads/v4l-dvb-apis/</a></span></div><H4 id="wwpID0E03O0HA" class="Heading_4">Macro Definitions</H4><div id="wwpID0E02O0HA" class="Body_Text">Sensor-specific macro definitions include:</div><div id="wwpID0E01O0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Sensor register addresses</div><div id="wwpID0E0ZO0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>Constant values used for calculating new settings</div><div id="wwpID0E0YO0HA" class="Body_Text">Do not add control-specific data (minimum, maximum, default value, etc.) as macros. Define them in the sensor device tree <span class="Code_Char">.dtsi</span> file.</div><H4 id="wwpID0E0XO0HA" class="Heading_4">Sensor-Private Data</H4><div id="wwpID0E0WO0HA" class="Body_Text">This structure contains private data specific to the sensor:</div><div id="wwpID0E0VO0HA" class="Code">struct imx185 {</div><div id="wwpID0E0UO0HA" class="Code">    struct i2c_client         *i2c_client;</div><div id="wwpID0E0TO0HA" class="Code">    struct v4l2_subdev        *subdev;</div><div id="wwpID0E0SO0HA" class="Code">    u8                         fuse_id[FUSE_ID_SIZE];</div><div id="wwpID0E0RO0HA" class="Code">    u32                        frame_length;</div><div id="wwpID0E0QO0HA" class="Code">    s64                        last_wdr_et_val;</div><div id="wwpID0E0PO0HA" class="Code">    struct camera_common_data *s_data;</div><div id="wwpID0E0OO0HA" class="Code">    struct tegracam_device    *tc_dev;</div><div id="wwpID0E0NO0HA" class="Code">};</div><div id="wwpID0E0MO0HA" class="Body_Text">The following table describes the sensor properties.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 117pt"><div id="wwpID0EABH0LO0HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 279pt"><div id="wwpID0EAAH0LO0HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0LO0HA" class="Cell_Text">i2c_client</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0LO0HA" class="Cell_Text">A handle for <span class="Code_Char">i2c_client</span>, used to gain access to the sensor I2C client instance.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0LO0HA" class="Cell_Text">subdev</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAF0LO0HA" class="Cell_Text">A handle for a V4L2 subdevice, used to perform subdevice operations (ops).</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0LO0HA" class="Cell_Text">fuse_id</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE0LO0HA" class="Cell_Text">Holds fuse ID information for the sensor in this char array.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0LO0HA" class="Cell_Text">frame_length</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0LO0HA" class="Cell_Text">Holds the previous value of <span class="Code_Char">frame_length</span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0LO0HA" class="Cell_Text">last_wdr_et_val</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0LO0HA" class="Cell_Text">Holds the previous exposure time for WDR mode.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0LO0HA" class="Cell_Text">s_data</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0LO0HA" class="Cell_Text">Points to <span class="Code_Char">struct camera_common_data</span>, which holds information used by all sensor drivers. See <span class="Code_Char">camera_common.h</span> for details.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0LO0HA" class="Cell_Text">tc_dev</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0LO0HA" class="Cell_Text">Points to <span class="Code_Char">struct tegracam_device</span>, used by Jetson V4L2 Camera Framework to control camera devices. See <span class="Code_Char">tegracam_core.h</span> for details.</div></td></tr></table></div><H4 id="wwpID0E0KO0HA" class="Heading_4">Regmap</H4><div id="wwpID0E0JO0HA" class="Body_Text">Initialize the values of the <span class="Code_Char">regmap_config</span> structure’s <span class="Code_Char">reg_bits</span> and <span class="Code_Char">val_bits</span> members according to the I2C interface of the sensor:</div><div id="wwpID0E0IO0HA" class="Code">struct regmap_config sensor_regmap_config {</div><div id="wwpID0E0HO0HA" class="Code">    reg_bits = 16;</div><div id="wwpID0E0GO0HA" class="Code">    val_bits = 8;</div><div id="wwpID0E0FO0HA" class="Code">};</div><div id="wwpID0E0EO0HA" class="Body_Text"><span class="Code_Char">reg_bits </span>holds the size of the register address, in bits. <span class="Code_Char">val_bits </span>holds the size of the register value, in bits. Check your sensors vendor’s register programming table to determine the proper values.</div><H4 id="wwpID0E0DO0HA" class="Heading_4">Sensor Controls</H4><div id="wwpID0E0CO0HA" class="Body_Text">The following table displays the custom V4L2 controls supported by Jetson V4L2 Camera Framework.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 117pt"><div id="wwpID0EABN0BO0HA" class="Cell_Heading">Property</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 279pt"><div id="wwpID0EAAN0BO0HA" class="Cell_Heading">Value</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABM0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_GAIN</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EDAM0BO0HA" class="Cell_Text">Sensor gain, a 64-bit value in Q format. The value is <span class="Emphasis">n</span> in a 1:<span class="Emphasis">n</span> ratio.</div><div id="wwpID0ECAM0BO0HA" class="Cell_Text">For example, a value of 3 represents a ratio of 1:3, yielding 3x amplification.</div><div id="wwpID0EBAM0BO0HA" class="Cell_Text">The <span class="Code_Char">gain_factor</span> property described in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0450HA" title="Sensor Software Driver Programming">Property-Value Pairs (Version 2.0 Only)</a></span> controls the Q format and the range of the control.</div><div id="wwpID0EAAM0BO0HA" class="Cell_Text">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Gain Control</a></span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABL0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_FRAME_RATE</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAL0BO0HA" class="Cell_Text">Frame rate, in frames/second. </div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABK0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_EXPOSURE</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAK0BO0HA" class="Cell_Text">Exposure time, in seconds. For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Exposure Control</a></span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABJ0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_EXPOSURE_SHORT*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAJ0BO0HA" class="Cell_Text">Exposure time, in seconds. Used for the short exposure frame for HDR sensors. For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Exposure Control</a></span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABI0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_HDR_ENABLE*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAI0BO0HA" class="Cell_Text">A Boolean value; indicates whether the sensor is running in HDR sensor mode (true) or normal sensor mode (false).</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_EEPROM_DATA</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAH0BO0HA" class="Cell_Text">Reads the module’s EEPROM data.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_OTP_DATA*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0BO0HA" class="Cell_Text">Reads the module’s One-Time Programmable (OTP) memory data.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_FUSE_ID*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAF0BO0HA" class="Cell_Text">Reads the sensor fuse ID.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_GROUP_HOLD‡</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE0BO0HA" class="Cell_Text">A Boolean value. Sensor group hold (register hold) control for sensors that support this feature.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_SENSOR_MODE_ID*</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAD0BO0HA" class="Cell_Text">Forces Jetson V4L2 Camera Framework to use a specific sensor mode, bypassing its default mode selection logic.</div><div id="wwpID0EAAD0BO0HA" class="Cell_Text">Value is a zero-based index, the sensor mode index specified in the sensor device tree <span class="Code_Char">.dtsi</span> file.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_VI_BYPASS_MODE†</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0BO0HA" class="Cell_Text">A Boolean value. Set to true to bypass VI settings in the kernel driver. Default value is true when using the camera core library.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0BO0HA" class="Cell_Text">TEGRA_CAMERA_CID_OVERRIDE_ENABLE†</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0BO0HA" class="Cell_Text">Overrides gain and exposure settings from the default sensor mode table.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" colspan="2"><div id="wwpID0ECAA0BO0HA" class="Cell_Text">*  Optional.</div><div id="wwpID0EBAA0BO0HA" class="Cell_Text">†  Provided by the NVIDIA V4L2 Media Controller Framework kernel driver.</div><div id="wwpID0EAAA0BO0HA" class="Cell_Text">‡  Provided by the Jetson V4L2 Camera Framework.</div></td></tr></table></div><div id="wwpID0E0AO0HA" class="Body_Text">&nbsp;</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA06N0HA" class="Note_Heading">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 346.5pt"><div id="wwpID0EAAA06N0HA" class="Note_Text">To define additional controls you must change the camera core library.</div></td></tr></table></div><div id="wwpID0E05N0HA" class="Heading_5">Exposure Controls</div><div id="wwpID0E04N0HA" class="Body_Text">Sensor exposure is controlled by the exposure and frame rate settings the <span class="Code_Char">TEGRA_CAMERA_CID_EXPOSURE</span>, <span class="Code_Char">TEGRA_CAMERA_CID_EXPOSURE_SHORT</span>, and <span class="Code_Char">TEGRA_CAMERA_CID_FRAME_RATE</span> controls. The <span class="Code_Char">TEGRA_CAMERA_CID_EXPOSURE_SHORT</span> control is optional, and may only be specified for HDR sensors.</div><div id="wwpID0E03N0HA" class="Body_Text">All of these controls have 64‑bit exposure values that are unprocessed except for format conversion; see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Fixed Point Format</a></span>.</div><div id="wwpID0E02N0HA" class="Body_Text">See the <span class="Code_Char">imx185_set_frame_rate()</span> and <span class="Code_Char">imx185_set_exposure()</span> functions in the file <span class="Code_Char">imx185.c</span>.</div><div id="wwpID0E01N0HA" class="Heading_5">Fixed Point Format</div><div id="wwpID0E0ZN0HA" class="Body_Text">The driver receives control values for the <span class="Code_Char">TEGRA_CAMERA_CID_GAIN</span>, <span class="Code_Char">TEGRA_CAMERA_CID_FRAME_RATE</span>, <span class="Code_Char">TEGRA_CAMERA_CID_EXPOSURE</span>, and <span class="Code_Char">TEGRA_CAMERA_CID_EXPOSURE_SHORT</span> controls as fixed point (Q format) values generated using the factor and step properties from the device tree <span class="Code_Char">.dtsi</span> file. It uses fixed point format to avoid using floating point values in the kernel. The driver must convert the fixed point format values back to their original precisions during final calculation.</div><H4 id="wwpID0E0YN0HA" class="Heading_4">Control Handlers</H4><div id="wwpID0E0XN0HA" class="Body_Text">Control handlers are the actual implementations of the controls. There are two types of control handlers in JetsonV4L2 Camera Framework: <span class="Strong">setter control handlers</span> and <span class="Strong">fill-string control handlers</span>.</div><div id="wwpID0E0WN0HA" class="Heading_5">Setter Control Handlers (for Writing Settings)</div><div id="wwpID0E0VN0HA" class="Body_Text">Setter control handlers are called by the V4L2 <span class="Code_Char">s_ctrl()</span> function. They update the sensor settings during sensor operation. The setter control handlers are:</div><div id="wwpID0E0UN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_set_group_hold()</span></div><div id="wwpID0E0TN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_set_gain()</span></div><div id="wwpID0E0SN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_set_framerate()</span></div><div id="wwpID0E0RN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_set_exposure()</span></div><div id="wwpID0E0QN0HA" class="Body_Text">For a version 2.0 driver, the <span class="Code_Char">TEGRA_CAMERA_CID_GROUP_HOLD</span> control is required. Therefore, each driver must implement the handler for group hold control. For sensors that do not support hardware group hold functionality, create a dummy group hold handler.</div><div id="wwpID0E0PN0HA" class="Heading_5">Fill-String Control Handlers (for Reading Settings)</div><div id="wwpID0E0ON0HA" class="Body_Text">Fill-string controls report static sensor information like EEPROM/OTP data and fuse ID.</div><div id="wwpID0E0NN0HA" class="Body_Text">All read-only driver-specific controls must have an entry to provide valid data for user space requests. This routine acquires the static data from the sensor driver during initialization and assigns it to the controls.</div><div id="wwpID0E0MN0HA" class="Code">imx185_fill_string_ctrl {</div><div id="wwpID0E0LN0HA" class="Code">    ...</div><div id="wwpID0E0KN0HA" class="Code">    switch (ctrl-&gt;id) {</div><div id="wwpID0E0JN0HA" class="Code">        case TEGRA_CAMERA_CID_FUSE_ID:</div><div id="wwpID0E0IN0HA" class="Code">            ...</div><div id="wwpID0E0HN0HA" class="Code">    }</div><div id="wwpID0E0GN0HA" class="Code">    ...</div><div id="wwpID0E0FN0HA" class="Code">}</div><H4 id="wwpID0E0EN0HA" class="Heading_4">How Controls Are Implemented</H4><div id="wwpID0E0DN0HA" class="Body_Text">You implement sensor controls by registering to Jetson V4L2 Camera Framework and then providing the link to the control handlers.</div><div id="wwpID0E0CN0HA" class="Heading_5">Registering the Controls</div><div id="wwpID0E0BN0HA" class="Body_Text">Register the controls to Jetson V4L2 Camera Framework using the <span class="Code_Char">ctrl_cid_list[]</span> structure:</div><div id="wwpID0E0AN0HA" class="Code">static const u32 ctrl_cid_list[] = {</div><div id="wwpID0E06M0HA" class="Code">    TEGRA_CAMERA_CID_GAIN,</div><div id="wwpID0E05M0HA" class="Code">    TEGRA_CAMERA_CID_EXPOSURE,</div><div id="wwpID0E04M0HA" class="Code">    TEGRA_CAMERA_CID_FRAME_RATE,</div><div id="wwpID0E03M0HA" class="Code">    TEGRA_CAMERA_CID_GROUP_HOLD,</div><div id="wwpID0E02M0HA" class="Code">    TEGRA_CAMERA_CID_FUSE_ID,</div><div id="wwpID0E01M0HA" class="Code">    TEGRA_CAMERA_CID_HDR_EN,</div><div id="wwpID0E0ZM0HA" class="Code">    TEGRA_CAMERA_CID_SENSOR_MODE_ID,</div><div id="wwpID0E0YM0HA" class="Code">};</div><div id="wwpID0E0XM0HA" class="Heading_5">How to provide the link to the control handlers</div><div id="wwpID0E0WM0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Define a <span class="Code_Char">tegracam_ctrl_ops</span> structure.</div><div id="wwpID0E0VM0HA" class="List_Number_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Set the <span class="Code_Char">numctrls</span> member to the number of controls provided by the driver.</div><div id="wwpID0E0UM0HA" class="List_Number_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Set the <span class="Code_Char">ctrl_cid_list</span> member to point to the <span class="Code_Char">ctrl_cid_list[]</span> structure.</div><div id="wwpID0E0TM0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Link each setter control to the handler.</div><div id="wwpID0E0SM0HA" class="Code_Indent">static struct tegracam_ctrl_ops imx185_ctrl_ops = {</div><div id="wwpID0E0RM0HA" class="Code_Indent">    .set_gain = imx185_set_gain,</div><div id="wwpID0E0QM0HA" class="Code_Indent">    .set_exposure = imx185_set_exposure,</div><div id="wwpID0E0PM0HA" class="Code_Indent">    .set_frame_rate = imx185_set_frame_rate,</div><div id="wwpID0E0OM0HA" class="Code_Indent">    .set_group_hold = imx185_set_group_hold,</div><div id="wwpID0E0NM0HA" class="Code_Indent">};</div><div id="wwpID0E0MM0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>For fill-string controls (EEPROM, OTP, Fuse ID), provide the size of the string data and link the control to the handler.</div><div id="wwpID0E0LM0HA" class="Code_Indent">static struct tegracam_ctrl_ops imx185_ctrl_ops = {</div><div id="wwpID0E0KM0HA" class="Code_Indent">    . . .</div><div id="wwpID0E0JM0HA" class="Code_Indent">    .string_ctrl_size = {0, IMX185_FUSE_ID_STR_SIZE},</div><div id="wwpID0E0IM0HA" class="Code_Indent">    .fill_string_ctrl = imx185_fill_string_ctrl,</div><div id="wwpID0E0HM0HA" class="Code_Indent">};</div><div id="wwpID0E0GM0HA" class="Body_Text">Jetson V4L2 Camera Framework supports up to eight fill-string controls. The first three string controls are reserved for reading EEPROM data, fuse ID, and OTP data, respectively.</div><H4 id="wwpID0E0FM0HA" class="Heading_4">Setting Up Registers for the Control Handler</H4><div id="wwpID0E0EM0HA" class="Body_Text">Control handlers update sensor settings by programming related registers. The functions below generate the proper register address/value pair to be used later by register read/write functions.</div><div id="wwpID0E0DM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_get_frame_length_regs()</span></div><div id="wwpID0E0CM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_get_coarse_time_regs_shs1()</span></div><div id="wwpID0E0BM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_get_coarse_time_regs_shs2()</span></div><div id="wwpID0E0AM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_get_gain_reg()</span></div><H4 id="wwpID0E06L0HA" class="Heading_4">Read-Write Wrapper in the Register</H4><div id="wwpID0E05L0HA" class="Body_Text">The following functions are wrappers for the read-write interface of the I2C register. For IMX185, use the <span class="Code_Char">regmap</span> interface. You may modify these functions for other interfaces.</div><div id="wwpID0E04L0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_read_reg()</span></div><div id="wwpID0E03L0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_write_reg()</span></div><div id="wwpID0E02L0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">imx185_write_table()</span></div><H4 id="wwpID0E01L0HA" class="Heading_4">Power Functions</H4><div id="wwpID0E0ZL0HA" class="Body_Text">Power functions control sensor power states.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 117pt"><div id="wwpID0EABE0YL0HA" class="Cell_Heading">Controls</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 283.5pt"><div id="wwpID0EAAE0YL0HA" class="Cell_Heading">Operation</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0YL0HA" class="Cell_Text">imx185_power_on</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAD0YL0HA" class="Cell_Text">Performs the power-on sequence. You must modify this function according to the specification sheets.</div><div id="wwpID0EAAD0YL0HA" class="Cell_Text">The function calls <span class="Code_Char">regulator_enable()</span> to turn on regulators, and <span class="Code_Char">gpio_set_value()</span> to toggle the GPIO pins.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0YL0HA" class="Cell_Text">imx185_power_off</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAC0YL0HA" class="Cell_Text">Performs the power-off sequence. You must modify this function according to the specification sheets.</div><div id="wwpID0EAAC0YL0HA" class="Cell_Text">The function calls <span class="Code_Char">regulator_enable()</span> to turn on regulators, and <span class="Code_Char">gpio_set_value()</span> to toggle the GPIO pins.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0YL0HA" class="Cell_Text">imx185_power_put</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0YL0HA" class="Cell_Text">Calls <span class="Code_Char">regulator_put()</span> on all regulators.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0YL0HA" class="Cell_Text">imx185_power_get</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0YL0HA" class="Cell_Text">Calls the <span class="Code_Char">camera_common_regulator_get()</span> helper function or the <span class="Code_Char">regulator_get()</span> function to acquire all regulators.</div></td></tr></table></div><div id="wwpID0E0XL0HA" class="Body_Text">The driver must call <span class="Code_Char">power_get()</span> to acquire all regulators before it calls <span class="Code_Char">power_on()</span> and <span class="Code_Char">power_off()</span>. It must call <span class="Code_Char">power_put()</span> to release all regulators when the driver is released.</div><H4 id="wwpID0E0WL0HA" class="Heading_4">Stream Functions</H4><div id="wwpID0E0VL0HA" class="Body_Text">Stream functions control sensor streaming states.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 117pt"><div id="wwpID0EABD0UL0HA" class="Cell_Heading">Controls</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 283.5pt"><div id="wwpID0EAAD0UL0HA" class="Cell_Heading">Operation</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0UL0HA" class="Cell_Text">imx185_set_mode</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAC0UL0HA" class="Cell_Text">Sets the sensor to a specific resolution and format. The function must program all of the registers with values specified in the mode tables.</div><div id="wwpID0EAAC0UL0HA" class="Cell_Text">For details of the mode tables, See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Mode Tables</a></span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0UL0HA" class="Cell_Text">imx185_start_streaming</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAB0UL0HA" class="Cell_Text">Starts sensor streaming by enabling the stream control bits in the registers.</div><div id="wwpID0EAAB0UL0HA" class="Cell_Text">This function can also enable the sensor test pattern by setting the necessary registers.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0UL0HA" class="Cell_Text">imx185_stop_streaming</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0UL0HA" class="Cell_Text">Stops sensor streaming by disabling the stream control bits in registers.</div></td></tr></table></div><H4 id="wwpID0E0TL0HA" class="Heading_4">Miscellaneous Functions</H4><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 117pt"><div id="wwpID0EABC0SL0HA" class="Cell_Heading">Controls</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 283.5pt"><div id="wwpID0EAAC0SL0HA" class="Cell_Heading">Operation</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0SL0HA" class="Cell_Text">imx185_parse_dt</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0SL0HA" class="Cell_Text">Performs device tree parsing. Called during driver initialization to read hardware information from the device tree <span class="Code_Char">.dtsi</span> file.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0SL0HA" class="Cell_Text">imx185_board_setup</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0SL0HA" class="Cell_Text"><span class="Strong">Optional</span>. Called during driver initialization to perform critical one-time tasks that are not performed during normal sensor operations. Examples are reading the EEPROM/fuse ID and configuring other peripherals that are needed for sensor operations.</div></td></tr></table></div><H4 id="wwpID0E0RL0HA" class="Heading_4">Control Operations</H4><div id="wwpID0E0QL0HA" class="Body_Text">Control operations (ops) hold pointers to functions (handlers) defined by the driver, which perform specific operations on the sensor.</div><div id="wwpID0E0PL0HA" class="Body_Text">V4L2 compliant sensor drivers use many control operations, described below.</div><div id="wwpID0E0OL0HA" class="Heading_5">V4L2 Control Ops</div><div id="wwpID0E0NL0HA" class="Body_Text">V4L2 control ops communicate with the V4L2 framework. These operations are handled automatically in the Jetson V4L2 Camera Framework, and need not be added to individual sensor driver:</div><div id="wwpID0E0ML0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">v4l2_ctrl_ops</span></div><div id="wwpID0E0LL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">v4l2_subdev_ops</span></div><div id="wwpID0E0KL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">v4l2_subdev_video_ops</span></div><div id="wwpID0E0JL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">v4l2_subdev_core_ops</span></div><div id="wwpID0E0IL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span><span class="Code_Char">v4l2_subdev_pad_ops</span></div><div id="wwpID0E0HL0HA" class="Heading_5">Jetson V4L2 Camera Framework Ops</div><div id="wwpID0E0GL0HA" class="Body_Text">Jetson V4L2 Camera Framework ops update sensor settings during camera operation. For details of each control, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0EN0HA" title="Sensor Software Driver Programming">How Controls Are Implemented</a></span>.</div><div id="wwpID0E0FL0HA" class="Code">static struct tegracam_ctrl_ops imx185_ctrl_ops = {</div><div id="wwpID0E0EL0HA" class="Code">    // number of controls and control table</div><div id="wwpID0E0DL0HA" class="Code">    .numctrls = ARRAY_SIZE(ctrl_cid_list),</div><div id="wwpID0E0CL0HA" class="Code">    .ctrl_cid_list = ctrl_cid_list,</div><div id="wwpID0E0BL0HA" class="Code">&nbsp;</div><div id="wwpID0E0AL0HA" class="Code">    // Setter controls</div><div id="wwpID0E06K0HA" class="Code">    .set_gain = imx185_set_gain,</div><div id="wwpID0E05K0HA" class="Code">    .set_exposure = imx185_set_exposure,</div><div id="wwpID0E04K0HA" class="Code">    .set_frame_rate = imx185_set_frame_rate,</div><div id="wwpID0E03K0HA" class="Code">    .set_group_hold = imx185_set_group_hold,</div><div id="wwpID0E02K0HA" class="Code">&nbsp;</div><div id="wwpID0E01K0HA" class="Code">    // Fill-String controls</div><div id="wwpID0E0ZK0HA" class="Code">    .string_ctrl_size = {0, IMX185_FUSE_ID_STR_SIZE},</div><div id="wwpID0E0YK0HA" class="Code">    .fill_string_ctrl = imx185_fill_string_ctrl,</div><div id="wwpID0E0XK0HA" class="Code">};</div><div id="wwpID0E0WK0HA" class="Heading_5">Camera Common Ops</div><div id="wwpID0E0VK0HA" class="Body_Text">Camera Common ops are ops that must be implemented for each sensor driver. They are the basic functions which each sensor driver uses.</div><div id="wwpID0E0UK0HA" class="Code">static struct camera_common_sensor_ops imx185_common_ops = {</div><div id="wwpID0E0TK0HA" class="Code">    // number of formats and format table</div><div id="wwpID0E0SK0HA" class="Code">    .numfrmfmts = ARRAY_SIZE(imx185_frmfmt),</div><div id="wwpID0E0RK0HA" class="Code">    .frmfmt_table = imx185_frmfmt,</div><div id="wwpID0E0QK0HA" class="Code">&nbsp;</div><div id="wwpID0E0PK0HA" class="Code">    // power controls</div><div id="wwpID0E0OK0HA" class="Code">    .power_on = imx185_power_on,</div><div id="wwpID0E0NK0HA" class="Code">    .power_off = imx185_power_off,</div><div id="wwpID0E0MK0HA" class="Code">    .power_get = imx185_power_get,</div><div id="wwpID0E0LK0HA" class="Code">    .power_put = imx185_power_put,</div><div id="wwpID0E0KK0HA" class="Code">&nbsp;</div><div id="wwpID0E0JK0HA" class="Code">    // register read/write control</div><div id="wwpID0E0IK0HA" class="Code">    .write_reg = imx185_write_reg,</div><div id="wwpID0E0HK0HA" class="Code">    .read_reg = imx185_read_reg,</div><div id="wwpID0E0GK0HA" class="Code">&nbsp;</div><div id="wwpID0E0FK0HA" class="Code">    // device tree parsing</div><div id="wwpID0E0EK0HA" class="Code">    .parse_dt = imx185_parse_dt,</div><div id="wwpID0E0DK0HA" class="Code">&nbsp;</div><div id="wwpID0E0CK0HA" class="Code">    // Sensor streaming controls</div><div id="wwpID0E0BK0HA" class="Code">    .set_mode = imx185_set_mode,</div><div id="wwpID0E0AK0HA" class="Code">    .start_streaming = imx185_start_streaming,</div><div id="wwpID0E06J0HA" class="Code">    .stop_streaming = imx185_stop_streaming,</div><div id="wwpID0E05J0HA" class="Code">};</div><div id="wwpID0E04J0HA" class="Heading_5">v4l2_subdev_internal_ops</div><div id="wwpID0E03J0HA" class="Body_Text">V4L2 subdevice ops are used by V4L2 Framework to start the driver.</div><div id="wwpID0E02J0HA" class="Code">static const struct v4l2_subdev_internal_ops</div><div id="wwpID0E01J0HA" class="Code">        imx185_subdev_internal_ops = {</div><div id="wwpID0E0ZJ0HA" class="Code">    .open = imx185_open,</div><div id="wwpID0E0YJ0HA" class="Code">};</div><H4 id="wwpID0E0XJ0HA" class="Heading_4">Boot-Time Initialization</H4><div id="wwpID0E0WJ0HA" class="Body_Text">This section describes how the sensor driver is instantiated at kernel boot time. If all steps are performed and no errors are reported, the driver creates a new V4L2 device tree node for each sensor, and the sensors are ready for use.</div><div id="wwpID0E0VJ0HA" class="Heading_5">Control Initialization</div><div id="wwpID0E0UJ0HA" class="Body_Text">The IMX185 gives access to <span class="Code_Char">ctrl_cid_list[]</span> while registering the sensor driver. Jetson V4L2 Camera Framework iterates through the entries and sets up the controls required for the driver.</div><div id="wwpID0E0TJ0HA" class="Body_Text">The framework sets up the controls with properties specified in the device tree <span class="Code_Char">.dtsi</span> file.</div><div id="wwpID0E0SJ0HA" class="Heading_5">Device Tree Parser</div><div id="wwpID0E0RJ0HA" class="Body_Text">The <span class="Code_Char">imx185_parse_dt()</span> function parses the device tree <span class="Code_Char">.dtsi</span> file, gets the device tree node, and looks for the parameters required by the sensor driver, according to the sensor-related private data.</div><div id="wwpID0E0QJ0HA" class="Body_Text">The required parameters include, but are not limited to:</div><div id="wwpID0E0PJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>mclk</div><div id="wwpID0E0OJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>pwdn-gpios</div><div id="wwpID0E0NJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>reset-gpios</div><div id="wwpID0E0MJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>af-gpios</div><div id="wwpID0E0LJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>avdd-reg</div><div id="wwpID0E0KJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>dvdd-reg</div><div id="wwpID0E0JJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>iovdd-reg</div><div id="wwpID0E0IJ0HA" class="Body_Text">For information about how to set up device trees, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0EBHA" title="Using the Jetson-IO Tool">Device Properties</a></span>. You must match the name list with the names in the device tree to get the respective property-value pairs.</div><div id="wwpID0E0HJ0HA" class="Heading_5">Sensor-Driver Probing</div><div id="wwpID0E0GJ0HA" class="Body_Text">The <span class="Code_Char">imx185_probe()</span> function is the driver’s entry point. It first allocates memory for sensor-private data and the <span class="Code_Char">tegracam_device</span> structure, which Jetson V4L2 Camera Framework uses.</div><div id="wwpID0E0FJ0HA" class="Code">priv = devm_kzalloc(&amp;client-&gt;dev,</div><div id="wwpID0E0EJ0HA" class="Code">    sizeof(struct imx185), GFP_KERNEL);</div><div id="wwpID0E0DJ0HA" class="Code">&nbsp;</div><div id="wwpID0E0CJ0HA" class="Code">tc_dev = devm_kzalloc(&amp;client-&gt;dev,</div><div id="wwpID0E0BJ0HA" class="Code">    sizeof(struct tegracam_device), GFP_KERNEL);</div><div id="wwpID0E0AJ0HA" class="Body_Text">The function then initializes the context needed for Jetson V4L2 Camera Framework registration:</div><div id="wwpID0E06I0HA" class="Code">// I2C client passed in to probe.</div><div id="wwpID0E05I0HA" class="Code">tc_dev-&gt;i2c_client = priv-&gt;i2c_client = client;</div><div id="wwpID0E04I0HA" class="Code">&nbsp;</div><div id="wwpID0E03I0HA" class="Code">// Set the name for the tegra camera device (sensor name).</div><div id="wwpID0E02I0HA" class="Code">strncpy(tc_dev-&gt;name, "imx185", sizeof(tc_dev-&gt;name));</div><div id="wwpID0E01I0HA" class="Code">&nbsp;</div><div id="wwpID0E0ZI0HA" class="Code">// Initialize regmap configuration.</div><div id="wwpID0E0YI0HA" class="Code">tc_dev-&gt;dev_regmap_config = &amp;sensor_regmap_config;</div><div id="wwpID0E0XI0HA" class="Code">&nbsp;</div><div id="wwpID0E0WI0HA" class="Code">// Initialize sensor common ops and tegra camera control ops.</div><div id="wwpID0E0VI0HA" class="Code">tc_dev-&gt;sensor_ops = &amp;imx185_common_ops;</div><div id="wwpID0E0UI0HA" class="Code">tc_dev-&gt;tcctrl_ops = &amp;imx185_ctrl_ops;</div><div id="wwpID0E0TI0HA" class="Body_Text">It then registers the device as a Tegra camera device using Jetson V4L2 Camera Framework.</div><div id="wwpID0E0SI0HA" class="Code">// Register device to initialize the framework context.</div><div id="wwpID0E0RI0HA" class="Code">// and v4l2 subdevice information.</div><div id="wwpID0E0QI0HA" class="Code">tegracam_device_register(tc_dev);</div><div id="wwpID0E0PI0HA" class="Code">&nbsp;</div><div id="wwpID0E0OI0HA" class="Code">// Set sensor data as private data of tc_dev.</div><div id="wwpID0E0NI0HA" class="Code">tegracam_set_privdata(tc_dev, (void *)priv);</div><div id="wwpID0E0MI0HA" class="Code">&nbsp;</div><div id="wwpID0E0LI0HA" class="Code">// Run board setup to ensure the sensor hardware is accessible.</div><div id="wwpID0E0KI0HA" class="Code">imx185_board_setup();</div><div id="wwpID0E0JI0HA" class="Body_Text">Finally it registers the device as a V4L2 subdevice.</div><div id="wwpID0E0II0HA" class="Code">// Once setup is successful, register the driver with V4L2 framework.</div><div id="wwpID0E0HI0HA" class="Code">tegracam_v4l2subdev_register(tc_dev, true);</div><H4 id="wwpID0E0GI0HA" class="Heading_4">Removing Sensor Drivers</H4><div id="wwpID0E0FI0HA" class="Body_Text">The <span class="Code_Char">imx185_remove()</span> function removes the sensor device instance. The framework calls it on device shutdown.</div><div id="wwpID0E0EI0HA" class="Body_Text">The functions below unregister the sensor as a V4L2 subdevice and unregister the driver from Jetson V4L2 Camera Framework.</div><div id="wwpID0E0DI0HA" class="Code">tegracam_v4l2subdev_unregister(priv-&gt;tc_dev);</div><div id="wwpID0E0CI0HA" class="Code">tegracam_device_unregister(priv-&gt;tc_dev);</div><H3 id="wwpID0E0BI0HA" class="Heading_3">Loadable Kernel Module (LKM)</H3><div id="wwpID0E0AI0HA" class="Body_Text">A loadable kernel module (LKM) is a mechanism for adding code to, or removing code from, the Linux kernel at run time. </div><div id="wwpID0E06H0HA" class="Body_Text">A sensor driver that uses the Jetson V4L2 Camera Framework can now be built as a loadable kernel module. The sensor driver need not be changed.</div><div id="wwpID0E05H0HA" class="Body_Text">LKM is very helpful during sensor driver development, especially for debugging. Rather than flash a new kernel image to the Jetson device, you can simply unload the driver, update and rebuild the driver, and load the rebuilt driver back into the Linux kernel.</div><div id="wwpID0E04H0HA" class="Heading_5">To configure a sensor driver as a loadable module</div><div id="wwpID0E03H0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Place this setting in the kernel configuration file, replacing the previous <span class="Code_Char">CONFIG_VIDEO</span> setting for the camera (if any): </div><div id="wwpID0E02H0HA" class="Code">CONFIG_VIDEO &lt;camera&gt;=m</div><div id="wwpID0E01H0HA" class="List_Continue">Where <span class="Code_Char">&lt;camera&gt;</span> is the name of the camera, e.g. <span class="Code_Char">imx185</span>.</div><div id="wwpID0E0ZH0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Rebuild the kernel and the sensor driver.</div><div id="wwpID0E0YH0HA" class="List_Continue">When the sensor driver has been rebuilt, you may find it at:</div><div id="wwpID0E0XH0HA" class="Code">&lt;OUT&gt;/nvidia/kernel/drivers/media/i2c/&lt;camera&gt;.ko</div><div id="wwpID0E0WH0HA" class="Body_Text">Now you can copy the sensor driver to the Jetson device’s file system and load it, as described in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E0UH0HA" title="Sensor Software Driver Programming">To load a new sensor module</a></span>.</div><div id="wwpID0E0VH0HA" class="Body_Text">Alternatively, you can make the Linux kernel load your sensor drover automatically by rebuilding the kernel image and flashing the Jetson device.</div><div id="wwpID0E0UH0HA" class="Heading_5">To load a new sensor module</div><div id="wwpID0E0TH0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Copy the sensor driver file (<span class="Code_Char">&lt;camera&gt;.ko</span>, built by <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.1.html#wwpID0E04H0HA" title="Sensor Software Driver Programming">To configure a sensor driver as a loadable module</a></span>) to the Jetson device’s filesystem.</div><div id="wwpID0E0SH0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>To unload the old sensor module, enter this command:</div><div id="wwpID0E0RH0HA" class="Code">sudo rmmod &lt;sensor_LKM_module_basename&gt;</div><div id="wwpID0E0QH0HA" class="List_Continue">(The basename is the filename without the <span class="Code_Char">.ko</span> extension.)</div><div id="wwpID0E0PH0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>To load the new sensor module, enter this command:</div><div id="wwpID0E0OH0HA" class="Code">sudo insmod &lt;path_to_sensor_drive_file&gt;</div><H3 id="wwpID0E0NH0HA" class="Heading_3">Kernel Configuration</H3><div id="wwpID0E0MH0HA" class="Body_Text">When you have finished developing the driver, add the new device information to the kernel configuration file so it can be enabled for the kernel, as follows:</div><div id="wwpID0E0LH0HA" class="Body_Text_Indent"><span class="Code_Char">CONFIG_VIDEO &lt;camera&gt;=y</span><br /><span class="Emphasis">or</span><br /><span class="Code_Char">CONFIG_VIDEO_&lt;camera&gt;=m</span> (for a loadable kernel module)</div><div id="wwpID0E0KH0HA" class="List_Continue" style="text-indent: 0pt">Where <span class="Code_Char">&lt;camera&gt;</span> is the name of the camera, e.g. <span class="Code_Char">imx185</span>.</div><div id="wwpID0E0JH0HA" class="Body_Text">The kernel configuration file is at:</div><div id="wwpID0E0IH0HA" class="Code">&lt;top&gt;/kernel/kernel-4.9/arch/arm64/configs/tegra_defconfig</div><H3 id="wwpID0E0HH0HA" class="Heading_3">Device Registration</H3><div id="wwpID0E0GH0HA" class="Body_Text">After driver development is complete, you must also add the new device information to the system kernel device tree so it can be registered (instantiated) when the kernel boots. There are two ways of registering your device.</div><H4 id="wwpID0E0FH0HA" class="Heading_4">Using Plugin Manager</H4><div id="wwpID0E0EH0HA" class="Body_Text">If your camera module has on-board EEPROM and is programmed with a valid camera ID, you can use Plugin Manager to register it. If your device module does not meet these requirements, use the main platform device tree instead by following the directions in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/camera_sensor_prog.47.2.html#wwpID0E0MG0HA" title="Using the Jetson-IO Tool">Using the Main Platform Device Tree File</a></span>.</div><div id="wwpID0E0DH0HA" class="Body_Text">Plugin Manager automatically links devices when the system kernel boots. Plugin Manager uses the camera module ID returned by Bootloader to update the device tree entries with proper information at runtime. Plugin Manager allows a single system image to support multiple camera devices. To change camera modules, power down the device, replace the camera module, and then reboot. The new module works automatically.</div><div id="wwpID0E0CH0HA" class="Heading_5">Prerequisites</div><div id="wwpID0E0BH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #004831; font-size: 10pt">•	</span></span>You have obtained the kernel source files. For more information, see Synchronizing the Kernel.</div><div id="wwpID0E0AH0HA" class="Heading_5">To use Plugin Manager support</div><div id="wwpID0E06G0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Add your <span class="Code_Char">.dtsi</span> file to the camera configuration <span class="Code_Char">.dtsi</span> file.</div><div id="wwpID0E05G0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Set the status of your device tree nodes to “disabled”:</div><div id="wwpID0E04G0HA" class="Code">    imx185_cam0: imx185_a@1a {</div><div id="wwpID0E03G0HA" class="Code">        status = "disabled";</div><div id="wwpID0E02G0HA" class="Code">    };</div><div id="wwpID0E01G0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Add the override information to:</div><div id="wwpID0E0ZG0HA" class="Code_Indent">&lt;top&gt;/hardware/nvidia/platform/t19x/common/kernel-dts/t19x-common-modules/tegra194-camera-plugin-manager.dtsi</div><div id="wwpID0E0YG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Update the camera Plugin Manager <span class="Code_Char">.dtsi</span> with proper override information.</div><div id="wwpID0E0XG0HA" class="Code">fragment-imx185@0 {</div><div id="wwpID0E0WG0HA" class="Code">    ids = "LPRD-002001";</div><div id="wwpID0E0VG0HA" class="Code">    override@0 {</div><div id="wwpID0E0UG0HA" class="Code">        target = &lt;&amp;imx185_cam0&gt;;</div><div id="wwpID0E0TG0HA" class="Code">        _overlay_ {</div><div id="wwpID0E0SG0HA" class="Code">            status = "okay";</div><div id="wwpID0E0RG0HA" class="Code">        };</div><div id="wwpID0E0QG0HA" class="Code">    };</div><div id="wwpID0E0PG0HA" class="Code">    . . .</div><div id="wwpID0E0OG0HA" class="Code">};</div><div id="wwpID0E0NG0HA" class="Body_Text">If a specific camera board is found when the kernel boots, the override data is applied to the specific device tree nodes, and they are made available for the system.</div></div><div id="page_dates"></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></body></html>