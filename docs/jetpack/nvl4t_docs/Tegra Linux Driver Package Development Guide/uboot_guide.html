<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- NVIDIA customization --><title>NVIDIA Jetson Linux Driver Package Software Features : Bootloader | NVIDIA Docs </title><link rel="Prev" href="bootloader_update_agx_tx2.html" title="Previous" /><link rel="Next" href="mb1_platform_config.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/uboot_guide.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="pc1c9_002fhuLEt7thfNnr_002fX0PA" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="fa"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --></header><div id="page_content_container" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px"><div id="page_content"><H1 id="wwpID0E0RM0HA" class="Heading_2_Top">U-Boot Customization</H1><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0OM0HA">Requirements</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA">Placeholders in Commands</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0UL0HA">Downloading and Building U-Boot</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0SL0HA">Prerequisite</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0MK0HA">Before Flashing</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0BK0HA">Flashing U-Boot Full Jetson Linux Driver Package Image</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0GJ0HA">Flashing U-Boot Only</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0AJ0HA">Changing the Boot Memory Device Partition Layout</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0TI0HA">eMMC IC Property</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0KI0HA">Root Filesystem Size</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0FI0HA">GPT Partitions</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E06H0HA">LNX Partition</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E04H0HA">APP Partition</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YH0HA">Full Boot Memory Device Partition Layout</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0UH0HA">Building the Device Tree Compiler</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E06G0HA">Replacing the Kernel</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0MG0HA">Copying the Root Filesystem</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0KG0HA">Boot Sequence and Sysboot Configuration Files</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E03F0HA">Optimizing U-Boot Boot Time</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YF0HA">Disabling PCIe Support</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0MF0HA">Enabling/Disabling ASPM Support</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E05E0HA">Disabling USB Support</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0SE0HA">Environment Configuration</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0NE0HA">Setting Environment Variables</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0IE0HA">Compile Time</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0CE0HA">Manufacturing and Flashing Time</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YD0HA">extlinux.conf</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0EC0HA">Debugging in the U-Boot Environment</a></div></dd></dl></dl></div><div id="wwpID0E0QM0HA" class="List_Continue"><span class="Strong">Applies to</span>: NVIDIA<span style="vertical-align: super">®</span> Jetson Nano™ devices, NVIDIA<span style="vertical-align: super">®</span> Jetson™ TX2 series, and NVIDIA<span style="vertical-align: super">®</span> Jetson TX1</div><div id="wwpID0E0PM0HA" class="Body_Text">U-Boot is the default bootloader for NVIDIA<span style="vertical-align: super">®</span>&nbsp;Jetson™&nbsp;Linux&nbsp;Driver&nbsp;Package (L4T) on supported platforms.</div><H3 id="wwpID0E0OM0HA" class="Heading_3">Requirements</H3><div id="wwpID0E0NM0HA" class="Body_Text">The software requirements and prerequisites include:</div><div id="wwpID0E0MM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Linux-based host system</div><div id="wwpID0E0LM0HA" class="List_Continue">Functionality of the U-Boot build and flashing utilities are validated using an Ubuntu host system. Later versions of Ubuntu, or alternative Linux distributions, may work with host-specific modifications.</div><div id="wwpID0E0KM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Jetson Linux Driver Package (L4T)</div><div id="wwpID0E0JM0HA" class="List_Continue">Download and install the latest L4T package from NVIDIA Developer Zone:</div><div id="wwpID0E0IM0HA" class="Code"><span class="Weblink"><a href="http://developer.nvidia.com/linux-tegra" target="external_window">http://developer.nvidia.com/linux-tegra </a></span></div><div id="wwpID0E0HM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Device Tree Compiler (DTC)</div><div id="wwpID0E0GM0HA" class="List_Continue">The DTC is used to compile device tree files contained in the U-Boot source tree. For a detailed example of building DTC from source see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0UH0HA" title="U-Boot Customization">Building Device Tree Compiler</a></span>.</div><div id="wwpID0E0FM0HA" class="List_Continue">You must use the pre-built DTC binary that is included in the <span class="Code_Char">kernel</span> directory of the release. Many of the DTC packages available from standard Linux distribution package management systems, like APT, are not updated with a version of DTC that supports the features required by the U‑Boot makefile.</div><div id="wwpID0E0EM0HA" class="List_Continue">The pre-built DTC binary is built from the kernel sources in this release. The sources are located in the <span class="Code_Char">scripts/dtc</span> directory. You build DTC by building the kernel <span class="Code_Char">dtbs</span> target.</div><div id="wwpID0E0DM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The Linaro Aarch64 toolchain</div><div id="wwpID0E0CM0HA" class="List_Continue">The toolchain is available for downloading at:</div><div id="wwpID0E0BM0HA" class="Code"><span class="Hyperlink"><a href="https://www.linaro.org/downloads/" target="external_window">https://www.linaro.org/downloads/</a></span></div><div id="wwpID0E0AM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>U‑Boot source</div><div id="wwpID0E06L0HA" class="List_Continue">For information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Downloading and Building U-Boot</a></span>.</div><div id="wwpID0E05L0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Kernel source</div><div id="wwpID0E04L0HA" class="List_Continue">For information, see:</div><div id="wwpID0E03L0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="color: #000000">•	</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/rootfs_custom.html#wwpID0E0RG0HA" title="Setting Up Your File System">Setting up the Root File System</a></span></div><div id="wwpID0E02L0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Downloading and Building U-Boot</a></span></div><div id="wwpID0E01L0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/kernel_custom.html#wwpID0E0WD0HA" title="Kernel Customization">Building the NVIDIA Kernel</a></span></div><div id="wwpID0E0ZL0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0BK0HA" title="U-Boot Customization">Adding a Compiled Kernel to the Root File System</a></span></div><H3 id="wwpID0E0YL0HA" class="Heading_3">Placeholders in Commands</H3><div id="wwpID0E0XL0HA" class="Body_Text">This topic describes many commands that use these the placeholders <span class="Code_Char">&lt;board&gt;</span> and <span class="Code_Char">&lt;board_and_rev&gt;</span>. Substitute the values in this table:</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54.9pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 144pt"><div id="wwpID0EACE0WL0HA" class="Cell_Heading">Platform</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 108pt"><div id="wwpID0EABE0WL0HA" class="Cell_Heading"><span class="Code_Char">&lt;board&gt;</span></div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 108pt"><div id="wwpID0EAAE0WL0HA" class="Cell_Heading"><span class="Code_Char">&lt;board_and_rev&gt;</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACD0WL0HA" class="Cell_Text">Jetson Nano</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0WL0HA" class="Cell_Text"><span class="Code_Char">p3450-0000</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0WL0HA" class="Cell_Text"><span class="Code_Char">p3450-0000</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACC0WL0HA" class="Cell_Text">Jetson Nano 2GB</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0WL0HA" class="Cell_Text"><span class="Code_Char">p3451-0000</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0WL0HA" class="Cell_Text"><span class="Code_Char">p3451-0000</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACB0WL0HA" class="Cell_Text">Jetson TX2 series</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0WL0HA" class="Cell_Text"><span class="Code_Char">p2771-0000</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0WL0HA" class="Cell_Text"><span class="Code_Char">p2771-0000-500</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACA0WL0HA" class="Cell_Text">Jetson TX1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0WL0HA" class="Cell_Text"><span class="Code_Char">p2371-2180</span></div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0WL0HA" class="Cell_Text"><span class="Code_Char">p2371-2180</span></div></td></tr></table></div><div id="wwpID0E0VL0HA" class="Body_Text"><span class="Code_Char" style="font-family: &quot;Palatino Linotype&quot;">Other placeholders are described in each section that uses them.</span></div><H3 id="wwpID0E0UL0HA" class="Heading_3">Downloading and Building U-Boot</H3><div id="wwpID0E0TL0HA" class="Body_Text">Before flashing U-Boot to your reference platform, you must download and build it on your Linux host system. NVIDIA offers a Git repository containing the source code for a version of U‑Boot suitable for L4T.</div><H4 id="wwpID0E0SL0HA" class="Heading_4">Prerequisite</H4><div id="wwpID0E0RL0HA" class="Body_Text">Before overwriting the U-Boot binaries with the extracted L4T release package, back up all of the original U-Boot files in:</div><div id="wwpID0E0QL0HA" class="Code">Linux_for_Tegra/bootloader/&lt;platform&gt;/&lt;board_and_rev&gt;/</div><div id="wwpID0E0PL0HA" class="Body_Text">Where:</div><div id="wwpID0E0OL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;platform&gt;</span> is the SoC name or platform.</div><div id="wwpID0E0NL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;board_and_rev&gt;</span> is described in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Placeholders in Commands</a></span>.</div><div id="wwpID0E0ML0HA" class="Heading_5">To download and build U-Boot</div><div id="wwpID0E0LL0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Perform either of the following steps:</div><div id="wwpID0E0KL0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Run the command:</div><div id="wwpID0E0JL0HA" class="Code_Indent">$ git clone -n git://nv-tegra.nvidia.com/3rdparty/u-boot.git</div><div id="wwpID0E0IL0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Run the <span class="Code_Char">source_sync.sh</span> script from the in which you want to place the L4T release package.</div><div id="wwpID0E0HL0HA" class="List_Continue_2">If you run <span class="Code_Char">source_sync.sh –u</span> without parameters, the script prompts for the <span class="Code_Char">&lt;tag_name&gt;</span>, which is the release tag name as provided in the <span class="Emphasis">Release Notes</span>.</div><div id="wwpID0E0GL0HA" class="List_Continue_2">The <span class="Code_Char">-k</span> option to <span class="Code_Char">source_sync</span> syncs the kernel sources. A space between the <span class="Code_Char">-u</span> and <span class="Code_Char">-k</span> options is allowed. By default, if no option is provided, the script syncs the kernel and U-Boot sources.</div><div id="wwpID0E0FL0HA" class="List_Continue_2">Also, you can run the script by passing the <span class="Code_Char">&lt;tag_name&gt;</span> as follows:</div><div id="wwpID0E0EL0HA" class="Code_Indent">$ cd &lt;your_L4T_root&gt;/Linux_for_Tegra</div><div id="wwpID0E0DL0HA" class="Code_Indent">$ ./source_sync.sh –u &lt;tag_name&gt;</div><div id="wwpID0E0CL0HA" class="List_Continue_2">This syncs the source to the following location, relative to the location of <span class="Code_Char">source_sync.sh</span>:</div><div id="wwpID0E0BL0HA" class="Code_Indent">sources/u-boot_source </div><div id="wwpID0E0AL0HA" class="List_Continue_2">The U‑Boot source code is placed in this directory, relative to the location of the L4T release package:</div><div id="wwpID0E06K0HA" class="Code_Indent">Linux_for_Tegra/sources/u-boot_source</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 59.4pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA05K0HA" class="Note_Image">Note</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 319.5pt"><div id="wwpID0EAAA05K0HA" class="Note_b">The rest of these instructions assume your current working directory is the U-Boot source tree.</div></td></tr></table></div><div id="wwpID0E04K0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Check out the Git tag name:</div><div id="wwpID0E03K0HA" class="Code">$ git checkout –b &lt;branch_name&gt; &lt;tag_name&gt;</div><div id="wwpID0E02K0HA" class="List_Continue">Where:</div><div id="wwpID0E01K0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;branch_name&gt;</span> is the name of your local branch.</div><div id="wwpID0E0ZK0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;tag_name&gt;</span> is the release tag name as provided in the <span class="Emphasis">Release Notes</span>.</div><div id="wwpID0E0YK0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Set the build environment:</div><div id="wwpID0E0XK0HA" class="Code">$ export CROSS_COMPILE=&lt;cross_prefix&gt;</div><div id="wwpID0E0WK0HA" class="Number_Continue">Where:</div><div id="wwpID0E0VK0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;cross_prefix&gt;</span> is the absolute path to the ARM64 toolchain without the <span class="Code_Char">.gcc</span> suffix. For example, for the reference ARM64 toolchain, <span class="Code_Char">&lt;cross_prefix&gt;</span> is:</div><div id="wwpID0E0UK0HA" class="Code_Indent">&lt;toolchain_install_path&gt;/bin/aarch64-linux-gnu-</div><div id="wwpID0E0TK0HA" class="List_Continue_2">See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/xavier_toolchain.html#" title="Jetson Linux Toolchain">Jetson Linux Toolchain</a></span> for information on how to download the reference toolchain.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 77.4pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0SK0HA" class="Note_Image">Note</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 310.5pt"><div id="wwpID0EAAA0SK0HA" class="Note_Text">NVIDIA recommends using the Linaro 7.3.1 2018.05 toolchain.</div></td></tr></table></div><div id="wwpID0E0RK0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Build U-Boot by executing:</div><div id="wwpID0E0QK0HA" class="Code">$ make distclean</div><div id="wwpID0E0PK0HA" class="Code">$ make &lt;<span class="Hyperlink">board_and_rev</span>&gt;_defconfig</div><div id="wwpID0E0OK0HA" class="Code">$ make</div><div id="wwpID0E0NK0HA" class="List_Continue">Where <span class="Code_Char">&lt;board_and_rev&gt;</span> is described in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Placeholders in Commands</a></span>.</div><H4 id="wwpID0E0MK0HA" class="Heading_4">Before Flashing</H4><div id="wwpID0E0LK0HA" class="Body_Text">Before flashing, you must copy the updated U-Boot binary to the L4T tree.</div><div id="wwpID0E0KK0HA" class="Heading_5">To copy the updated U-Boot for flashing to the reference platform</div><div id="wwpID0E0JK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Run this command on your Linux host system:</div><div id="wwpID0E0IK0HA" class="Code">$ cp &lt;uboot_src_dir&gt;/u-boot{,.bin,.dtb,-dtb.bin} \</div><div id="wwpID0E0HK0HA" class="Code">&lt;your_L4T_root&gt;/Linux_for_Tegra/bootloader/&lt;platform&gt;/&lt;<span class="Hyperlink">board_and_rev</span>&gt;</div><div id="wwpID0E0GK0HA" class="List_Continue">Where:</div><div id="wwpID0E0FK0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;uboot_src_dir&gt;</span> is <span class="Code_Char">&lt;your_L4T_root&gt;/Linux_for_Tegra/sources/u-boot_source</span>.</div><div id="wwpID0E0EK0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;your_L4T_root&gt;</span> is the location of the L4T release package.</div><div id="wwpID0E0DK0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;platform&gt;</span> is the SoC name or platform.</div><div id="wwpID0E0CK0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;board_and_rev&gt;</span> is described in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Placeholders in Commands</a></span>.</div><H3 id="wwpID0E0BK0HA" class="Heading_3">Flashing U-Boot Full Jetson Linux Driver Package Image</H3><div id="wwpID0E0AK0HA" class="Body_Text">At boot time, U-Boot fetches the boot configuration file, kernel and device tree, which can reside on the <span class="Strong">boot storage device</span>:</div><div id="wwpID0E06J0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>An SD card for Jetson Nano 2GB (P3448-0003) or the original Jetson Nano development module (P3448-0000)</div><div id="wwpID0E05J0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Internal eMMC memory for Jetson TX2 or Jetson TX1</div><div id="wwpID0E04J0HA" class="Body_Text">When you execute the script that flashes U-Boot, specify a command line option to identify the storage device containing the root filesystem. This enables the script to select the appropriate boot configuration file. The boot configuration file contains kernel command line parameters that control where the Linux kernel looks for the root filesystem. </div><div id="wwpID0E03J0HA" class="Heading_5">To flash U-Boot and select the script to mount the root filesystem from internal eMMC</div><div id="wwpID0E01J0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Select a boot configuration file that causes the kernel to mount the root filesystem from the boot storage device.</div><div id="wwpID0E0ZJ0HA" class="List_Continue">For an SD card on a Jetson Nano device:</div><div id="wwpID0E0YJ0HA" class="Code">$ sudo ./flash.sh &lt;platform&gt; mmcblk0p1</div><div id="wwpID0E0XJ0HA" class="List_Continue">For eMMC memory on Jetson TX2 or Jetson TX1:</div><div id="wwpID0E0WJ0HA" class="Code">$ sudo ./flash.sh &lt;<span class="Hyperlink">platform</span>&gt; mmcblk0p1</div><div id="wwpID0E0VJ0HA" class="List_Continue">Where <span class="Code_Char">&lt;platform&gt;</span> is the SoC name or platform.</div><div id="wwpID0E0UJ0HA" class="Heading_5">To flash U-Boot and select the script to mount the root filesystem from an NFS server</div><div id="wwpID0E0TJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Select a boot configuration file that causes the kernel to mount the root filesystem from an NFS server:</div><div id="wwpID0E0SJ0HA" class="Code">$ sudo ./flash.sh –N &lt;IPA&gt;:/&lt;<span class="Code_Char">nfs directory</span>&gt; [-n &lt;target IPA&gt;:&lt;host IPA&gt;:&lt;gateway IPA&gt;:&lt;netmask&gt;] &lt;<span class="Hyperlink">platform</span>&gt; &lt;interface name&gt;</div><div id="wwpID0E0RJ0HA" class="List_Continue">Where: </div><div id="wwpID0E0QJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;IPA&gt;</span> is the NFS server hosting the root filesystem.</div><div id="wwpID0E0PJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;nfs_directory&gt;</span> is the full pathname of exported root filesystem.</div><div id="wwpID0E0OJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;target IPA&gt;</span> is the static IP address for the target device.</div><div id="wwpID0E0NJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;host IPA&gt;</span> is the static IP address for the NFS server.</div><div id="wwpID0E0MJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;gateway IPA&gt;</span> is the static IP address for the gateway.</div><div id="wwpID0E0LJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;netmask&gt;</span> is the static netmask for the local network.</div><div id="wwpID0E0KJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;platform&gt;</span> is the SoC name or platform.</div><div id="wwpID0E0JJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;interface name&gt;</span> is <span class="Code_Char">eth0</span> for RJ45 connector and <span class="Code_Char">eth1</span> for a USB Ethernet dongle (supported on Jetson TX2 series only).</div><div id="wwpID0E0IJ0HA" class="Normal" style="margin-top: 8pt">&nbsp;</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0HJ0HA" class="Note_Image">Note</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA0HJ0HA" class="Note_Text">The <span class="Code_Char">-n</span> option is recommended on point-to-point network connections where no DHCP server is configured.</div></td></tr></table></div><H3 id="wwpID0E0GJ0HA" class="Heading_3">Flashing U-Boot Only</H3><div id="wwpID0E0FJ0HA" class="Body_Text">To flash the full Jetson Linux Driver Package (L4T) image to the reference platform, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0BK0HA" title="U-Boot Customization">Flashing U-Boot Full Jetson Linux Driver Package Image,</a></span> above.</div><div id="wwpID0E0EJ0HA" class="Heading_5">To flash the new version of U-Boot</div><div id="wwpID0E0DJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Run the command:</div><div id="wwpID0E0CJ0HA" class="Code">$ sudo ./flash.sh -k LNX &lt;platform&gt; mmcblk0p1</div><div id="wwpID0E0BJ0HA" class="List_Continue">Where <span class="Code_Char">&lt;platform&gt;</span> is the SoC name or platform.</div><H3 id="wwpID0E0AJ0HA" class="Heading_3">Changing the Boot Memory Device Partition Layout</H3><div id="wwpID0E06I0HA" class="Body_Text">This topic is based on SD card or eMMC hardware and software layout information in the following files.</div><div id="wwpID0E05I0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano devices:</div><div id="wwpID0E04I0HA" class="Code">Linux_for_Tegra/p3448-0000.conf.common</div><div id="wwpID0E03I0HA" class="Code">Linux_for_Tegra/bootloader/&lt;platform&gt;/cfg/flash_l4t_t210_spi_sd_p3448.xml</div><div id="wwpID0E02I0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson TX2 series:</div><div id="wwpID0E01I0HA" class="Code">Linux_for_Tegra/p2771-0000.conf.common </div><div id="wwpID0E0ZI0HA" class="Code">Linux_for_Tegra/bootloader/&lt;platform&gt;/cfg/flash_l4t_t186.xml</div><div id="wwpID0E0YI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson TX1:</div><div id="wwpID0E0XI0HA" class="Code">Linux_for_Tegra/p2371-2180-devkit.conf</div><div id="wwpID0E0WI0HA" class="Code">Linux_for_Tegra/bootloader/&lt;platform&gt;/cfg/gnu_linux_tegraboot_emmc_full.xml</div><div id="wwpID0E0VI0HA" class="Body_Text">Where <span class="Code_Char">&lt;platform&gt;</span> is the SoC name or platform.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0UI0HA" class="Note_Image">Note</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA0UI0HA" class="Note_Text">The kernel is installed into the filesystem alongside the boot configuration file. The kernel (LNX) partition contains U-Boot.</div></td></tr></table></div><H4 id="wwpID0E0TI0HA" class="Heading_4">eMMC IC Property</H4><div id="wwpID0E0SI0HA" class="List_Continue"><span class="Strong">Applies to</span>: Jetson TX2 series and Jetson TX1</div><div id="wwpID0E0RI0HA" class="Body_Text">The eMMC IC property is determined by two variables in the <span class="Code_Char">Linux_for_Tegra/&lt;target_board&gt;.conf.common</span>:</div><div id="wwpID0E0QI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">BOOTPARTSIZE</span>: Specifies the eMMC boot partition size, which is boot0 partition size + boot1 partition size.</div><div id="wwpID0E0PI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">EMMCSIZE</span>: Specifies the eMMC usable data size, which is BOOTPARTSIZE + user partition size.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0OI0HA" class="Note_Image">Note</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA0OI0HA" class="Note_Text">boot0, boot1, and user partition size can be obtained from the eMMC device datasheet.</div></td></tr></table></div><div id="wwpID0E0NI0HA" class="Body_Text">The eMMC IC property:</div><div id="wwpID0E0MI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Limits the size of the total usable data area</div><div id="wwpID0E0LI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Determines the location of GPT partitions</div><H4 id="wwpID0E0KI0HA" class="Heading_4">Root Filesystem Size</H4><div id="wwpID0E0JI0HA" class="Body_Text">The root filesystem partition is the largest of the partitions. The size of this partition is one of the key factors in partition layout determination. </div><div id="wwpID0E0II0HA" class="Heading_5">To modify the root filesystem partition size</div><div id="wwpID0E0HI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Modify the value of the <span class="Code_Char">ROOTFSSIZE</span> variable in the <span class="Code_Char">Linux_for_Tegra/&lt;target_board&gt;.conf.common</span> file.<br /></div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0GI0HA" class="Note_Image">Note</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA0GI0HA" class="Note_Text">The total space used by all partitions cannot exceed <span class="Code_Char">EMMCSIZE</span>.</div></td></tr></table></div><H4 id="wwpID0E0FI0HA" class="Heading_4">GPT Partitions</H4><div id="wwpID0E0EI0HA" class="Body_Text">The <span class="Code_Char">flash.sh</span> script creates the primary and secondary GPT partitions automatically, based on the layout of the boot memory device partition. </div><div id="wwpID0E0DI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The protective MBR contains device information to prevent traditional bootloaders from performing destructive actions. It is located at Logical Block Address (LBA) 0.</div><div id="wwpID0E0CI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The primary GPT partition contains the GUID Partition Table. It is located at LBA 1.</div><div id="wwpID0E0BI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The secondary GPT partition contains the same information as the primary GPT and serves as a backup. It is located at the last LBA of the boot device.</div><div id="wwpID0E0AI0HA" class="List_Continue">The last LBA varies from device to device. Both U-Boot and the kernel are able to obtain the last LBA.</div><H4 id="wwpID0E06H0HA" class="Heading_4">LNX Partition</H4><div id="wwpID0E05H0HA" class="Body_Text">The LNX partition ordinarily contains the kernel. When the bootloader is U‑Boot, however, this partition contains U-Boot, and U-Boot reads the kernel from the root filesystem.</div><H4 id="wwpID0E04H0HA" class="Heading_4">APP Partition</H4><div id="wwpID0E03H0HA" class="Body_Text">If root filesystem storage is on the boot storage device, the root filesystem is flashed to this partition. U-Boot expects the boot configuration file and kernel files to exist in the <span class="Code_Char">&lt;rootfs&gt;/boot</span> directory. The <span class="Code_Char">flash.sh</span> script flashes the following kernel files in the APP partition:</div><div id="wwpID0E02H0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>kernel (<span class="Code_Char">Image)</span></div><div id="wwpID0E01H0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Body_Text_Char">boot configuration file</span> (<span class="Code_Char">extlinux/extlinux.conf</span>)<br /></div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0ZH0HA" class="Note_Image">Note</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA0ZH0HA" class="Note_Text">The <span class="Code_Char">flash.sh</span> script treats the root filesystem-on-IP-network configuration as a special case. It flashes these kernel files in the <span class="Code_Char">&lt;APP partition&gt;:/boot</span> directory.</div></td></tr></table></div><H4 id="wwpID0E0YH0HA" class="Heading_4">Full Boot Memory Device Partition Layout</H4><div id="wwpID0E0XH0HA" class="Body_Text">For an example of a boot storage device configuration file, see:</div><div id="wwpID0E0WH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano devices: <span class="Code_Char">flash_l4t_t210_spi_sd_p3448.xml</span></div><div id="wwpID0E0VH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson TX2 series: <span class="Code_Char">flash_l4t_t186.xml</span></div><H3 id="wwpID0E0UH0HA" class="Heading_3">Building the Device Tree Compiler</H3><div id="wwpID0E0TH0HA" class="Body_Text">The Device Tree Compiler (DTC) must be built from source code. </div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0SH0HA" class="Note_Image">Note</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA0SH0HA" class="Note_Text">If you do not want to pass in the DTC filename as a parameter to the U‑Boot environment, ensure that a local directory which contains DTC, such as <span class="Code_Char">/usr/local/bin/</span>, is at the beginning of the shell command path.</div></td></tr></table></div><div id="wwpID0E0RH0HA" class="Heading_5">To build DTC from source</div><div id="wwpID0E0OH0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Run these commands to download the DTC source code and go to the directory is the root of the DTC source tree:</div><div id="wwpID0E0NH0HA" class="Code">$ git clone git://git.kernel.org/pub/scm/utils/dtc/dtc.git</div><div id="wwpID0E0MH0HA" class="Code">$ cd dtc</div><div id="wwpID0E0LH0HA" class="List_Continue">The rest of this procedure assumes that your current working directory is the DTC source tree.</div><div id="wwpID0E0KH0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Run this command to build DTC:</div><div id="wwpID0E0JH0HA" class="Code">$ make</div><div id="wwpID0E0IH0HA" class="List_Continue">To build DTC in the default directory <span class="Code_Char">$HOME</span>, run:</div><div id="wwpID0E0HH0HA" class="Code">$ make install</div><div id="wwpID0E0GH0HA" class="List_Continue">To build DTC in a specific directory, run:</div><div id="wwpID0E0FH0HA" class="Code">$ make install PREFIX=/usr/local</div><div id="wwpID0E0EH0HA" class="List_Continue">Where <span class="Code_Char">PREFIX</span> specifies the pathname of the directory.</div><div id="wwpID0E0DH0HA" class="List_Continue">In any case<span class="Body_Text_Char">, </span><span class="Code_Char">make</span><span class="Body_Text_Char"> builds the following directories </span>below the installation directory:</div><div id="wwpID0E0CH0HA" class="Code">bin</div><div id="wwpID0E0BH0HA" class="Code">lib</div><div id="wwpID0E0AH0HA" class="Code">include</div><H3 id="wwpID0E06G0HA" class="Heading_3">Replacing the Kernel</H3><div id="wwpID0E05G0HA" class="Body_Text">You can replace the kernel with your own custom kernel. Use the procedure that applies to your device’s type of boot storage device.</div><div id="wwpID0E04G0HA" class="Heading_5">To replace the kernel directly on a live system</div><div id="wwpID0E03G0HA" class="Body_Text">You can use this process on SD card and USB storage boot memory devices.</div><div id="wwpID0E02G0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Boot the Jetson device.</div><div id="wwpID0E01G0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the new kernel files, using <span class="Code_Char">scp</span>, into <span class="Code_Char">/boot</span> directory on the Jetson device.</div><div id="wwpID0E0ZG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Reboot the Jetson device.</div><div id="wwpID0E0YG0HA" class="Heading_5">To replace the kernel on a system that boots from an SD card or USB device</div><div id="wwpID0E0XG0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Connect the boot memory device (SD card or USB device) to your host system.</div><div id="wwpID0E0WG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the new kernel files to the <span class="Code_Char">/boot</span> directory on the boot memory device.</div><div id="wwpID0E0VG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Disconnect the boot memory device from the host system.</div><div id="wwpID0E0UG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Connect the boot memory device to the Jetson device.</div><div id="wwpID0E0TG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Reboot the Jetson device.</div><div id="wwpID0E0SG0HA" class="Heading_5">To replace the kernel in systems that boot from an NFS server</div><div id="wwpID0E0RG0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Boot the Jetson device.</div><div id="wwpID0E0QG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Enter the following command on the Jetson device:</div><div id="wwpID0E0PG0HA" class="Code">$ sudo mount /dev/mmcblk0p1 /mnt</div><div id="wwpID0E0OG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Use <span class="Code_Char">scp</span> to copy the new kernel files to the <span class="Code_Char">mnt/boot</span> directory on the Jetson device.</div><div id="wwpID0E0NG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Reboot the Jetson device.</div><H3 id="wwpID0E0MG0HA" class="Heading_3">Copying the Root Filesystem</H3><div id="wwpID0E0LG0HA" class="Body_Text">For external media, you must copy the root filesystem to the device <span class="Strong">after</span> you run the <span class="Code_Char">flash.sh</span> command. Then you attach the device to the target system. This is required because the <span class="Code_Char">flash.sh</span> script adds the required files to the root filesystem directory on the host when it runs.</div><H3 id="wwpID0E0KG0HA" class="Heading_3">Boot Sequence and Sysboot Configuration Files</H3><div id="wwpID0E0JG0HA" class="Body_Text">U-Boot functionality includes a default booting scan sequence. It scans bootable devices in the following order:</div><div id="wwpID0E0IG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>External SD card</div><div id="wwpID0E0HG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Internal eMMC </div><div id="wwpID0E0GG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>USB device or NVMe device (Jetson TX2 series only)</div><div id="wwpID0E0FG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>NFS network via DHCP/PXE</div><div id="wwpID0E0EG0HA" class="Body_Text">U‑Boot looks for an <span class="Code_Char">extlinux.conf</span> configuration file in the following directory of the bootable partition on each bootable device:</div><div id="wwpID0E0DG0HA" class="Code">&lt;rootfs&gt;/boot/extlinux</div><div id="wwpID0E0CG0HA" class="Body_Text">Upon finding the <span class="Code_Char">extlinux.conf</span> file, U-Boot performs the following steps:</div><div id="wwpID0E0BG0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Uses the <span class="Code_Char">sysboot</span> command to read out boot configuration from <span class="Code_Char">extlinux.conf</span></div><div id="wwpID0E0AG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Loads the kernel Image file</div><div id="wwpID0E06F0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Boots the kernel</div><div id="wwpID0E05F0HA" class="Body_Text">The Image file is user-accessible in the <span class="Code_Char">&lt;rootfs&gt;/boot</span> location after booting. The <span class="Code_Char">extlinux.conf</span> file is user-accessible in the <span class="Code_Char">&lt;rootfs&gt;/boot/extlinux</span> location. You can easily change these files to test your own kernel without flashing.</div><div id="wwpID0E04F0HA" class="Body_Text">The file <span class="Code_Char">extlinux.conf</span> is a standard text-format sysboot configuration file that contains all boot information. It indicates the kernel image filename, the device tree blob filename, and the kernel boot command line.</div><H3 id="wwpID0E03F0HA" class="Heading_3">Optimizing U-Boot Boot Time</H3><div id="wwpID0E02F0HA" class="Body_Text">By default, U-Boot uses a default configuration that enables all supported hardware features. It searches the available devices for boot scripts. This enables out-of-the-box support for the widest possible variety of storage devices and boot configurations.</div><div id="wwpID0E01F0HA" class="Body_Text">This flexibility delays execution of the final operating system because hardware support takes time to initialize and scanning all attached storage and network devices takes time. In constrained or pre-configured systems, this flexibility may not be necessary. You may know ahead of time which storage device contains the required files or that certain devices need not be initialized by the bootloader. To optimize boot time, configure U-Boot to reduce system boot time by taking advantage of these constraints.</div><div id="wwpID0E0ZF0HA" class="Body_Text">These changes must be made in the U‑Boot sources.</div><H4 id="wwpID0E0YF0HA" class="Heading_4">Disabling PCIe Support</H4><div id="wwpID0E0XF0HA" class="Body_Text">U-Boot delays enumerating and initializing PCIe devices until the user, or a boot script, explicitly attempts to access a PCIe device. Consequently, disabling PCIe support does not reduce boot time.</div><div id="wwpID0E0WF0HA" class="Heading_5">To disable PCIe support</div><div id="wwpID0E0VF0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Remove the following values from <span class="Code_Char">include/configs/&lt;board&gt;.h</span>:</div><div id="wwpID0E0UF0HA" class="Code">CONFIG_PCI_EHCI</div><div id="wwpID0E0TF0HA" class="Code">CONFIG_PCI_TEGRA</div><div id="wwpID0E0SF0HA" class="Code">CONFIG_CMD_PCI</div><div id="wwpID0E0RF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Remove the following values from <span class="Code_Char">configs/&lt;board_and_rev&gt;_defconfig</span><span class="Body_Text_Char">:</span></div><div id="wwpID0E0QF0HA" class="Code">CONFIG_PCI_TEGRA</div><div id="wwpID0E0PF0HA" class="Code">CONFIG_RTL8169</div><div id="wwpID0E0OF0HA" class="Code">CONFIG_E1000</div><div id="wwpID0E0NF0HA" class="Body_Text">Where <span class="Code_Char">&lt;board&gt;</span> and <span class="Code_Char">&lt;board_and_rev&gt;</span> are  described in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Placeholders in Commands</a></span>.</div><H4 id="wwpID0E0MF0HA" class="Heading_4">Enabling/Disabling ASPM Support</H4><div id="wwpID0E0LF0HA" class="Body_Text">U-Boot delays enumerating and initializing Active State Power Management (ASPM) PCIe devices until the user, or a boot device, explicitly attempts to access a PCIe ASPM device. Consequently, disabling ASPM support does not reduce boot time.</div><div id="wwpID0E0KF0HA" class="Heading_5">To enable ASPM support</div><div id="wwpID0E0JF0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Remove the following value from <span class="Code_Char">configs/&lt;board_and_rev&gt;_defconfig</span><span class="Body_Text_Char">:</span></div><div id="wwpID0E0IF0HA" class="Code">CONFIG_PCIEASPM</div><div id="wwpID0E0HF0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Add the following value:</div><div id="wwpID0E0GF0HA" class="Code">CONFIG_PCIEASPM_POWERSAVE=y</div><div id="wwpID0E0FF0HA" class="Body_Text">Where <span class="Code_Char">&lt;board_and_rev&gt;</span> is described in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Placeholders in Commands</a></span>.</div><div id="wwpID0E0EF0HA" class="Heading_5">To disable ASPM support</div><div id="wwpID0E0DF0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Remove the following value from <span class="Code_Char">configs/&lt;board_and_rev&gt;_defconfig</span><span class="Body_Text_Char">:</span></div><div id="wwpID0E0CF0HA" class="Code">CONFIG_PCIEASPM_POWERSAVE=y </div><div id="wwpID0E0BF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Add the following value.</div><div id="wwpID0E0AF0HA" class="Code">CONFIG_PCIEASPM</div><div id="wwpID0E06E0HA" class="Body_Text">Where <span class="Code_Char">&lt;board_and_rev&gt;</span> is described in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Placeholders in Commands</a></span>.</div><H4 id="wwpID0E05E0HA" class="Heading_4">Disabling USB Support</H4><div id="wwpID0E04E0HA" class="Body_Text">U-Boot delays enumerating and initializing USB devices until the user, or a boot script, explicitly attempts to access a USB device. Consequently, disabling USB support does not reduce boot time.</div><div id="wwpID0E03E0HA" class="Heading_5">To disable USB support</div><div id="wwpID0E02E0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Remove the following values from <span class="Code_Char">configs/&lt;board_and_rev&gt;_defconfig</span>:</div><div id="wwpID0E01E0HA" class="Code">CONFIG_CMD_USB</div><div id="wwpID0E0ZE0HA" class="Code">CONFIG_CMD_USB_MASS_STORAGE</div><div id="wwpID0E0YE0HA" class="Code">CONFIG_USB</div><div id="wwpID0E0XE0HA" class="Code">CONFIG_USB_GADGET</div><div id="wwpID0E0WE0HA" class="Code">CONFIG_USB_GADGET_DOWNLOAD</div><div id="wwpID0E0VE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Edit <span class="Code_Char">include/configs/&lt;board&gt;.h</span> to remove the <span class="Code_Char">#include</span> of <span class="Code_Char">tegra-common-usb-gadget.h</span>.</div><div id="wwpID0E0UE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Edit <span class="Code_Char">include/configs/tegra-common-post.h</span> to remove the USB entry from <span class="Code_Char">BOOT_TARGET_DEVICES</span>.</div><div id="wwpID0E0TE0HA" class="List_Continue">Where <span class="Code_Char">&lt;board&gt;</span> and <span class="Code_Char">&lt;board_and_rev&gt;</span> are described in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Placeholders in Commands</a></span>.</div><H3 id="wwpID0E0SE0HA" class="Heading_3">Environment Configuration</H3><div id="wwpID0E0RE0HA" class="Body_Text">U-Boot runtime behavior is controlled by scripts contained in the U-Boot environment. When U-Boot begins execution, it waits <span class="Code_Char">&lt;bootdelay&gt;</span> seconds before executing the automatic boot sequence. During this time, the user may interrupt the boot process to access the U-Boot shell. If not interrupted, U-Boot executes <span class="Code_Char">&lt;bootcmd&gt;</span> as a shell command. <span class="Code_Char">&lt;bootcmd&gt;</span> contains a series of commands to search storage devices for boot scripts and execute them.</div><div id="wwpID0E0QE0HA" class="Body_Text">By modifying the values of these variables at compile or manufacturing time, U‑Boot can be directed to boot from a specific device in a specific manner, thereby reducing boot time.</div><div id="wwpID0E0PE0HA" class="Body_Text">The following table identifies the variables that can be modified.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 41.75pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 125.65pt"><div id="wwpID0EABI0OE0HA" class="Cell_Heading">Variable</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 265.5pt"><div id="wwpID0EAAI0OE0HA" class="Cell_Heading">Description</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0OE0HA" class="Cell_Text">bootdelay</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EDAH0OE0HA" class="Cell_Text">Contains the number of seconds that U-Boot pauses to determine whether the user wants to interrupt the boot sequence.</div><div id="wwpID0ECAH0OE0HA" class="Cell_Text">To eliminate the delay, set to 0.</div><div id="wwpID0EBAH0OE0HA" class="Cell_Text"><span class="Strong">Note</span>: If the user requests to interrupt the boot process before the U-Boot shell is reached, the request is honored even if <span class="Code_Char">bootdelay</span> is set to 0.</div><div id="wwpID0EAAH0OE0HA" class="Cell_Text">If the delay is less than 0, U‑Boot displays the boot menu and disables autoboot.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0OE0HA" class="Cell_Text">bootcmd</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAG0OE0HA" class="Cell_Text">Contains a sequence of U-Boot shell commands to be executed automatically at boot.</div><div id="wwpID0EAAG0OE0HA" class="Cell_Text">Note that many simple customizations, such as selecting a specific storage device for booting, do not require editing this value.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0OE0HA" class="Cell_Text">boot_targets</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EIAF0OE0HA" class="Cell_Text">Contains a space-delimited list of storage devices or network protocols that U-Boot scans to find boot scripts.</div><div id="wwpID0EHAF0OE0HA" class="Cell_Text">Valid values include:</div><div id="wwpID0EGAF0OE0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">mmc0</span>: the built-in eMMC</div><div id="wwpID0EFAF0OE0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">mmc1</span>: the SD card slot</div><div id="wwpID0EEAF0OE0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">usb0</span>: any attached USB Mass Storage device</div><div id="wwpID0EDAF0OE0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvme0</span>: any attached NVMe device</div><div id="wwpID0ECAF0OE0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">pxe</span>: network, using DHCP to receive an IP address, then PXE to download a syslinux configuration file</div><div id="wwpID0EBAF0OE0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">dhcp</span>: network using DHCP to receive an IP address, then TFTP to download a U-Boot boot script</div><div id="wwpID0EAAF0OE0HA" class="Cell_Text">This variable can specify a subset of the possible values, and even to a single value if the application does not require alternative boot devices.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0OE0HA" class="Cell_Text">scan_dev_for_boot_part</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EDAE0OE0HA" class="Cell_Text">Contains a script to parse the device partition table and determine which partition U-Boot must scan for boot files.</div><div id="wwpID0ECAE0OE0HA" class="Cell_Text">If the partition number is known ahead of time, replace the script with a simpler script that hard-codes the value of <span class="Code_Char">&lt;devplist&gt;</span> as a single partition number (in hexadecimal), and then runs either or both of the following variables:</div><div id="wwpID0EBAE0OE0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">scan_dev_for_extlinux</span></div><div id="wwpID0EAAE0OE0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">scan_dev_for_boot_scripts</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0OE0HA" class="Cell_Text">boot_prefixes</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EEAD0OE0HA" class="Cell_Text">Contains a list of file system directories to scan for boot scripts or configuration files.</div><div id="wwpID0EDAD0OE0HA" class="Cell_Text">File system layouts vary in different installations. For example, the boot directory may be <span class="Code_Char">/boot</span> in the file system’s root directory, or it may be in a separate partition mounted elsewhere on the file system.</div><div id="wwpID0ECAD0OE0HA" class="Cell_Text">By default, U-Boot searches the root directory (&nbsp;<span class="Code_Char">/</span>&nbsp;) and <span class="Code_Char">/boot/</span>.</div><div id="wwpID0EBAD0OE0HA" class="Cell_Text">In constrained cases, the user may set this variable to a single directory name so that U-Boot does not search unnecessary directories.</div><div id="wwpID0EAAD0OE0HA" class="Cell_Text"><span class="Strong">Note</span>: All entries in this variable must contain both a leading and a trailing slash.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0OE0HA" class="Cell_Text">scan_dev_for_extlinux</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAC0OE0HA" class="Cell_Text">Contains a script to search for extlinux configuration files. If found, boots the system based on their content.</div><div id="wwpID0EAAC0OE0HA" class="Cell_Text">If the system is known not to use extlinux configuration files, set this script to an innocuous command, such as <span class="Code_Char">true</span>. Do not leave it empty, which would make U‑Boot complain about an attempt to execute an empty variable as a script.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0OE0HA" class="Cell_Text">scan_dev_for_scripts</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAB0OE0HA" class="Cell_Text">Contains a script to search for U-Boot boot scripts. If found, loads and executes them.</div><div id="wwpID0EBAB0OE0HA" class="Cell_Text">If the system is known not to use U-Boot boot scripts, replace this script an innocuous command, such as <span class="Code_Char">true</span>. (See the explanation for <span class="Code_Char">scan_dev_for_extlinux</span>.)</div><div id="wwpID0EAAB0OE0HA" class="Cell_Text"><span class="Strong">Note</span>: The default boot scripts execute <span class="Code_Char">&lt;scan_dev_for_extlinux&gt;</span> prior to executing <span class="Code_Char">&lt;scan_dev_for_scripts&gt;</span>. Therefore, modifying this variable does not affect systems that boot using extlinux configuration files because this script is never executed.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0OE0HA" class="Cell_Text">boot_scripts</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAA0OE0HA" class="Cell_Text">Contains a space-delimited list of U-Boot script names for <span class="Code_Char">&lt;scan_dev_for_scripts&gt;</span> to search for. </div><div id="wwpID0EAAA0OE0HA" class="Cell_Text">If the script name is known ahead of time, set this variable to the desired value rather than the default list.</div></td></tr></table></div><H4 id="wwpID0E0NE0HA" class="Heading_4">Setting Environment Variables</H4><div id="wwpID0E0ME0HA" class="Body_Text">You can set environment variables at:</div><div id="wwpID0E0LE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Compile time</div><div id="wwpID0E0KE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Manufacturing time</div><div id="wwpID0E0JE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Flashing time</div><H4 id="wwpID0E0IE0HA" class="Heading_4">Compile Time</H4><div id="wwpID0E0HE0HA" class="Body_Text">When U-Boot starts executing, it attempts to initialize the environment variables from data stored in flash memory. The location of the data is determined by the U-Boot configuration file on the board. If the data is missing or corrupted, U-Boot uses a default set of values built into the U-Boot binary.</div><div id="wwpID0E0GE0HA" class="Body_Text">The default L4T flashing process does not write this data into flash memory, so the built-in copy is always used initially. The built-in default values are set in the following places in the U-Boot source code.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0FE0HA" class="Note_Image">Note</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0ECAA0FE0HA" class="Note_Text">In the following table:</div><div id="wwpID0EBAA0FE0HA" class="Note_bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>Fixed-space names in upper case represent configuration variables in the U‑Boot source code. Example: <span class="Code_Char">CONFIG_BOOTDELAY</span>.</div><div id="wwpID0EAAA0FE0HA" class="Note_bullet"><span class="WebWorks_Number" style="width: 18pt">•	</span>Fixed-space names in lower case represent environment variables. Example: <span class="Code_Char">bootdelay</span>.</div></td></tr></table></div><div id="wwpID0E0EE0HA" class="Body_Text">&nbsp;</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 41.75pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 161.65pt"><div id="wwpID0EABD0DE0HA" class="Cell_Heading">U-Boot Source Code</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 234pt"><div id="wwpID0EAAD0DE0HA" class="Cell_Heading">Environment Variable Value</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0DE0HA" class="Cell_Text">include/config_distro_bootcmd.h</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0DE0HA" class="Cell_Text">Defines variables and scripts related to the automatic boot process.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0DE0HA" class="Cell_Text">include/config/auto.conf</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0DE0HA" class="Cell_Text"><span class="Code_Char">CONFIG_BOOTDELAY</span> sets the value of <span class="Code_Char">bootdelay</span>.</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0DE0HA" class="Cell_Text">include/configs/tegra‑common‑post.h</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EFAA0DE0HA" class="Cell_Text"><span class="Code_Char">BOOT_TARGET_DEVICES</span> sets the value of <span class="Code_Char">boot_targets</span>.</div><div id="wwpID0EEAA0DE0HA" class="Cell_Text"><span class="Code_Char">BOOT_TARGET_DEVICES</span> also determines the set of legal values that can appear in <span class="Code_Char">boot_targets</span>. Removing entries from this variable prevents the use of those values in <span class="Code_Char">&lt;boot_targets&gt;</span> at all.</div><div id="wwpID0EDAA0DE0HA" class="Cell_Text">To modify this value at compile time:</div><div id="wwpID0ECAA0DE0HA" class="Cell_Text" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt">1.	</span>Modify <span class="Code_Char">include/config_distro_bootcmd.h</span> to avoid setting <span class="Code_Char">boot_targets</span> if the board-specific configuration file has already defined this value.</div><div id="wwpID0EBAA0DE0HA" class="Cell_Text" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt">2.	</span>Modify <span class="Code_Char">include/config/&lt;board&gt;.h</span> to set <span class="Code_Char">boot_targets</span>.</div><div id="wwpID0EAAA0DE0HA" class="Cell_Text" style="text-indent: 0pt">(Where <span class="Code_Char">&lt;board&gt;</span> is described in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0YL0HA" title="U-Boot Customization">Placeholders in Commands</a></span>.)</div></td></tr></table></div><H4 id="wwpID0E0CE0HA" class="Heading_4">Manufacturing and Flashing Time</H4><div id="wwpID0E0BE0HA" class="Body_Text">You can modify your manufacturing flow to write a saved copy of the environment variables to flash memory. Here are some alternative ways to modify your manufacturing flow:</div><div id="wwpID0E0AE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>After flashing the board, arrange for the board to execute U-Boot, and cause U-Boot to execute commands that modify and save the environment:</div><div id="wwpID0E06D0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Reset the board so that U-Boot runs and executes commands sent using the serial console. You must write and execute a program on your host system which detects when U-Boot begins running, interrupts the U-Boot automatic boot process, and sends commands to U-Boot.</div><div id="wwpID0E05D0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Execute a sequence of commands similar to these:</div><div id="wwpID0E04D0HA" class="Code_Indent">$ env default –f –a; setenv boot_targets mmc0; saveenv</div><div id="wwpID0E03D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Manually edit the U-Boot environment, save it, and extract the appropriate flash memory region to a file on your host system. Then modify the Jetson L4T partition layout XML file so that the data is written to flash during any subsequent flashing process.</div><div id="wwpID0E02D0HA" class="List_Continue">You may also use this technique if your manufacturing process programs flash chips directly, rather than using the L4T flashing tools on each board. You must merge the saved, extracted environment data into your flash image file, rather than reference it from the L4T partition layout XML file.</div><div id="wwpID0E01D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Generate a set of saved environment data using the U-Boot <span class="Code_Char">fw_env</span> tool, located in the <span class="Code_Char">tools/env</span> directory in the U-Boot source code. Then modify the L4T partition layout XML file so that data is written to flash during any subsequent flashing process.</div><div id="wwpID0E0ZD0HA" class="List_Continue">You may also use this technique if your manufacturing process programs flash chips directly, rather than using the L4T flashing tools on each board. You must merge the saved, extracted environment data into your flash image file, rather than reference it from the L4T partition layout XML file.</div><H4 id="wwpID0E0YD0HA" class="Heading_4">extlinux.conf</H4><div id="wwpID0E0XD0HA" class="Body_Text">U-Boot uses <span class="Hyperlink"><a href="https://wiki.syslinux.org/wiki/index.php?title=EXTLINUX" target="external_window">EXTLINUX</a></span> to control the boot process as specified by the SysLinux/PXELinux spec. It loads the configuration file from <span class="Code_Char">/boot/extlinux/extlinux.conf</span>, and uses it find and boot the kernel image, RAM disk, and optionally a kernel DTB, and to add command-line arguments to the kernel.</div><div id="wwpID0E0WD0HA" class="Body_Text">U-Boot uses the <span class="Code_Char">TIMEOUT</span>, <span class="Code_Char">DEFAULT</span>, <span class="Code_Char">MENU</span>, <span class="Code_Char">LABEL</span>, <span class="Code_Char">KERNEL</span>, <span class="Code_Char">INITRD</span>, <span class="Code_Char">FDT</span>, and <span class="Code_Char">APPEND</span> directives, as in the example below. It supports NVIDIA extensions, described in the following sections.</div><div id="wwpID0E0VD0HA" class="Body_Text">After you modify <span class="Code_Char">extlinux.conf</span>, regenerate the <span class="Code_Char">system.img</span> rootfs image by rerunning <span class="Code_Char">flash.sh</span>. and flash it to your board's <span class="Code_Char">APP</span> partition. Alternatively, you can edit <span class="Code_Char">/boot/extlinux/extlinux.conf</span> in the rootfs after booting the Jetson device. Jetson Linux will apply the new contents on the next reboot.</div><div id="wwpID0E0UD0HA" class="Heading_5">Example extlinux.conf File</div><div id="wwpID0E0TD0HA" class="Body_Text">This is an example of an <span class="Code_Char">extlinux.conf</span> file suitable for use in Jetson Linux.</div><div id="wwpID0E0SD0HA" class="Code">TIMEOUT 30                                                                      </div><div id="wwpID0E0RD0HA" class="Code">DEFAULT primary                                                                 </div><div id="wwpID0E0QD0HA" class="Code">MENU TITLE L4T boot options                                                     </div><div id="wwpID0E0PD0HA" class="Code">LABEL primary</div><div id="wwpID0E0OD0HA" class="Code">   MENU LABEL primary kernel</div><div id="wwpID0E0ND0HA" class="Code">   LINUX /boot/Image</div><div id="wwpID0E0MD0HA" class="Code">   INITRD /boot/initrd</div><div id="wwpID0E0LD0HA" class="Code">   APPEND ${cbootargs} root=/dev/mmcblk0p1 rw rootwait rootfstype=ext4 console=ttyS0,115200n8 console=tty0 fbcon=map:0 net.ifnames=0</div><div id="wwpID0E0KD0HA" class="Heading_5">Removing extlinux.conf Boot Menu</div><div id="wwpID0E0JD0HA" class="Body_Text">The Jetson Linux <span class="Code_Char">extlinux.conf</span> file is configured to display a boot menu to the user for three seconds before booting. To reduce boot processing time, you can remove this timeout.</div><div id="wwpID0E0ID0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Edit <span class="Code_Char">extlinux.conf</span> to remove the lines containing these keywords:</div><div id="wwpID0E0HD0HA" class="Code">TIMEOUT</div><div id="wwpID0E0GD0HA" class="Code">MENU</div><div id="wwpID0E0FD0HA" class="List_Continue">On an installed L4T target system, this file is located at:</div><div id="wwpID0E0ED0HA" class="Code">/boot<span class="Code_Char">/extlinux/</span>extlinux.conf</div><div id="wwpID0E0DD0HA" class="List_Continue">Prior to flashing, this file is located in the host L4T flashing directory in the <span class="Code_Char">bootloader</span> directory.</div><div id="wwpID0E0CD0HA" class="Heading_5">DTB Overlays</div><div id="wwpID0E0BD0HA" class="Body_Text">U‑Boot can load <span class="Strong">DTB overlay</span> (DTBO) files to support plug-in devices such as the IMX477 camera, MCP51x CAN controller, Fe-Pi Audio Z card, etc. DTB overlay files are identified through <span class="Code_Char">extlinux.conf</span> file’s <span class="Code_Char">FDTOVERLAYS</span> property.</div><div id="wwpID0E0AD0HA" class="Body_Text">DTB overlays are useful because a carrier board's kernel DTB cannot represent every possible add-on device. For example, it cannot represent plug-in devices interface to the 40‑pin expansion connector. A developer could modify the kernel DTB source to add the necessary nodes, properties, and other changes needed to support a needed device, and reflash or reload the DTB, but that is a difficult, error-prone process, can cause conflicts (phandles, etc.), and must be repeated many times during development and debugging.</div><div id="wwpID0E06C0HA" class="Body_Text">A better approach is to add support for a new device by loading an overlay (a DTBO file) onto the kernel DTB distributed with Jetson Linux. The overlay contains just the new properties and nodes that the device requires.</div><div id="wwpID0E05C0HA" class="Body_Text">U-Boot merges any DTBO files named by the <span class="Code_Char">FDTOVERLAYS</span> property to the DTB that was loaded by earlier bootloaders, then passes the merged DTB on to the kernel.</div><div id="wwpID0E04C0HA" class="Body_Text">Overlays can be used along with a disk-based kernel DTB specified by the <span class="Code_Char">FDT</span> property in <span class="Code_Char">extlinux.conf</span>, but a better approach is to use <span class="Code_Char">FDTOVERLAYS</span> without <span class="Code_Char">FDT</span>. This ensures that the same DTB that the bootloaders used from flash is passed to the kernel on boot, with the new information merged from the DTBO file.</div><div id="wwpID0E03C0HA" class="Body_Text">DTB files (including overlays) are typically stored in <span class="Code_Char">/boot/dtb/</span> in the rootfs.  The Jetson Linux convention is to use the extension <span class="Code_Char">.dtbo</span> for overlay files to distinguish them from global <span class="Code_Char">.dtb</span> files, but U‑Boot does not require this.</div><div id="wwpID0E02C0HA" class="Body_Text">You can load multiple DTBO files by listing all of them on the line that specifies the <span class="Code_Char">FDTOVERLAYS</span> property, separated by spaces. U-Boot does not support multi-line properties, so keep all of the DTBO files on a single line.</div><div id="wwpID0E01C0HA" class="Body_Text">Applying a DTBO file for a device that isn’t attached may result in errors or warnings from the kernel, as it sees the nodes and properties and attempts to load a driver to support the missing hardware. This can happen, for example, if you loaded an overlay for a FE-Pi Audio Z card when the card is not plugged in to the 40-pin expansion header.</div><div id="wwpID0E0ZC0HA" class="Heading_5">Example extlinux.conf File with DBT Overlay</div><div id="wwpID0E0YC0HA" class="Body_Text">This example is similar to the one under <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0UD0HA" title="U-Boot Customization">Example extlinux.conf File</a></span>, <a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#wwpID0E0UD0HA" title="U-Boot Customization">above</a>, but illustrates how to load a DTB overlay (in this case <span class="Code_Char">jetson-mcp251x.dtbo</span>). Note the changed <span class="Code_Char">MENU LABEL</span> line and the added <span class="Code_Char">FDTOVERLAYS</span> line.</div><div id="wwpID0E0XC0HA" class="Code">TIMEOUT 30                                                                      </div><div id="wwpID0E0WC0HA" class="Code">DEFAULT primary                                                                 </div><div id="wwpID0E0VC0HA" class="Code">MENU TITLE L4T boot options                                                     </div><div id="wwpID0E0UC0HA" class="Code">LABEL primary</div><div id="wwpID0E0TC0HA" class="Code">   MENU LABEL load DTBO</div><div id="wwpID0E0SC0HA" class="Code">   LINUX /boot/Image</div><div id="wwpID0E0RC0HA" class="Code">   INITRD /boot/initrd</div><div id="wwpID0E0QC0HA" class="Code">   FDTOVERLAYS /boot/dtb/jetson-mcp251x.dtbo</div><div id="wwpID0E0PC0HA" class="Code">   APPEND ${cbootargs} root=/dev/mmcblk0p1 rw rootwait rootfstype=ext4 console=ttyS0,115200n8 console=tty0 fbcon=map:0 net.ifnames=0</div><div id="wwpID0E0OC0HA" class="Heading_5">Loading a DTB Overlay from the U-Boot Command Prompt</div><div id="wwpID0E0NC0HA" class="Body_Text">You can enter commands at the U‑Boot command prompt to load a DTB overlay file from the rootfs. The following example illustrates this. It assumes that the Bootloader DTB file’s data is in <span class="Code_Char">$fdt_addr</span>, and the rootfs is on an SD&nbsp;card:</div><div id="wwpID0E0MC0HA" class="Code">$ load mmc 1 $fdtoverlay_addr_r /boot/dtb/jetson-mcp51x.dtbo</div><div id="wwpID0E0LC0HA" class="Code">$ fdt addr $fdt_addr</div><div id="wwpID0E0KC0HA" class="Code">$ fdt resize 8192</div><div id="wwpID0E0JC0HA" class="Code">$ fdt apply $fdtoverlay_addr_r</div><div id="wwpID0E0IC0HA" class="Body_Text">The combined DTB is now located at <span class="Code_Char">$fdt_addr</span>, and can be passed to the kernel via <span class="Code_Char">booti</span>, or examined/dumped with <span class="Code_Char">fdt print</span>, etc.  This is the same sequence that U‑Boot uses to apply the DTBO file(s) found when parsing <span class="Code_Char">extlinux.conf</span>.</div><div id="wwpID0E0HC0HA" class="Body_Text">The manual overlay load method is discussed in a U‑Boot README here:</div><div id="wwpID0E0GC0HA" class="Code">3rdparty/u-boot/doc/README.fdt-overlays</div><div id="wwpID0E0FC0HA" class="Body_Text">This README (available in our L4T U-Boot source, or upstream via Denx) does not document the <span class="Code_Char">FDTOVERLAYS</span> property.</div><H4 id="wwpID0E0EC0HA" class="Heading_4">Debugging in the U-Boot Environment</H4><div id="wwpID0E0DC0HA" class="Body_Text">Use these debugging tips to help you debug your U-Boot environment. These examples do not represent a comprehensive listing of U-Boot functionality. For a full list of supported commands and their usage by U-Boot, consult U-Boot documentation and source.</div><div id="wwpID0E0CC0HA" class="Heading_5">To interrupt U-Boot</div><div id="wwpID0E0BC0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Connect a terminal application to the serial port of the board.</div><div id="wwpID0E0AC0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Power on or reset the board.</div><div id="wwpID0E06B0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Wait for the U-Boot sign-on message to appear. Key presses before this message appears may be ignored.</div><div id="wwpID0E05B0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Press any key to interrupt the automatic boot process.</div><div id="wwpID0E04B0HA" class="Heading_5">To see the U-Boot Help text</div><div id="wwpID0E03B0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To see the U-Boot help text enter the following command:</div><div id="wwpID0E02B0HA" class="Code"># help</div><div id="wwpID0E01B0HA" class="Heading_5">To list the directory structure of a device</div><div id="wwpID0E0ZB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To list the directory structure of eMMC device 0 partition 1, enter this command on the target:</div><div id="wwpID0E0YB0HA" class="Code"># ls mmc 0:1</div><div id="wwpID0E0XB0HA" class="List_Continue">This command functions correctly on EXT2/3/4 and FAT file systems.</div><div id="wwpID0E0WB0HA" class="List_Continue">Example output follows:</div><div id="wwpID0E0VB0HA" class="Code"> &lt;DIR&gt;       4096 .</div><div id="wwpID0E0UB0HA" class="Code"> &lt;DIR&gt;       4096 ..</div><div id="wwpID0E0TB0HA" class="Code"> &lt;DIR&gt;       4096 bin</div><div id="wwpID0E0SB0HA" class="Code"> &lt;DIR&gt;       4096 boot</div><div id="wwpID0E0RB0HA" class="Code"> &lt;DIR&gt;       4096 dev</div><div id="wwpID0E0QB0HA" class="Code"> &lt;DIR&gt;       4096 etc</div><div id="wwpID0E0PB0HA" class="Code"> &lt;DIR&gt;       4096 home</div><div id="wwpID0E0OB0HA" class="Code"> &lt;DIR&gt;       4096 lib</div><div id="wwpID0E0NB0HA" class="Code"> &lt;DIR&gt;       4096 lost+found</div><div id="wwpID0E0MB0HA" class="Code"> &lt;DIR&gt;       4096 media</div><div id="wwpID0E0LB0HA" class="Code"> &lt;DIR&gt;       4096 mnt</div><div id="wwpID0E0KB0HA" class="Code"> &lt;DIR&gt;       4096 opt</div><div id="wwpID0E0JB0HA" class="Code"> &lt;DIR&gt;       4096 proc</div><div id="wwpID0E0IB0HA" class="Code"> &lt;DIR&gt;       4096 root</div><div id="wwpID0E0HB0HA" class="Code"> &lt;DIR&gt;       4096 sbin</div><div id="wwpID0E0GB0HA" class="Code"> &lt;DIR&gt;       4096 selinux</div><div id="wwpID0E0FB0HA" class="Code"> &lt;DIR&gt;       4096 srv</div><div id="wwpID0E0EB0HA" class="Code"> &lt;DIR&gt;       4096 sys</div><div id="wwpID0E0DB0HA" class="Code"> &lt;DIR&gt;       4096 tmp</div><div id="wwpID0E0CB0HA" class="Code"> &lt;DIR&gt;       4096 usr</div><div id="wwpID0E0BB0HA" class="Code"> &lt;DIR&gt;       4096 var</div><div id="wwpID0E0AB0HA" class="Heading_5">To list the contents of a directory</div><div id="wwpID0E6HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Run this command:</div><div id="wwpID0E5HA" class="Code"># ls mmc 0:1 &lt;directory&gt;</div><div id="wwpID0E4HA" class="List_Continue">Where <span class="Code_Char">&lt;directory&gt;</span> is a pathname in the filesystem.</div><div id="wwpID0E3HA" class="List_Continue">For example, to list contents of the <span class="Code_Char">/boot</span> directory where the <span class="Code_Char">Image</span> file should be, (as shown in the example output below), use the following command:</div><div id="wwpID0E2HA" class="Code"># ls mmc 0:1 /boot</div><div id="wwpID0E1HA" class="Code">&lt;DIR&gt; &nbsp; &nbsp; &nbsp; 1024 .</div><div id="wwpID0EZHA" class="Code">&lt;DIR&gt; &nbsp; &nbsp; &nbsp; 1024 ..</div><div id="wwpID0EYHA" class="Code">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;908 extlinux</div><div id="wwpID0EXHA" class="Code">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5910248 Image</div><div id="wwpID0EWHA" class="Body_Text">If you know the type of file system the directory is in, you may use one of the file system-specific directory listing commands implemented in U‑Boot: <span class="Code_Char">ext2ls</span>, <span class="Code_Char">fatls</span>, etc.</div><div id="wwpID0EVHA" class="Heading_5">To print the U-Boot environment</div><div id="wwpID0EUHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Run this command:</div><div id="wwpID0ETHA" class="Code"># printenv</div><div id="wwpID0ESHA" class="Heading_5">To print an environment variable</div><div id="wwpID0ERHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Run this command:</div><div id="wwpID0EQHA" class="Code"># printenv &lt;environment_variable&gt;</div><div id="wwpID0EPHA" class="List_Continue">Where <span class="Code_Char">&lt;environment_variable&gt;</span> is an environment variable in U‑Boot.</div><div id="wwpID0EOHA" class="List_Continue">For example, to print the list of devices to which U-Boot sends console output, run:</div><div id="wwpID0ENHA" class="Code"># printenv stdout</div><div id="wwpID0EMHA" class="List_Continue">The output looks like this:</div><div id="wwpID0ELHA" class="Code">stdout=serial</div><div id="wwpID0EKHA" class="Heading_5">To set an environment variable</div><div id="wwpID0EJHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Run this command:</div><div id="wwpID0EIHA" class="Code"># setenv &lt;environment_variable&gt; &lt;new_value&gt;</div><div id="wwpID0EHHA" class="List_Continue">Where <span class="Code_Char">&lt;environment_variable&gt;</span> is an environment variable in U‑Boot and <span class="Code_Char">&lt;new_value&gt;</span> is the new value for that variable. </div><div id="wwpID0EGHA" class="List_Continue">For example, to modify the set of devices to which U-Boot sends console output, run:</div><div id="wwpID0EFHA" class="Code"># setenv stdout serial</div><div id="wwpID0EEHA" class="Heading_5">To save the modified environment</div><div id="wwpID0EDHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Run this command:</div><div id="wwpID0ECHA" class="Code"># saveenv</div><div id="wwpID0EBHA" class="List_Continue">The command preserved the saved modified environment in case of resets and reboots.</div></div><div id="page_dates"></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></body></html>