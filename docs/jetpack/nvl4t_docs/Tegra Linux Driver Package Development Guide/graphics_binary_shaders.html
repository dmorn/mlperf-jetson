<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- NVIDIA customization --><title>NVIDIA Jetson Linux Driver Package Software Features : Graphics Programming | NVIDIA Docs </title><link rel="Prev" href="graphics_guide.html" title="Previous" /><link rel="Next" href="graphics_comp_shader.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/graphics_binary_shaders.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="pWYR1u1TPaxYXCvbxLd_002f5vw" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/graphics_binary_shaders.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="fa"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --></header><div id="page_content_container" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px"><div id="page_content"><H1 id="wwpID0EVHA" class="Heading_2_Top">Binary Shader Program Management</H1><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/graphics_binary_shaders.html#wwpID0EQHA">Automatic Shader Cache</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/graphics_binary_shaders.html#wwpID0EEHA">Comparison and Combination</a></div></dd></dl></div><div id="wwpID0EUHA" class="Body_Text">Shader programs are ordinarily stored in source form, and are compiled and linked by the OpenGL ES driver when the application first uses them by making OpenGL ES API calls.</div><div id="wwpID0ETHA" class="Body_Text">You can also precompile shader programs with <span class="Code_Char">glslc</span>, an offline shader compiler. This eliminates the need to compile those shader programs at run time. If all of the shader programs an application uses are precompiled, the OpenGL ES driver can save additional time and resources by not loading the compiler libraries at all.</div><div id="wwpID0ESHA" class="Body_Text">An application also can control binary program management directly. It can use the <span class="Code_Char">glGetProgramBinary()</span> function, added in OpenGL ES 3.0, to read back the binaries for any compiled and linked programs and store them for later use. The <span class="Code_Char">glProgramBinary()</span> function loads these saved binaries. Unlike the <span class="Code_Char">glShaderBinary()</span> function in OpenGL ES 2.0, <span class="Code_Char">glProgramBinary()</span> operates on a linked program instead of individual vertex and fragment shaders, so no additional link step is required after the binary is loaded.</div><div id="wwpID0ERHA" class="Body_Text">An application can save and load compiled program binaries either directly, by calling the OpenGL ES API, or through the automatic shader cache described below.</div><H3 id="wwpID0EQHA" class="Heading_3">Automatic Shader Cache</H3><div id="wwpID0EPHA" class="Body_Text">The OpenGL ES 3.0 driver in L4T supports an NVIDIA proprietary shader cache. When shader cache support is enabled, the driver maintains a shader cache file for each program. If an application requests a shader, the driver searches the cache for a binary compiled from that source with the current versions of the compiler and the driver. If such a binary exists, it loads that binary from the cache. Otherwise it compiles the program and saves the binary in the cache.</div><div id="wwpID0EOHA" class="Body_Text">The cache persists between application runs, so after a thorough initial run, programs need be compiled only when a new driver is installed.</div><div id="wwpID0ENHA" class="Body_Text">The shader cache is enabled by default on read/write filesystems. Assign the environment variable <span class="Code_Char">__GL_SHADER_DISK_CACHE</span> a value of 0 to disable the cache.</div><div id="wwpID0EMHA" class="Body_Text">By default, the cache is placed in <span class="Code_Char">~/.nv</span>. This directory is created if it does not already exist. You can specify a different location for the cache by setting the environment variable <span class="Code_Char">__GL_SHADER_DISK_CACHE_PATH</span> to a directory’s pathname. If the specified directory does not exist, the driver disables the cache; it does not create the missing directory, as it would for the default <span class="Code_Char">~/.nv</span> directory.</div><div id="wwpID0ELHA" class="Body_Text">Wherever the cache is kept, it takes the form of a subdirectory named <span class="Code_Char">GLCache</span>. It contains a set of files with hashed names. These files encode the driver version, GPU, and application. Whenever you install a new version of the driver, the hashed names change. Users may then want to remove the old directories before running applications.</div><div id="wwpID0EKHA" class="Body_Text">An application’s shader cache can be made read-only. Such a cache contains only precompiled shader program binaries; the OpenGL ES driver cannot save binaries in it when it compiles them at run time.</div><div id="wwpID0EJHA" class="Heading_5">To make a cache read-only</div><div id="wwpID0EIHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Run the application on a test or development system whose filesystem has write access.</div><div id="wwpID0EHHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the cache directory to the desired location in the target image.</div><div id="wwpID0EGHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Set the cache directory’s permissions to give the application read-only access.</div><div id="wwpID0EFHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Set the environment variables described above to enable the cache and specify its location.</div><H3 id="wwpID0EEHA" class="Heading_3">Comparison and Combination</H3><div id="wwpID0EDHA" class="Body_Text">The main advantage of using the shader cache is that it is handled automatically, transparently to the application. In addition, the driver sometimes generates shaders internally for certain clear and copy operations, and if the cache is enabled, these too are generated only once, rather than each time the application runs.</div><div id="wwpID0ECHA" class="Body_Text">Although the cache eliminates the need to recompile shaders, it has some search and maintenance overhead. Applications can avoid this overhead by saving and loading shader program binaries directly. Furthermore, cached binaries are recompiled each time a new driver is installed, while saved binaries need be replaced only when the compiler portion of the driver is updated.</div><div id="wwpID0EBHA" class="Body_Text">An application can keep some shader programs in cache and load others directly. For instance, an application can use direct loading for the most critical shader programs, which must be available as soon as possible after startup, and rely on the cache to manager less frequently used shaders.</div></div><div id="page_dates"></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></body></html>