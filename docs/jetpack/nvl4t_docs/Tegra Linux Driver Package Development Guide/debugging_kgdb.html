<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- NVIDIA customization --><title>NVIDIA Jetson Linux Driver Package Software Features : Applications and Tools  | NVIDIA Docs </title><link rel="Prev" href="debugging_PTM.html" title="Previous" /><link rel="Next" href="AppendixTegraStats.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/debugging_kgdb.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="pPdVuqmtKbbY_002fqZ0BfUWNuw" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="fa"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --></header><div id="page_content_container" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px"><div id="page_content"><H1 id="wwpID0E0JE0HA" class="Heading_2_Top">Debugging the Kernel on Jetson Devices</H1><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html#wwpID0E0CE0HA">Reconfiguring and Rebuilding the Kernel</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html#wwpID0E0MD0HA">Modifying the Kernel Configuration File</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html#wwpID0E03C0HA">Using KGDB</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html#wwpID0E0YC0HA">Starting KDGB at Boot from the Kernel Command Line</a></div></dd></dl></dl></div><div id="wwpID0E0IE0HA" class="Body_Text_Indent"><span class="Strong">Applies to</span>: Jetson TX2 series devices only</div><div id="wwpID0E0HE0HA" class="Body_Text">This topic describes how to use the Linux kernel source-level debugger (KGDB) for debugging the Linux kernel on NVIDIA<span style="vertical-align: super">®</span> Jetson™ TX2 series devices. </div><div id="wwpID0E0GE0HA" class="Body_Text">Detailed information about KGDB is available at:</div><div id="wwpID0E0FE0HA" class="Code"><span class="Hyperlink"><a href="https://www.kernel.org/doc/htmldocs/kgdb/index.html" target="external_window">https://www.kernel.org/doc/htmldocs/kgdb/index.html</a></span> </div><div id="wwpID0E0EE0HA" class="Body_Text">Using KGDB requires a host system with a serial connection to the target device to be debugged. This allows live source-level debugging of kernel operations, setting breakpoints, and tracing errors back through function calls. </div><div id="wwpID0E0DE0HA" class="Body_Text">You cannot use KGDB to trace system calls and other types of processes. Use a tracer for that type of debugging. </div><H3 id="wwpID0E0CE0HA" class="Heading_3">Reconfiguring and Rebuilding the Kernel</H3><div id="wwpID0E0BE0HA" class="Body_Text">Before you use KDGB you must determine whether the KDGB feature is enabled in the kernel. If it is not enabled, you must reconfigure and rebuild the kernel to connect to GDB and use a serial port terminal for debugging. </div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 45.9pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0AE0HA" class="Note_Image">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA0AE0HA" class="Note_Text">To debug a device with a Jetson<span class="Key" style="border-bottom-color: #000000; border-bottom-style: none; border-bottom-width: 0pt; border-left-color: #000000; border-left-style: none; border-left-width: 0pt; border-right-color: #000000; border-right-style: none; border-right-width: 0pt; border-top-color: #000000; border-top-style: none; border-top-width: 0pt; vertical-align: super">&nbsp;</span> processor, NVIDIA recommends using GDB 8.0 to connect to KGDB. GDB 7.0 has been used in the past but has not been tested with the current release. </div></td></tr></table></div><div id="wwpID0E06D0HA" class="Heading_5">To determine whether the kernel configuration must be modified</div><div id="wwpID0E05D0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Execute the command:</div><div id="wwpID0E04D0HA" class="Code">$ zcat /proc/config.gz | egrep 'CONFIG_KGDB|KDGB|CONFIG_FRAME_POINTER|CONFIG_WATCHDOG|IKCONFIG'</div><div id="wwpID0E03D0HA" class="List_Continue">If your kernel currently has all of the requisite macros enabled, the command displays exactly the following output:</div><div id="wwpID0E02D0HA" class="Code">CONFIG_IKCONFIG=y</div><div id="wwpID0E01D0HA" class="Code">CONFIG_IKCONFIG_PROC=y</div><div id="wwpID0E0ZD0HA" class="Code"># CONFIG_WATCHDOG is not set</div><div id="wwpID0E0YD0HA" class="Code">CONFIG_FRAME_POINTER=y</div><div id="wwpID0E0XD0HA" class="Code">CONFIG_KGDB=y</div><div id="wwpID0E0WD0HA" class="Code">CONFIG_KGDB_SERIAL_CONSOLE=y</div><div id="wwpID0E0VD0HA" class="Code"># CONFIG_KGDB_TESTS is not set</div><div id="wwpID0E0UD0HA" class="Code"># CONFIG_KGDB_KDB is not set</div><div id="wwpID0E0TD0HA" class="Code">CONFIG_KGDB_KDB=y</div><div id="wwpID0E0SD0HA" class="Code">CONFIG_KDB_DEFAULT_ENABLE=0x1</div><div id="wwpID0E0RD0HA" class="Code">CONFIG_KDB_KEYBOARD=y</div><div id="wwpID0E0QD0HA" class="Code">CONFIG_KDB_CONTINUE_CATASTROPHIC=0</div><div id="wwpID0E0PD0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>If the output indicates that <span class="Code_Char">/proc/config.gz</span> does not exist, your kernel was not compiled with <span class="Code_Char">CONFIG_IKCONFIG_PROC</span> set. In that case, recompile the kernel with <span class="Code_Char">CONFIG_IKCONFIG_PROC </span>set. </div><div id="wwpID0E0OD0HA" class="List_Continue">General instructions for reconfiguring and rebuilding the Linux kernel for KGDB are available at: </div><div id="wwpID0E0ND0HA" class="Code"><span class="Hyperlink"><a href="https://www.kernel.org/doc/htmldocs/kgdb/CompilingAKernel.html" target="external_window">https://www.kernel.org/doc/htmldocs/kgdb/CompilingAKernel.html</a></span><span class="Hyperlink" style="color: #000000"> </span></div><H3 id="wwpID0E0MD0HA" class="Heading_3">Modifying the Kernel Configuration File</H3><div id="wwpID0E0LD0HA" class="Body_Text">You may have to modify the kernel configuration file if any of the above-mentioned macros are not set correctly. </div><div id="wwpID0E0KD0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Select the appropriate configuration file for your target device. </div><div id="wwpID0E0JD0HA" class="List_Continue">For example, the configuration file for a T186 board is <span class="Code_Char">tegra_defconfig</span>,</div><div id="wwpID0E0ID0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Set up the Linux build environment and execute these commands within the kernel directory: </div><div id="wwpID0E0HD0HA" class="Code">$ cd $TEGRA_TOP/kernel/kernel-4.9</div><div id="wwpID0E0GD0HA" class="Code">$ export ARCH=arm64</div><div id="wwpID0E0FD0HA" class="Code">$ make DEFCONFIG_PATH=arch/arm64/configs tegra_defconfig</div><div id="wwpID0E0ED0HA" class="Code">$ make menuconfig</div><div id="wwpID0E0DD0HA" class="Code">&lt;&lt;Update config options&gt;&gt;</div><div id="wwpID0E0CD0HA" class="Code">$  make savedefconfig</div><div id="wwpID0E0BD0HA" class="Code">$ cp -v defconfig arch/arm64/configs/tegra_defconfig</div><div id="wwpID0E0AD0HA" class="Code">$ make mrproper</div><div id="wwpID0E06C0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Rebuild the kernel using the new configuration file by executing the command: </div><div id="wwpID0E05C0HA" class="Code">$ tmp kernel</div><div id="wwpID0E04C0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Flash the new kernel on the target Jetson device to be debugged. </div><H3 id="wwpID0E03C0HA" class="Heading_3">Using KGDB</H3><div id="wwpID0E02C0HA" class="Body_Text">To use KGDB, you must attach it to GDB. You must set up KGDB to be attached using one of two methods, depending on the state of the system: </div><div id="wwpID0E01C0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Strong">At boot</span>: Use the kernel command line.</div><div id="wwpID0E0ZC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Strong">At runtime with sysfs node</span>: Use a system request trigger to KGDB to wait for a GDB connection.</div><H4 id="wwpID0E0YC0HA" class="Heading_4">Starting KDGB at Boot from the Kernel Command Line</H4><div id="wwpID0E0XC0HA" class="Body_Text">A custom kernel boot command line for KGDB must specify:</div><div id="wwpID0E0WC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The terminal device used for debugging</div><div id="wwpID0E0VC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The baud rate of the serial connection between the host and the target device</div><div id="wwpID0E0UC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The <span class="Code_Char">kgdbwait</span> command</div><div id="wwpID0E0TC0HA" class="Heading_5">To start KGDB at boot</div><div id="wwpID0E0SC0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Check whether the <span class="Code_Char">console</span> parameter is set for using KGDB at boot in the kernel command line.</div><div id="wwpID0E0RC0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>If the <span class="Code_Char">console</span> parameter is not set, add the following arguments to the kernel command line:</div><div id="wwpID0E0QC0HA" class="Code">console=&lt;device&gt;,&lt;bpc&gt; kgdboc=&lt;device&gt;,&lt;baudrate&gt; kgdbwait</div><div id="wwpID0E0PC0HA" class="Normal" style="margin-bottom: 12pt; margin-top: 12pt; text-indent: 0pt">Where: </div><div id="wwpID0E0OC0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span style="font-family: &quot;Courier New&quot;">&lt;device&gt;</span> is the serial device for debugging, e.g. <span class="Code_Char">ttyS0</span>.</div><div id="wwpID0E0NC0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span style="font-family: &quot;Courier New&quot;">&lt;bpc&gt;</span> specifies the baud rate, parity, and character length of the serial connection between the host and the target device, e.g. <span class="Code_Char">115200n8</span>.</div><div id="wwpID0E0MC0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;baudrate&gt;</span> is the baud rate of the serial connection, e.g. <span class="Code_Char">115200</span>.</div><div id="wwpID0E0LC0HA" class="List_Continue">This is a specific example of console parameters:</div><div id="wwpID0E0KC0HA" class="Code">console=ttyS0,115200n8 kgdboc=ttyS0,115200 kgdbwait</div><div id="wwpID0E0JC0HA" class="Leading">&nbsp;</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0IC0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 324.9pt"><div id="wwpID0EBAA0IC0HA" class="Note_Text">Verify that the baud rate is the same for the host and target device. You can use any type of connection that can work like an RS-232 serial connection, including connection through a USB bridge cable or a network connection that can tunnel serial data.</div><div id="wwpID0EAAA0IC0HA" class="Note_Text">Determine which host serial port or USB port receives boot messages from the device. Use the <span class="Code_Char">kgdboc</span> parameter to direct the GDB target device to the same port.</div></td></tr></table></div><div id="wwpID0E0HC0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Once the kernel command line is correctly set, there are two ways you can connect to GDB:</div><div id="wwpID0E0GC0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If the <span class="Code_Char">CONFIG_KDB*</span> macros are enabled in defconfig, the kernel waits for KGDB during boot. It opens a terminal window showing the KDB console and displays these messages:</div><div id="wwpID0E0FC0HA" class="Code_Indent">[    3.600430] console [ttyS0] enabled</div><div id="wwpID0E0EC0HA" class="Code_Indent">[    3.604746] KGDB: Registered I/O driver kgdboc</div><div id="wwpID0E0DC0HA" class="Code_Indent">[    3.626509] KGDB: Waiting for connection from remote gdb...</div><div id="wwpID0E0CC0HA" class="Code_Indent">Entering kdb (current=0xffffffc1ecb30000, pid 1) on processor 2 due to Keyboard Entry</div><div id="wwpID0E0BC0HA" class="Code_Indent">[2]kdb&gt;</div><div id="wwpID0E0AC0HA" class="List_Continue_2">This ends the procedure. You can now debug through the console by entering standard KDB commands at the prompt.</div><div id="wwpID0E06B0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If the <span class="Code_Char">CONFIG_KDB*</span> macros are not enabled in defconfig, the kernel displays these messages and waits for a connection from the remote GDB:</div><div id="wwpID0E05B0HA" class="Code_Indent">[    2.368148] console [ttyS0] enabled</div><div id="wwpID0E04B0HA" class="Code_Indent">[    2.368148] console [ttyS0] enabled</div><div id="wwpID0E03B0HA" class="Code_Indent">[    2.375339] bootconsole [uart0] disabled</div><div id="wwpID0E02B0HA" class="Code_Indent">[    2.375339] bootconsole [uart0] disabled</div><div id="wwpID0E01B0HA" class="Code_Indent">[    2.383940] KGDB: Registered I/O driver kgdboc</div><div id="wwpID0E0ZB0HA" class="Code_Indent">[    2.402324] KGDB: Waiting for connection from remote gdb...</div><div id="wwpID0E0YB0HA" class="List_Continue_2">Go on to the next step.</div><div id="wwpID0E0XB0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span><span class="Emphasis">Perform the remaining steps only if the kernel is waiting for a connection from KGDB, i.e., the </span><span class="Code_Char">CONFIG_KDB*</span><span class="Emphasis"> macros are not enabled.</span></div><div id="wwpID0E0WB0HA" class="List_Continue">If you are using same serial line for console and debugging, you must disconnect the terminal application for the console (for example, minicom) at this point.</div><div id="wwpID0E0VB0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Start GDB in the usual way, by executing these commands on host:</div><div id="wwpID0E0UB0HA" class="Code">$ &lt;path_to_toolchain&gt;/linaro/gcc-linaro-7.3.1-2018.05-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-gdb $TEGRA_TOP/out/l4t-t186ref-debug-aarch64/nvidia/kernel/vmlinux</div><div id="wwpID0E0TB0HA" class="List_Continue">For example:</div><div id="wwpID0E0SB0HA" class="Code">(gdb) target remote /dev/ttyUSB2</div><div id="wwpID0E0RB0HA" class="Leading">&nbsp;</div><div id="wwpID0E0QB0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>6.	</span></span>To connect GDB, enter this command after the <span class="Code_Char">gdb</span> debugger is started:</div><div id="wwpID0E0PB0HA" class="Code">(gdb) target remote /dev/&lt;tty_device&gt;</div><div id="wwpID0E0OB0HA" class="List_Continue">Where <span class="Code_Char">&lt;tty_device&gt;</span> is the host output device configured for GDB.</div><div id="wwpID0E0NB0HA" class="List_Continue">For example:</div><div id="wwpID0E0MB0HA" class="Code">(gdb) target remote /dev/ttyUSB2</div><div id="wwpID0E0LB0HA" class="Body_Text">In this example, the terminal is connected through a USB port at <span class="Code_Char">/dev/ttyUSB2</span>.</div><div id="wwpID0E0KB0HA" class="Body_Text">To connect through a standard serial port, replace the USB device number with a serial port number such as <span class="Code_Char">/dev/ttyS0</span>. Typically you would use the same port you use to receive boot messages.</div><div id="wwpID0E0JB0HA" class="Heading_5">To start KDGB at runtime with sysfs node</div><div id="wwpID0E0IB0HA" class="Body_Text">You can also start KDGB after the target system has started, as described in this section.</div><div id="wwpID0E0HB0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>To trigger KGDB to wait for GDB connection on a running system:</div><div id="wwpID0E0GB0HA" class="List_Number_2"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Open a terminal window.</div><div id="wwpID0E0FB0HA" class="List_Number_2"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Enable the KGDB console on the configured terminal device at the configured baud rate.</div><div id="wwpID0E0EB0HA" class="List_Continue_2">On the target, enter the command:</div><div id="wwpID0E0DB0HA" class="Code_Indent">$ sudo su</div><div id="wwpID0E0CB0HA" class="Code_Indent"># echo ttyS0,115200 &gt; /sys/module/kgdboc/parameters/kgdboc</div><div id="wwpID0E0BB0HA" class="Leading">&nbsp;</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 77.4pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0AB0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 301.5pt"><div id="wwpID0EAAA0AB0HA" class="Note_Text">This sets the target device to use <span class="Code_Char">ttyS0</span>. On the host, you must identify the serial port or USB port on which you are receiving boot messages and use the same port for your GDB host.</div></td></tr></table></div><div id="wwpID0E6HA" class="List_Continue_2">If you were already connected to the serial console with minicom or screen, the kernel displays this:</div><div id="wwpID0E5HA" class="Code_Indent">[ 60.206779] kgdb: Registered I/O driver kgdboc.</div><div id="wwpID0E4HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>To signal KGDB to break and use KGDB:</div><div id="wwpID0E3HA" class="List_Number_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Enter the command:</div><div id="wwpID0E2HA" class="Code_Indent"># echo -n g &gt; /proc/sysrq-trigger</div><div id="wwpID0E1HA" class="List_Bullet_3"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If the <span class="Code_Char">CONFIG_KDB*</span> macros are enabled in defconfig, the command displays this:</div><div id="wwpID0EZHA" class="Code_Indent" style="text-indent: 0pt">[   54.299912] sysrq: SysRq : DEBUG</div><div id="wwpID0EYHA" class="Code_Indent" style="text-indent: 0pt">Entering kdb (current=0xffffffc1e9259c00, pid 4362) on processor 2 due to Keyboard Entry</div><div id="wwpID0EXHA" class="Code_Indent" style="text-indent: 0pt">[2]kdb&gt; help</div><div id="wwpID0EWHA" class="List_Continue_3">This ends the procedure. You can now debug through the console by entering standard KDB commands at the prompt.</div><div id="wwpID0EVHA" class="List_Bullet_3"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If the <span class="Code_Char">CONFIG_KDB*</span> macros are not enabled in defconfig, the command displays this:</div><div id="wwpID0EUHA" class="Code_Indent" style="text-indent: 0pt">[   68.398684] sysrq: SysRq : DEBUG</div><div id="wwpID0ETHA" class="Code_Indent" style="text-indent: 0pt">[   68.402103] KGDB: Entering KGDB</div><div id="wwpID0ESHA" class="List_Continue_3">Go on to the next step.</div><div id="wwpID0ERHA" class="List_Number_2"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span><span class="Emphasis">Perform the remaining steps only if the kernel is waiting for a connection from KGDB, i.e., the </span><span class="Code_Char">CONFIG_KDB*</span><span class="Emphasis"> macros are not enabled.</span></div><div id="wwpID0EQHA" class="List_Continue_2">On the host, execute the command: </div><div id="wwpID0EPHA" class="Code_Indent">$ sudo `which &lt;gdb_name&gt;` $TEGRA_TOP/out/l4t-t186ref-debug-aarch64/nvidia/kernel/vmlinux</div><div id="wwpID0EOHA" class="Code_Indent">$ set remotebaud 115200</div><div id="wwpID0ENHA" class="Code_Indent">$ target remote /dev/&lt;tty_device&gt;</div><div id="wwpID0EMHA" class="List_Continue_2">Where <span class="Code_Char">&lt;tty_device&gt;</span> is the host output device configured for GDB.</div><div id="wwpID0ELHA" class="List_Continue_2">For example:</div><div id="wwpID0EKHA" class="Code_Indent">$ (gdb) target remote /dev/ttyUSB2</div><div id="wwpID0EJHA" class="List_Continue_2">In this example, the terminal is connected through the USB port <span class="Code_Char">/dev/ttyUSB2</span>.</div><div id="wwpID0EIHA" class="List_Continue_2">To connect through a standard serial port, replace the USB device number with a serial port number such as <span class="Code_Char">/dev/ttyS0</span>. Typically you would use the same port you use to receive boot messages.</div><div id="wwpID0EHHA" class="Body_Text">To save typing each time you connect GDB to KGDB, define a <span class="Code_Char">dbgattach</span> alias for them in a <span class="Code_Char">.gdbinit</span> file like this:</div><div id="wwpID0EGHA" class="Code">define dbgattach</div><div id="wwpID0EFHA" class="Code">   echo set remotebaud 115200 \n</div><div id="wwpID0EEHA" class="Code">        set remotebaud 115200</div><div id="wwpID0EDHA" class="Code">   echo target remote /dev/&lt;tty_device&gt; \n</div><div id="wwpID0ECHA" class="Code">        target remote /dev/&lt;tty_device&gt;</div><div id="wwpID0EBHA" class="Code">end</div></div><div id="page_dates"></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></body></html>