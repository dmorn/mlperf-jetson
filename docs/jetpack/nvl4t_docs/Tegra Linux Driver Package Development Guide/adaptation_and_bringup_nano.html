<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- NVIDIA customization --><title>NVIDIA Jetson Linux Driver Package Software Features : Jetson Module Adaptation and Bring-Up | NVIDIA Docs </title><link rel="Prev" href="adaptation_and_bringup_xavier_nx.html" title="Previous" /><link rel="Next" href="adaptation_and_bringup_xavier.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/adaptation_and_bringup_nano.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="pi2iKbiubqcOL_002fSmewQvYHw" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="fa"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --></header><div id="page_content_container" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px"><div id="page_content"><H2 id="wwpID0E05R0HA" class="Heading_2">Jetson Nano Adaptation and Bring-Up</H2><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E03R0HA">Board Configuration and Developer Kits</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0YR0HA">Jetson Nano</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0UR0HA">Jetson Nano 2GB</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0RR0HA">Board Naming</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0LR0HA">Placeholders in the Porting Instructions</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E04Q0HA">Root Filesystem Configuration</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0RQ0HA">Pinmux Changes</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0AQ0HA">Updating the Bootloader Pinmux</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E03O0HA">Accessing GPIOs via “gpio” Device Labels</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0WO0HA">Exporting Pinmux for the Jetson Linux Kernel</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0PO0HA">Porting U-Boot</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0VN0HA">Porting the Linux Kernel</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0QN0HA">Creating Device Tree Overlay Files</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0NN0HA">Modifying the Kernel Device Tree</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0DM0HA">Porting USB</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E06L0HA">USB Structure</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0VL0HA">UPHY Lane Assignment</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E06J0HA">Required Device Tree Changes</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0RC0HA">Fan speed control mapping table</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0UB0HA">Other Considerations When Porting</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0SB0HA">Boot Time Reduction</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0PB0HA">Root Filesystem</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0EWHA">Kernel</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0ESHA">Customizing Settings for Flashing the Module</a></div></dd></dl></div><div id="wwpID0E04R0HA" class="Body_Text">This topic is for software developers whose target is NVIDIA<span style="vertical-align: super">®</span> Jetson&nbsp;Nano™. It describes how to port NVIDIA<span style="vertical-align: super">®</span> Jetson™ Linux (L4T) and the U-Boot bootloader from a developer kit to other hardware platforms.</div><H3 id="wwpID0E03R0HA" class="Heading_3">Board Configuration and Developer Kits</H3><div id="wwpID0E02R0HA" class="Body_Text">A Jetson Nano processor is contained in a <span class="Strong">system on module</span> (a SOM) supported by a developer kit. The developer kit comprises a SOM and a <span class="Strong">reference carrier board</span>. The SOM and the reference carrier board each has an EEPROM on which you can store the carrier board’s board ID. You can use the developer kit to develop applications which can then be incorporated into production systems.</div><div id="wwpID0E01R0HA" class="Body_Text">When you incorporate a Jetson Nano SOM into a custom carrier board developed for your application, you must change the kernel device tree, bootloader configuration, ODM data, and flashing configuration to support the new carrier board. The custom carrier board does not need an EEPROM for the board ID.</div><div id="wwpID0E0ZR0HA" class="Body_Text">For all of the procedures in this topic, the L4T release includes example code for the developer kit that can be used as a model for code to support other platforms.</div><H4 id="wwpID0E0YR0HA" class="Heading_4">Jetson Nano</H4><div id="wwpID0E0XR0HA" class="Body_Text">The Jetson Nano Developer Kit (P3450) comprises a Jetson Nano SOM (P3448-0000) and a P3449-0000 carrier board. This SOM has a micro SD card slot instead of built-in RAM. You can install a micro SD card on the SOM and flash it from a host system through a network connection, or you can flash a card directly on a host system and then install it in the SOM’s SD card slot. The P3448-0000 SOM is sold only as a component of the Jetson Nano Developer Kit, and is intended only for development use.</div><div id="wwpID0E0WR0HA" class="Body_Text">The P3448-00002 SOM is sold separately for production use. It has 16&nbsp;GB of eMMC storage instead of a micro SD card slot, but is otherwise similar to the P3448-0000. It has a five-year operating lifetime, and is qualified for deployment in commercial environments. It can also be used for development with the P3449 carrier board in the Jetson Nano Developer Kit.<span class="Footnote_Reference"><sup id="wwfootnote_inline_noteID0EAA0WR0HA"><a href="#wwnoteID0EAA0WR0HA">1</a></sup></span></div><div id="wwpID0E0VR0HA" class="Body_Text">Jetson Nano is identified here as “original Jetson Nano” when necessary to distinguish it from other variants.</div><H4 id="wwpID0E0UR0HA" class="Heading_4">Jetson Nano 2GB</H4><div id="wwpID0E0TR0HA" class="Body_Text">The Jetson Nano 2GB Developer Kit (P3541) consists of a P3448-0003 SOM attached to a P3542-0000 carrier board. The P3448-0003 SOM is similar to original Jetson Nano SOM (P3448-0000 or P3448-0002), but it has 2&nbsp;GB of built-in QSPI storage and no SD card slot.</div><div id="wwpID0E0SR0HA" class="Body_Text">The Jetson Nano 2GB SOM is sold separately for production use, as well as in the Jetson Nano 2GB Developer Kit.</div><H3 id="wwpID0E0RR0HA" class="Heading_3">Board Naming</H3><div id="wwpID0E0QR0HA" class="Body_Text">To support a Jetson Nano module with your carrier board, you must assign the module/carrier board combination a lower case alphanumeric name. The name may contain hyphens (-) and underscores (_), but not spaces. Following are some examples of valid board names:</div><div id="wwpID0E0PR0HA" class="Body_Text_Indent"><span class="Code_Char">p3450</span> (appropriate for original Jetson Nano)<br /><span class="Code_Char">p3541</span> (appropriate for Jetson Nano 2GB)<br /><span class="Code_Char">devboard</span></div><div id="wwpID0E0OR0HA" class="Body_Text">The name you choose will appear in file names and path names in U-Boot and Linux kernel source code and in user-visible device tree file names, and will be exposed to the user via the U-Boot command prompt and various Linux kernel <span class="Code_Char">/proc</span> files.</div><div id="wwpID0E0NR0HA" class="Body_Text">You must also choose a similarly constructed vendor name. The same character set rules apply; for example, a vendor name for NVIDIA could be <span class="Code_Char">nvidia</span>.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 45pt"><div id="wwpID0EABA0MR0HA" class="Note_Image">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 319.5pt"><div id="wwpID0EAAA0MR0HA" class="Note_Text">Do not simply re-use and modify the existing Jetson Nano Developer Kit code without choosing and using your own board name. If you do not use your own board name it will not be obvious to Jetson Nano users whether modified source code supports your carrier board or original Jetson Nano Developer Kit carrier board.</div></td></tr></table></div><H3 id="wwpID0E0LR0HA" class="Heading_3">Placeholders in the Porting Instructions</H3><div id="wwpID0E0KR0HA" class="Body_Text">The sections below refer to filenames and pathnames that contain several common placeholders. Substitute an appropriate value for each placeholder when you enter the commands.</div><div id="wwpID0E0JR0HA" class="Body_Text">Placeholders that are used in only one or a few sections are defined in those sections.</div><div id="wwpID0E0IR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;function&gt;</span> is a functional module name, such as <span class="Code_Char">power-tree</span>, <span class="Code_Char">pinmux</span>, <span class="Code_Char">sdmmc-drv</span>, <span class="Code_Char">keys</span>, <span class="Code_Char">comm</span> (Wi‑Fi/Bluetooth<span style="vertical-align: super">®</span>), <span class="Code_Char">camera</span>, etc.</div><div id="wwpID0E0HR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;carrier&gt;</span> is the P-number of the reference carrier board you are using:</div><div id="wwpID0E0GR0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="font-family: &quot;Palatino Linotype&quot;">•	</span></span>For original Jetson Nano, <span class="Code_Char">P3449 or P3452</span></div><div id="wwpID0E0FR0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB, <span class="Code_Char">p3542</span>.</div><div id="wwpID0E0ER0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;version&gt;</span> is the reference carrier board’s version number, such as <span class="Code_Char">a00</span>. <span class="Code_Char">.dts</span> filenames for some NVIDIA reference carrier boards include a version number. Files for customer platforms need not include one.</div><div id="wwpID0E0DR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;code&gt;</span> is the codename of the Jetson Nano variant you are using:</div><div id="wwpID0E0CR0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For original Jetson Nano, <span class="Code_Char">porg</span></div><div id="wwpID0E0BR0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB, <span class="Code_Char">batuu</span></div><div id="wwpID0E0AR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;board&gt;</span> is a name you have chosen to represent the combination of your carrier board and Jetson Nano module. For example, <span class="Code_Char">p3450</span> could represent the carrier board from an original Jetson Nano Developer Kit with Jetson Nano module. Note that NVIDIA <span class="Code_Char">&lt;board&gt;</span> names use lower case letters only.</div><div id="wwpID0E06Q0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;vendor&gt;</span> is your organization’s name, or the name of your board’s vendor.</div><div id="wwpID0E05Q0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;root</span><span class="Code_Char" style="font-size: 12pt">&gt;</span> is the device that holds the platform’s root file system. At present the only supported value is <span class="Code_Char">sdcard</span>.</div><H3 id="wwpID0E04Q0HA" class="Heading_3">Root Filesystem Configuration</H3><div id="wwpID0E03Q0HA" class="Body_Text">Jetson Linux can use any standard or customized Linux root filesystem (rootfs) that is appropriate for the targeted embedded application.</div><div id="wwpID0E02Q0HA" class="Body_Text">However, certain settings must be configured in the rootfs’s boot-up framework to set the default configuration after boot, or some of the core functionalities will not run as expected. The configuration file’s pathname is <span class="Code_Char">/boot/</span><span class="Code_Char" style="font-family: Calibri">​</span><span class="Code_Char">extlinux/</span><span class="Code_Char" style="font-family: Calibri">​</span><span class="Code_Char">extlinux.conf</span>.</div><div id="wwpID0E01Q0HA" class="Body_Text">Kernel command line parameters are passed from <span class="Code_Char">/boot/</span><span class="Code_Char" style="font-family: Calibri">​</span><span class="Code_Char">extlinux/</span><span class="Code_Char" style="font-family: Calibri">​</span><span class="Code_Char">extlinux.conf</span>.</div><div id="wwpID0E0ZQ0HA" class="Body_Text">For example:</div><div id="wwpID0E0YQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The system must be configured to execute the <span class="Code_Char">nv.sh</span>, <span class="Code_Char">nvfb-early.sh</span>, and <span class="Code_Char">nvfb.sh</span> scripts in <span class="Code_Char">etc/systemd</span> at boot-up because they perform some basic default board initialization in the kernel. It is advisable to add to the <span class="Code_Char">etc</span> folder but never delete anything from it.</div><div id="wwpID0E0XQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The Xorg and X libraries must be correctly configured for the target device.</div><div id="wwpID0E0WQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>In the target device’s <span class="Code_Char">nvpmodel</span>, the number of cores, clock, and frequency must be configured.</div><div id="wwpID0E0VQ0HA" class="Body_Text">These rootfs configurations and customizations are provided in this driver package in the directory and its subdirectories:</div><div id="wwpID0E0UQ0HA" class="Code">Linux_for_Tegra/nv_tegra/</div><div id="wwpID0E0TQ0HA" class="Body_Text">You must incorporate the relevant customization for your target rootfs from this location.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0SQ0HA" class="Note_Image">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 315pt"><div id="wwpID0EAAA0SQ0HA" class="Note_Text">For the sample root filesystem provided by NVIDIA, this customization is applied using the script <span class="Code_Char" style="font-size: 10pt">Linux_for_Tegra/apply_binaries.sh</span>.</div></td></tr></table></div><H3 id="wwpID0E0RQ0HA" class="Heading_3">Pinmux Changes</H3><div id="wwpID0E0QQ0HA" class="Body_Text">If your board schematic differs from that for your developer kit carrier board, you must change the pinmux configuration applied by the software.</div><div id="wwpID0E0PQ0HA" class="Body_Text">To define your board’s pinmux configuration, you must download the appropriate <span class="Hyperlink"><a href="https://developer.nvidia.com/embedded/downloads#?search=Developer%20Kit%20Pinmux" target="external_window">Jetson Nano pinmux table</a></span> from the Jetson Download Center and customize it for the configuration of your board using the following procedures. Be sure to get the right version of the table for your SOM.</div><div id="wwpID0E0OQ0HA" class="Heading_5">To customize the pinmux spreadsheet</div><div id="wwpID0E0MQ0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Create a copy of the file with a name based on your board name, e.g. <span class="Code_Char">&lt;board&gt;_pinmux.xlsm</span>. Note the directory in which you stored the copy; you will need it in the procedure <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0AQ0HA" title="Jetson Nano Adaptation and Bring-Up">Updating the Bootloader Pinmux</a></span>.</div><div id="wwpID0E0LQ0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Ensure that the new file is writable.</div><div id="wwpID0E0KQ0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>On a Windows PC, open the new file in Microsoft Excel.</div><div id="wwpID0E0JQ0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>If Microsoft Excel displays any warnings such as “PROTECTED VIEW” or “SECURITY WARNING,” click Enable Editing or Enable Content, so that you can save your changes to the new file.</div><div id="wwpID0E0IQ0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Rename the Jetson Nano Configuration tab based on the name of your board:</div><div id="wwpID0E0HQ0HA" class="List_Number_2"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Right click the Jetson Nano Configuration tab at the bottom of the window.</div><div id="wwpID0E0GQ0HA" class="List_Number_2"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Click the Rename menu option.</div><div id="wwpID0E0FQ0HA" class="List_Number_2"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Type your board name into the tab, then press ENTER.</div><div id="wwpID0E0EQ0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>6.	</span></span>Modify the spreadsheet columns grouped under the heading “Filled in by Customers” as required from the pinmux configuration for your board, based on the schematic.</div><div id="wwpID0E0DQ0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>7.	</span></span>Once the spreadsheet reflects the configuration you want, click the Generate DT File button to run a macro that exports the configuration data to a pair of <span class="Code_Char">.dtsi</span> files in the directory where the spreadsheet is stored. The macro prompts you to enter a prefix for the files’ names; use the default value:</div><div id="wwpID0E0CQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For original Jetson Nano, <span class="Code_Char">jetson_nano_module</span></div><div id="wwpID0E0BQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB, <span class="Code_Char">jetson_nano_2gb_module</span></div><H4 id="wwpID0E0AQ0HA" class="Heading_4">Updating the Bootloader Pinmux</H4><div id="wwpID0E06P0HA" class="Body_Text">The CBoot bootloader uses device tree files generated from the pinmux spreadsheet to configure the pinmux.</div><div id="wwpID0E04P0HA" class="Body_Text">The pinmux settings in device tree files are only applied by CBoot, and not reapplied by the Linux kernel.</div><div id="wwpID0E03P0HA" class="Body_Text">To use the updated device tree files, you must rebuild the device tree image for Jetson Nano.</div><div id="wwpID0E02P0HA" class="Heading_5">To update the device tree image</div><div id="wwpID0E01P0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Download the Linux kernel sources. For instructions see the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/kernel_custom.html#wwpID0E0NE0HA" title="Kernel Customization">Obtaining the Kernel Sources with Git</a></span> or <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/kernel_custom.html#wwpID0E0CE0HA" title="Kernel Customization">Manually Downloading and Expanding Kernel Sources</a></span>’ in the topic <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/kernel_custom.html#" title="Kernel Customization">Kernel Customization</a></span>. </div><div id="wwpID0E0ZP0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Set up the build environment by installing the toolchain and setting the environment variable <span class="Code_Char">CROSS_COMPILE</span> as described in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/xavier_toolchain.html#" title="Jetson Linux Toolchain">Jetson Linux Driver Package Toolchain</a></span> in the topic <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/kernel_custom.html#" title="Kernel Customization">Kernel Customization</a></span>.</div><div id="wwpID0E0YP0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Determine the SKU and version of the Jetson Nano device by executing this command on the device:</div><div id="wwpID0E0XP0HA" class="Code">$ cat /proc/device-tree/nvidia,dtsfilename</div><div id="wwpID0E0WP0HA" class="List_Continue">The command displays the file name of the device tree source file, which has one of the forms:</div><div id="wwpID0E0VP0HA" class="Code_Indent"><span class="Code_Char">tegra210-p3448-&lt;sku&gt;-&lt;carrier&gt;-&lt;ver&gt;.dts</span></div><div id="wwpID0E0UP0HA" class="Code_Indent"><span class="Code_Char">tegra210-p3448-&lt;sku&gt;-&lt;carrier&gt;.dts</span></div><div id="wwpID0E0TP0HA" class="List_Continue">Where:</div><div id="wwpID0E0SP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;sku&gt;</span> is the SKU of the Jetson Nano device: for original Jetson Nano, <span class="Code_Char">0000</span> or <span class="Code_Char">0002</span>; for Jetson Nano 2GB, <span class="Code_Char">0003</span>.</div><div id="wwpID0E0RP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;ver&gt;</span> is the version of the Jetson Nano device. For original Jetson Nano, it is <span class="Code_Char">a02</span> or <span class="Code_Char">b00</span>. For Jetson Nano 2GB it is absent, and the preceding hyphen is also absent. This device has no version.</div><div id="wwpID0E0QP0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Locate the directory that contains the pinmux spreadsheet that you modified in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0OQ0HA" title="Jetson Nano Adaptation and Bring-Up">To customize the pinmux spreadsheet</a></span>. Remember that this pathname is on the Windows host, which must be accessible to Linux through the network.</div><div id="wwpID0E0PP0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Copy the generated <span class="Code_Char">.dtsi</span> files from the directory that contains the spreadsheet to the following locations:</div><div id="wwpID0E0OP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For original Jetson Nano:</div><div id="wwpID0E0NP0HA" class="Code_Indent"><span class="Code_Char">&lt;prefix&gt;-pinmux.dtsi</span> to <span class="Code_Char">&lt;src&gt;/hardware/‌nvidia/platform/‌t210/&lt;code&gt;/‌kernel-dts/&lt;code&gt;-platforms/‌tegra210-&lt;code&gt;-pinmux-p3448-&lt;sku_ver&gt;.dtsi</span></div><div id="wwpID0E0MP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB:</div><div id="wwpID0E0LP0HA" class="Code_Indent"><span class="Code_Char">&lt;prefix&gt;-gpio.dtsi</span> to <span class="Code_Char">&lt;src&gt;/hardware/‌nvidia/platform/‌t210/&lt;code&gt;/‌kernel-dts/&lt;code&gt;-platforms/‌jetson_nano_2gb_module-pinmux.dtsi</span></div><div id="wwpID0E0KP0HA" class="List_Continue">Where:</div><div id="wwpID0E0JP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;prefix&gt;</span> is the filename prefix that you entered in step&nbsp;<a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0DQ0HA" title="Jetson Nano Adaptation and Bring-Up">7</a> of <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_tx1.html#wwpID0E02M0HA" title="Jetson TX1 Adaptation and Bring-Up">To customize the pinmux spreadsheet</a></span>.</div><div id="wwpID0E0IP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;src&gt;</span> is the pathname of the kernel sources that you downloaded in step&nbsp;<a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E01P0HA" title="Jetson Nano Adaptation and Bring-Up">1</a>.</div><div id="wwpID0E0HP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;sku_ver&gt;</span> is the module’s SKU and version, which you identified in step&nbsp;<a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E0YP0HA" title="Jetson Nano Adaptation and Bring-Up">3</a>:</div><div id="wwpID0E0GP0HA" class="List_Bullet_3"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For original Jetson Nano, <span class="Code_Char">&lt;sku&gt;</span>, followed by a hyphen, followed by <span class="Code_Char">&lt;ver&gt;;</span> for example, <span class="Code_Char">e</span></div><div id="wwpID0E0FP0HA" class="List_Bullet_3"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB, <span class="Code_Char">&lt;sku&gt;</span> alone, i.e. <span class="Code_Char">0003</span></div><div id="wwpID0E0EP0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>6.	</span></span>Rebuild the device tree image:</div><div id="wwpID0E0DP0HA" class="Code">$ cd &lt;src_path&gt;/kernel/kernel-4.9/</div><div id="wwpID0E0CP0HA" class="Code">$ make ARCH=arm64 tegra_defconfig</div><div id="wwpID0E0BP0HA" class="Code">$ make ARCH=arm64 dtbs</div><div id="wwpID0E0AP0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>7.	</span></span>Copy the updated device tree image to the L4T release tree:</div><div id="wwpID0E06O0HA" class="Code_Indent">$ <span class="HTML_Code">arch/arm64/boot/dts/tegra210-p3448-</span><span class="Strong">&lt;sku&gt;</span><span class="HTML_Code">-&lt;carrier&gt;</span><span class="hljs-number">-0000</span><span class="HTML_Code">.dtb &lt;</span><span class="hljs-keyword">path</span><span class="HTML_Code">-</span><span class="hljs-keyword">to</span><span class="HTML_Code">-L4T-</span><span class="hljs-keyword">release</span><span class="HTML_Code">&gt;/kernel/dtb/</span></div><div id="wwpID0E05O0HA" class="List_Continue">Where <span class="Code_Char">&lt;sku&gt;</span> is the module’s SKU.</div><div id="wwpID0E04O0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>8.	</span></span>To reflash the target device for the new pinmux configuration to be applied, follow the instructions in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/flashing.html#wwpID0E0MQ0HA" title="Flashing and Booting the Target Device">Basic Flashing Procedures</a></span> of the topic <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/flashing.html#" title="Flashing and Booting the Target Device">Flashing and Booting the Target Device</a></span>.</div><H3 id="wwpID0E03O0HA" class="Heading_3">Accessing GPIOs via “gpio” Device Labels</H3><div id="wwpID0E02O0HA" class="Body_Text">You can access GPIOs (routed to the 40-pin GPIO expansion header) via device labels that begin with <span class="Code_Char">gpio</span>. The file <span class="Code_Char">/sys/kernel/debug/gpio</span> lists these labels.</div><div id="wwpID0E01O0HA" class="Body_Text">For example, to access gpio-19, enter this command:</div><div id="wwpID0E0ZO0HA" class="Code">$ gpiofind SPI0_CS0</div><div id="wwpID0E0YO0HA" class="Body_Text">This command displays output like:</div><div id="wwpID0E0XO0HA" class="Code">gpiochip0 19</div><H3 id="wwpID0E0WO0HA" class="Heading_3">Exporting Pinmux for the Jetson Linux Kernel</H3><div id="wwpID0E0VO0HA" class="Body_Text">The Linux kernel uses device tree files to define the pinmux configuration. You can generate these files directly from the Excel spreadsheet.</div><div id="wwpID0E0UO0HA" class="Heading_5">To generate device tree files for your pinmux configuration</div><div id="wwpID0E0TO0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>In the spreadsheet, click Generate DT.</div><div id="wwpID0E0SO0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Answer “yes” to the prompt that asks whether you wish to generate the DT files.</div><div id="wwpID0E0RO0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Provide the name of your board when prompted.</div><div id="wwpID0E0QO0HA" class="Body_Text">The device tree files are saved in the same location as the Excel spreadsheet. After the file is generated, make sure that the file name matches the one you use in your kernel code. Correct the file name if there is a mismatch. Later, you will copy the device tree files into the Linux kernel source tree.</div><H3 id="wwpID0E0PO0HA" class="Heading_3">Porting U-Boot</H3><div id="wwpID0E0OO0HA" class="Body_Text">Perform the following actions in the U-Boot source code to add support for your board.</div><div id="wwpID0E0NO0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Copy this file to <span class="Code_Char">include/configs/&lt;board&gt;.h</span>:</div><div id="wwpID0E0MO0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="font-family: &quot;Palatino Linotype&quot;">•	</span></span>For original Jetson Nano, <span class="Code_Char">include/configs/p3450-0000.h</span></div><div id="wwpID0E0LO0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB, <span class="Code_Char">include/configs/p3541-0000.h</span></div><div id="wwpID0E0KO0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Edit the set of enabled devices and features in <span class="Code_Char">&lt;board&gt;.h</span> as appropriate for your board. For example, define the manifest constant <span class="Code_Char">CONFIG_TEGRA_BOARD_STRING</span>:</div><div id="wwpID0E0JO0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For original Jetson Nano, <span class="Code_Char">"NVIDIA P3450-0000"</span></div><div id="wwpID0E0IO0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB, <span class="Code_Char">"NVIDIA P3541-0000"</span></div><div id="wwpID0E0HO0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Copy this file to <span class="Code_Char">arch/arm/dts/tegra210-&lt;board&gt;.dts</span>:</div><div id="wwpID0E0GO0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For original Jetson Nano, <span class="Code_Char">arch/arm/dts/tegra210-p3450-porg.dts</span></div><div id="wwpID0E0FO0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB, <span class="Code_Char">arch/arm/dts/tegra210-p3541-0000.dts</span></div><div id="wwpID0E0EO0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Edit the set of enabled devices and their parameters (e.g. GPIO and IRQ IDs) in <span class="Code_Char">tegra210-&lt;board&gt;.dts</span> as appropriate for your board.</div><div id="wwpID0E0DO0HA" class="List_Continue">You may have to add, remove, or edit nodes and properties.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 67.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0CO0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 297pt"><div id="wwpID0EAAA0CO0HA" class="Note_Text">U-Boot and the Linux kernel do not always use exactly the same device tree schema (bindings) to represent the same data. Follow examples from U-Boot rather than from the Linux kernel.</div></td></tr></table></div><div id="wwpID0E0BO0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Add <span class="Code_Char">tegra210-&lt;board&gt;.dtb</span> to <span class="Code_Char">arch/arm/dts/Makefile</span>.</div><div id="wwpID0E0AO0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>6.	</span></span>Copy this file to <span class="Code_Char">configs/&lt;board&gt;_defconfig</span>:</div><div id="wwpID0E06N0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span style="font-family: &quot;Palatino Linotype&quot;">•	</span></span>For original Jetson Nano, <span class="Code_Char">configs/p3450-0000_defconfig</span></div><div id="wwpID0E05N0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB, <span class="Code_Char">configs/p3541-0000_defconfig</span></div><div id="wwpID0E04N0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>7.	</span></span>Edit <span class="Code_Char">&lt;board&gt;_defconfig</span> to refer to your board name.</div><div id="wwpID0E03N0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>8.	</span></span>Edit <span class="Code_Char">arch/arm/mach-tegra/tegra210/Kconfig</span> to add target config and Kconfig.</div><div id="wwpID0E02N0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>9.	</span></span>Copy this directory and its contents to <span class="Code_Char">board/&lt;vendor&gt;/&lt;board&gt;/</span>:</div><div id="wwpID0E01N0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For original Jetson Nano, <span class="Code_Char">board/nvidia/p3450-porg/</span></div><div id="wwpID0E0ZN0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For Jetson Nano 2GB, <span class="Code_Char">board/nvidia/p3541-0000/</span></div><div id="wwpID0E0YN0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>10.	</span></span>Edit all of the files in <span class="Code_Char">board/&lt;vendor&gt;/&lt;board&gt;/</span> to refer to your board name rather than to <span class="Code_Char">p3450-porg</span> or <span class="Code_Char">p3541-0000</span>.</div><div id="wwpID0E0XN0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>11.	</span></span>Edit <span class="Code_Char">board/&lt;vendor&gt;/&lt;board&gt;/MAINTAINERS</span> to provide the correct maintainer contact information for your board.</div><div id="wwpID0E0WN0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>12.	</span></span>Edit <span class="Code_Char">board/&lt;vendor&gt;/&lt;board&gt;/&lt;board&gt;.c</span> to provide the correct PMIC programming for your board, if required.</div><H3 id="wwpID0E0VN0HA" class="Heading_3">Porting the Linux Kernel</H3><div id="wwpID0E0UN0HA" class="Body_Text">There are two ways to adapt the device tree (the kernel configuration) to your needs:</div><div id="wwpID0E0TN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Create one or more device tree overlay files which U Boot adds to the kernel DTB to support new hardware. NVIDIA recommends this technique for most types of hardware support, such as sensors and add-in boards.</div><div id="wwpID0E0SN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Modify the kernel device tree (a kernel configuration file). This technique yields a complete, modified kernel that includes support for the new hardware. NVIDIA recommends this technique for supporting fixed hardware on a custom-designed carrier board.</div><div id="wwpID0E0RN0HA" class="List_Continue">Linux Kernel source is available for download from the <span class="Hyperlink"><a href="https://developer.nvidia.com/embedded/downloads" target="external_window">Jetson Download Center</a></span>. To modify the kernel device tree, edit the kernel DTB sources provided with the BSP. Add, remove, and revise the kernel DTB’s hardware nodes as necessary, and change properties that differ. Then recompile the DTB, replace the development kit’s DTB with the recompiled one, and reflash.</div><H4 id="wwpID0E0QN0HA" class="Heading_4">Creating Device Tree Overlay Files</H4><div id="wwpID0E0PN0HA" class="Body_Text">U Boot can load device tree overlay files (DTBOs) directly from extlinux.conf. This feature lets you add support for add-in hardware like cameras, CAN controllers, SPI, etc. without having to decompile, modify, recompile, and reflash the kernel DTB.</div><div id="wwpID0E0ON0HA" class="Body_Text">See the topic <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#" title="U-Boot Customization">U‑Boot Customization</a></span> for instructions.</div><H4 id="wwpID0E0NN0HA" class="Heading_4">Modifying the Kernel Device Tree</H4><div id="wwpID0E0MN0HA" class="Body_Text">Linux kernel source is contained in these subdirectories in the <span class="Code_Char">kernel</span> directory:</div><div id="wwpID0E0LN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">kernel-4.9</span> contains all source that is upstreamed.</div><div id="wwpID0E0KN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia</span> contains NVIDIA specific software which is yet to be upstreamed.</div><div id="wwpID0E0JN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvgpu</span> contains the NVIDIA GPU driver.</div><div id="wwpID0E0IN0HA" class="Body_Text">You can add your own driver as is described in the Linux documentation. If you are modifying the device tree for your hardware, be sure to observe these points:</div><div id="wwpID0E0HN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The SoC-related device tree is located at:</div><div id="wwpID0E0GN0HA" class="Code_Indent">&lt;top&gt;/hardware/nvidia/soc/t210/</div><div id="wwpID0E0FN0HA" class="List_Continue">You generally do not need to change anything here.</div><div id="wwpID0E0EN0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The board-related device tree is located at:</div><div id="wwpID0E0DN0HA" class="Code_Indent">hardware/nvidia/platform/t210/&lt;code&gt;</div><div id="wwpID0E0CN0HA" class="List_Continue">If you replace the reference carrier board with a custom board, or you enable or disable any feature from the carrier board’s device tree, review the <span class="Code_Char">.dts</span> file at that location.</div><div id="wwpID0E0BN0HA" class="Heading_5">To update the kernel image and kernel DTB</div><div id="wwpID0E0AN0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Rebuild the kernel and DTB.</div><div id="wwpID0E06M0HA" class="List_Continue">Building the kernel will build the device tree files also.</div><div id="wwpID0E05M0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the kernel image to the host directory <span class="Code_Char">Linux_for_Tegra/kernel/</span>.</div><div id="wwpID0E04M0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Copy the kernel DTB to the host directory <span class="Code_Char">Linux_for_Tegra/kernel/dtb/</span>.</div><div id="wwpID0E03M0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Do a complete flash of the device:</div><div id="wwpID0E02M0HA" class="Code_Indent">$ sudo ./flash.sh  &lt;config&gt; mmcblk0p1</div><div id="wwpID0E01M0HA" class="List_Continue">Where <span class="Code_Char">&lt;config&gt;</span> is the basename of the flash configuration file:</div><div id="wwpID0E0ZM0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For an original Jetson Nano (P3448-0000) device: <span class="Code_Char">jetson-nano-devkit</span> </div><div id="wwpID0E0YM0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For a Jetson Nano (P3448-0002) device: <span class="Code_Char">jetson-nano-emmc</span></div><div id="wwpID0E0XM0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For a Jetson Nano 2GB (P3448-0003) device: <span class="Code_Char">jetson-nano-2gb-devkit</span></div><div id="wwpID0E0WM0HA" class="Heading_5">To update the kernel DTB alone</div><div id="wwpID0E0VM0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Rebuild the kernel.</div><div id="wwpID0E0UM0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Enter this command to convert the DTB to a DTS:</div><div id="wwpID0E0TM0HA" class="Code_Indent">$ dtc -I dtb -O dts tegra210-p3448-&lt;sku&gt;-&lt;carrier&gt;-0000-&lt;version&gt;.dtb &gt; ~/tegra210-p3448-&lt;sku&gt;-&lt;carrier&gt;-0000-&lt;version&gt;.dts</div><div id="wwpID0E0SM0HA" class="List_Continue">For Jetson Nano 2GB, which has no version, omit <span class="Code_Char">&lt;version&gt;</span> and the preceding hyphen.</div><div id="wwpID0E0RM0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Modify the device tree as necessary.</div><div id="wwpID0E0QM0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Enter this command to convert the DTS back to a DTB:</div><div id="wwpID0E0PM0HA" class="Code_Indent">$ dtc -I dts -O dtb  ~/tegra210-p3448-&lt;sku&gt;-&lt;carrier&gt;-0000-&lt;version&gt;-a00.dts &gt;  tegra210-p3448-&lt;sku&gt;-&lt;carrier&gt;-0000-&lt;version&gt;.dtb</div><div id="wwpID0E0OM0HA" class="List_Continue">If you are replacing the reference carrier board with a custom carrier board, look out for instances of <span class="Code_Char">&lt;carrier&gt;</span> in the DTB. Make sure you understand them and replace them according on your needs.</div><div id="wwpID0E0NM0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Copy the generated DTB to the following directory for flashing:</div><div id="wwpID0E0MM0HA" class="Code_Indent">Linux_for_Tegra/kernel/dtb/</div><div id="wwpID0E0LM0HA" class="List_Continue">To provide plugin manager support, the kernel DTB is not included in the file system along with the kernel image in the boot directory. Instead, the kernel DTB is selected from the DTB partition and modified by CBoot. CBoot passes it on to U‑Boot, which in turn passes it to the kernel without changing any of the data.</div><div id="wwpID0E0KM0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>6.	</span></span>Flash the DTB:</div><div id="wwpID0E0JM0HA" class="Code_Indent">$ sudo ./flash.sh -k DTB &lt;config&gt; mmcblk0p1</div><div id="wwpID0E0IM0HA" class="Heading_5">Steps to update the kernel image alone</div><div id="wwpID0E0HM0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Enter this command to build the kernel:</div><div id="wwpID0E0GM0HA" class="Code">$ make ARCH=arm64 tegra_defconfig</div><div id="wwpID0E0FM0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the kernel image to the target’s <span class="Code_Char">/boot</span> directory over Ethernet.</div><div id="wwpID0E0EM0HA" class="Body_Text">For the detailed information about <span class="Code_Char">.dts</span> files, refer to the documentation at <span class="Code_Char">Documentation/devicetree/bindings</span> in the NVIDIA Linux kernel source package.</div><H3 id="wwpID0E0DM0HA" class="Heading_3">Porting USB</H3><div id="wwpID0E0CM0HA" class="Body_Text">Jetson Nano can support up to three SuperSpeed USB ports. In some implementations not all of these ports can be used because of UPHY lane sharing among PCIE and XUSB.</div><div id="wwpID0E0AM0HA" class="Body_Text">The Jetson Nano reference carrier boards are designed and verified for one USB 3.0 port. If you plan to create a custom carrier board, consult <span class="Hyperlink"><a href="https://developer.nvidia.com/embedded/downloads#?search=product%20design%20guide%20%20jetson%20nano%20devices" target="external_window">Product Design Guide for Jetson Nano Devices</a></span> to verify that your board’s UPHY lane mapping is functionally compatible with that of the appropriate reference carrier board.</div><H4 id="wwpID0E06L0HA" class="Heading_4">USB Structure</H4><div id="wwpID0E05L0HA" class="Body_Text">A SuperSpeed USB port has nine pins:</div><div id="wwpID0E04L0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>VBUS</div><div id="wwpID0E03L0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>GND</div><div id="wwpID0E02L0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>D+/D−</div><div id="wwpID0E01L0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>SSTX+/SSTX− (SuperSpeed data transmit)</div><div id="wwpID0E0ZL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>SSRX+/SSRX− (SuperSpeed data receive)</div><div id="wwpID0E0YL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>GND_DRAIN for drain wire termination and managing EMI, RFI, and signal integrity</div><div class="ww_skin_page_overflow"><div id="wwpID0E0XL0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/adaptation_and_bringup_nano.1.1.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><div id="wwpID0E0WL0HA" class="Body_Text">The D+/D− signal pins connect to UTMI pads. The SSTX/SSRX signal pins connect to UPHY and are handled by a single UPHY lane. As UPHY lanes are shared between PCIE and XUSB, UPHY lanes must be assigned according to the custom carrier board’s requirements.</div><H4 id="wwpID0E0VL0HA" class="Heading_4">UPHY Lane Assignment</H4><div id="wwpID0E0UL0HA" class="Body_Text">Universal Physical Layer (<span class="Strong">UPHY</span>) is a physical I/O interface layer that can serve multiple types of interfaces, e.g. USB and PCIe. A single UPHY lane can support multiple types of interfaces.</div><div id="wwpID0E0TL0HA" class="Body_Text">The Jetson Nano reference carrier boards are designed and verified for one USB 3.0 port. The verified use cases and their UPHY lane assignments are shown in the following tables.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 35.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.75pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 130.5pt" colspan="2"><div id="wwpID0EAAD0SL0HA" class="Cell_Heading">Available outputs for a reference carrier board</div></th></tr><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.75pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 58.5pt"><div id="wwpID0EABC0SL0HA" class="Cell_Heading">Output Type</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.75pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 72pt"><div id="wwpID0EAAC0SL0HA" class="Cell_Heading">Number of Outputs</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 58.5pt"><div id="wwpID0EABB0SL0HA" class="Cell_Text">USB 3.0</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 72pt"><div id="wwpID0EAAB0SL0HA" class="Cell_Text" style="text-align: center">1</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0SL0HA" class="Cell_Text">PCIe</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0SL0HA" class="Cell_Text" style="text-align: center">1 x4</div></td></tr></table></div><div id="wwpID0E0RL0HA" class="Leading">&nbsp;</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 40.25pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 189pt" colspan="3"><div id="wwpID0EAAI0QL0HA" class="Cell_Heading">UPHY lane assignment use cases</div></td></tr><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 40.5pt"><div id="wwpID0EACH0QL0HA" class="Cell_Heading">Lane</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 63pt"><div id="wwpID0EABH0QL0HA" class="Cell_Heading">Pin Names</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 85.5pt"><div id="wwpID0EAAH0QL0HA" class="Cell_Heading">Functions</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACG0QL0HA" class="Cell_Text" style="text-align: center">0</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0QL0HA" class="Cell_Text" style="text-align: center">N/A</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG0QL0HA" class="Cell_Text" style="text-align: center">PCIe x1<br />C1</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACF0QL0HA" class="Cell_Text" style="text-align: center">1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0QL0HA" class="Cell_Text" style="text-align: center">PEX_TX1<br />PEX_RX1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" rowspan="4"><div id="wwpID0EAAF0QL0HA" class="Cell_Text" style="text-align: center">PCIe x4<br />C0 (L3/L2/L1/L0)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACE0QL0HA" class="Cell_Text" style="text-align: center">2</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0QL0HA" class="Cell_Text" style="text-align: center">PEX_TX2<br />PEX_RX2</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACD0QL0HA" class="Cell_Text" style="text-align: center">3</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0QL0HA" class="Cell_Text" style="text-align: center">PEX_TX3<br />PEX_RX3</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACC0QL0HA" class="Cell_Text" style="text-align: center">4</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0QL0HA" class="Cell_Text" style="text-align: center">PEX_TX4<br />PEX_RX4</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACB0QL0HA" class="Cell_Text" style="text-align: center">5</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0QL0HA" class="Cell_Text" style="text-align: center">N/A</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0QL0HA" class="Cell_Text" style="text-align: center">N/A</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACA0QL0HA" class="Cell_Text" style="text-align: center">6</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0QL0HA" class="Cell_Text" style="text-align: center">PEX_TX6<br />PEX_RX6</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0QL0HA" class="Cell_Text" style="text-align: center">USB3.0<br />P0</div></td></tr></table></div><div id="wwpID0E0OL0HA" class="Body_Text">Jetson Nano and the supporting software are designed to support the configurations in these tables. See <span class="Hyperlink"><a href="https://developer.nvidia.com/embedded/downloads#?search=Tegra%20X1%20(SoC)" target="external_window">Tegra X1 (SoC) Technical Reference Manual</a></span> (TRM) and consult <span class="Hyperlink"><a href="https://developer.nvidia.com/embedded/downloads#?search=product%20design%20guide%20%20jetson%20nano%20devices" target="external_window">Product Design Guide for Jetson Nano Devices</a></span> for further information before you design your custom board. (Note that <span class="Emphasis">Tegra X1 Technical Reference Manual</span> applies to Jetson Nano devices as well as NVIDIA<span style="vertical-align: super">®</span> Jetson™ TX1.)</div><div id="wwpID0E0NL0HA" class="Body_Text">Lane assignment can be defined by the PCIe subnode under <span class="Code_Char">xusb_padctl</span> in the corresponding device tree file. The device tree’s <span class="Code_Char">xusb_padctl</span> node follows the conventions of the document:</div><div id="wwpID0E0ML0HA" class="Code">kernel/kernel-4.9/Documentation/devicetree/bindings/pinctrl/pinctrl-bindings.txt</div><div id="wwpID0E0LL0HA" class="Body_Text">The PCIe subnode lists the functions assigned to UPHY lanes.</div><div id="wwpID0E0KL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia,function</span>: A string containing the name of the function to mux to the pin or group. It must be one of these values:</div><div id="wwpID0E0JL0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">xusb</span></div><div id="wwpID0E0IL0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">pcie-x1</span></div><div id="wwpID0E0HL0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">pcie-x4</span></div><div id="wwpID0E0GL0HA" class="Body_Text">Take the table of <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0EAAI0QL0HA" title="Jetson Nano Adaptation and Bring-Up">UPHY lane assignment use cases</a></span>, for example. Create a PCIe subnode and property under <span class="Code_Char">xusb_padctl</span> based on the device tree structure described above:</div><div id="wwpID0E0FL0HA" class="Code">xusb_padctl@7009f000 {</div><div id="wwpID0E0EL0HA" class="Code">    ...</div><div id="wwpID0E0DL0HA" class="Code">    pcie {</div><div id="wwpID0E0CL0HA" class="Code">        status = "okay"</div><div id="wwpID0E0BL0HA" class="Code">        lanes {</div><div id="wwpID0E0AL0HA" class="Code">            pcie-0 {</div><div id="wwpID0E06K0HA" class="Code">                status = "okay"</div><div id="wwpID0E05K0HA" class="Code">                nvidia,function = "pcie-x1";</div><div id="wwpID0E04K0HA" class="Code">            };</div><div id="wwpID0E03K0HA" class="Code">            pcie-1 {</div><div id="wwpID0E02K0HA" class="Code">                status = "okay"</div><div id="wwpID0E01K0HA" class="Code">                nvidia,function = "pcie-x4";</div><div id="wwpID0E0ZK0HA" class="Code">            };</div><div id="wwpID0E0YK0HA" class="Code">            pcie-2 {</div><div id="wwpID0E0XK0HA" class="Code">                status = "okay"</div><div id="wwpID0E0WK0HA" class="Code">                nvidia,function = "pcie-x4";</div><div id="wwpID0E0VK0HA" class="Code">            };</div><div id="wwpID0E0UK0HA" class="Code">            pcie-3 {</div><div id="wwpID0E0TK0HA" class="Code">                status = "okay"</div><div id="wwpID0E0SK0HA" class="Code">                nvidia,function = "pcie-x4";</div><div id="wwpID0E0RK0HA" class="Code">            };</div><div id="wwpID0E0QK0HA" class="Code">            pcie-4 {</div><div id="wwpID0E0PK0HA" class="Code">                status = "okay"</div><div id="wwpID0E0OK0HA" class="Code">                nvidia,function = "pcie-x4";</div><div id="wwpID0E0NK0HA" class="Code">            };</div><div id="wwpID0E0MK0HA" class="Code">            pcie-5 {</div><div id="wwpID0E0LK0HA" class="Code">                status = "okay"</div><div id="wwpID0E0KK0HA" class="Code">                nvidia,function = "xusb";</div><div id="wwpID0E0JK0HA" class="Code">            };</div><div id="wwpID0E0IK0HA" class="Code">            pcie-6 {</div><div id="wwpID0E0HK0HA" class="Code">                status = "okay"</div><div id="wwpID0E0GK0HA" class="Code">                nvidia,function = "xusb";</div><div id="wwpID0E0FK0HA" class="Code">            };</div><div id="wwpID0E0EK0HA" class="Code">        };</div><div id="wwpID0E0DK0HA" class="Code">    ...</div><div id="wwpID0E0CK0HA" class="Code">};</div><div id="wwpID0E0BK0HA" class="Body_Text">&nbsp;</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 67.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0AK0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 292.5pt"><div id="wwpID0EAAA0AK0HA" class="Note_Text">UPHY lane 0 and UPHY lane 5 are not exposed, and can only be assigned to the <span class="Code_Char" style="font-size: 10pt">pcie-x1</span> and <span class="Code_Char" style="font-size: 10pt">xusb</span> functions.</div></td></tr></table></div><H4 id="wwpID0E06J0HA" class="Heading_4">Required Device Tree Changes</H4><div id="wwpID0E05J0HA" class="Body_Text">This section gives step-by-step guidance for checking schematics and configuring USB ports in the device tree. All of the examples are based on the design of a Jetson Nano reference carrier board.</div><div id="wwpID0E04J0HA" class="Heading_5">For a Host-Only Port</div><div id="wwpID0E03J0HA" class="Body_Text">This section uses U27, a USB 3.0 Realtek SuperSpeed on-board hub, as an example of a host-only port.</div><div id="wwpID0E02J0HA" class="Heading_6">Go Through the Schematics</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA01J0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 315pt"><div id="wwpID0ECAA01J0HA" class="Note_Text">The reference carrier board schematic file for the NVIDIA reference carrier board provided with a developer kit is included in the carrier board design files.</div><div id="wwpID0EBAA01J0HA" class="Note_Text">For the original Jetson Nano carrier board (both P3449 and P3452), see <span class="Emphasis">Jetson Nano Developer Kit Carrier Board Design Files</span>, <span class="Code_Char" style="font-size: 10pt">P3449_B01_Concept_schematics.pdf</span>.</div><div id="wwpID0EAAA01J0HA" class="Note_Text">To obtain the design files for the Jetson Nano 2GB carrier board (P3542-0000), consult your NVIDIA representative.</div></td></tr></table></div><div id="wwpID0E0ZJ0HA" class="Body_Text">Check the USB 3.0 Realtek SuperSpeed hub on the reference carrier board and find the pin names of the wired socket to the Jetson Nano module.</div><div id="wwpID0E0YJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>USB 2.0 signal pins D+/D- (USB_DP/USB_DM) wire out from U27 and lead to module socket pins 115 (USB1_DN) and 116 (USB1_DP).</div><div class="ww_skin_page_overflow"><div id="wwpID0E0XJ0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image2_9.png" style="display: inline; left: 0pt; top: 0pt" alt="A screenshot of a cell phoneDescription automatically generated" title="A screenshot of a cell phoneDescription automatically generated" /></div></div><div id="wwpID0E0WJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>USB 3.0 differential signal pairs (USP_SSTX* and USP_SSRX*) wire out from U27 and lead to module socket pins 161 (SBSS_RX_N), 163 (USBSS_RX_P), 166 (USBSS_TX_N), and 168 (USBSS_TX_P).</div><div class="ww_skin_page_overflow"><div id="wwpID0E0VJ0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image3_9.png" style="display: inline; left: 0pt; top: 0pt" alt="A screenshot of a cell phoneDescription automatically generated" title="A screenshot of a cell phoneDescription automatically generated" /></div></div><div id="wwpID0E0UJ0HA" class="Body_Text">Through the schematic, you can conclude that for U27:</div><div id="wwpID0E0TJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The USB 2.0 signal pair is wired to UTMI pad 1 (USB2 port 1).</div><div id="wwpID0E0SJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The USB 3.0 signal pairs are wired to UPHY lane 6 (USB 3.0 port 0 according to UPHY lane mapping).</div><div id="wwpID0E0RJ0HA" class="Heading_6">The xusb_padctl Node</div><div id="wwpID0E0QJ0HA" class="Body_Text">The device tree’s <span class="Code_Char">xusb_padctl</span> node follows the conventions of <span class="Code_Char">pinctrl-bindings.txt</span>. It contains two groups of named pads and ports which describe USB2 and USB3 signals along with parameters and port numbers. The name of each parameter description subnode in <span class="Code_Char">pads</span> and <span class="Code_Char">ports</span> must be in the form <span class="Code_Char">&lt;type&gt;-&lt;port_number&gt;</span>, where <span class="Code_Char">&lt;type&gt;</span> is <span class="Code_Char">usb2</span> or <span class="Code_Char">usb3</span>, and <span class="Code_Char">&lt;port_number&gt;</span> is the associated port number.</div><div id="wwpID0E0PJ0HA" class="Body_Text"><span class="Strong">The pads Subnode</span></div><div id="wwpID0E0OJ0HA" class="Body_Text">The properties of the <span class="Code_Char">pads</span> subnode are:</div><div id="wwpID0E0NJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia,function</span>: A string containing the name of the function to mux to the pin or group. Must be <span class="Code_Char">xusb</span>.</div><div id="wwpID0E0MJ0HA" class="Body_Text"><span class="Strong">The ports Subnode</span></div><div id="wwpID0E0LJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">mode</span>: A string that describes USB port capability. A port for USB2 must have this property. It must be one of these values:</div><div id="wwpID0E0KJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">host</span></div><div id="wwpID0E0JJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">device</span></div><div id="wwpID0E0IJ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">otg</span></div><div id="wwpID0E0HJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia,usb2-companion</span>: The USB2 port (0, 1, or 2) to which the port is mapped. A port for USB3 must have this property.</div><div id="wwpID0E0GJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia,oc-pin</span>: The overcurrent VBUS pin the port is using. The value must be positive or zero.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0FJ0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 315pt"><div id="wwpID0EAAA0FJ0HA" class="Note_Text">Overcurrent detection and handling for U27, the Realtek SuperSpeed hub on the reference carrier board, are controlled by the hub itself. Therefore, you need not set this property.</div></td></tr></table></div><div id="wwpID0E0EJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">vbus-supply</span>: VBUS regulator for the corresponding UTMI pad. Set to <span class="Code_Char">&amp;battery_reg</span> for a dummy regulator.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0DJ0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 315pt"><div id="wwpID0EAAA0DJ0HA" class="Note_Text">As the Realtek SuperSpeed hub is always connected to the root hub port on a Jetson Nano reference carrier board, you need not control hub power, just enable it with <span class="Code_Char">VDD_HUB_3V3</span>. Therefore, you must set dummy regulators for U27 on the reference carrier board.</div></td></tr></table></div><div id="wwpID0E0CJ0HA" class="Body_Text">For the detailed information about <span class="Code_Char">xusb_padctl</span>, refer to the documentation at:</div><div id="wwpID0E0BJ0HA" class="Code">kernel/kernel-4.9/Documentation/devicetree/bindings/phy/nvidia,xusb-padctl.txt</div><div id="wwpID0E0AJ0HA" class="Body_Text">As an example, consider U27, the Realtek SuperSpeed hub, which is always connected to USB2 port&nbsp;1 and USB3 port&nbsp;0 on the root hub. Create a pad/port node and property list for U27 based on the device tree structure described above:</div><div id="wwpID0E06I0HA" class="Code">xusb_padctl: xusb_padctl@7009f000 {</div><div id="wwpID0E05I0HA" class="Code">    ...</div><div id="wwpID0E04I0HA" class="Code">    pads {</div><div id="wwpID0E03I0HA" class="Code">        usb2 {</div><div id="wwpID0E02I0HA" class="Code">            status = "okay";</div><div id="wwpID0E01I0HA" class="Code">            lanes {</div><div id="wwpID0E0ZI0HA" class="Code">                ...</div><div id="wwpID0E0YI0HA" class="Code">                usb2-1 {</div><div id="wwpID0E0XI0HA" class="Code">                    nvidia,function = "xusb";</div><div id="wwpID0E0WI0HA" class="Code">                    status = "okay";</div><div id="wwpID0E0VI0HA" class="Code">                };</div><div id="wwpID0E0UI0HA" class="Code">                ...</div><div id="wwpID0E0TI0HA" class="Code">            };</div><div id="wwpID0E0SI0HA" class="Code">        };</div><div id="wwpID0E0RI0HA" class="Code">        pcie {</div><div id="wwpID0E0QI0HA" class="Code">            status = "okay";</div><div id="wwpID0E0PI0HA" class="Code">            lanes {                ...//UPHY lane assignment</div><div id="wwpID0E0OI0HA" class="Code">            };</div><div id="wwpID0E0NI0HA" class="Code">        };</div><div id="wwpID0E0MI0HA" class="Code">    };</div><div id="wwpID0E0LI0HA" class="Code">    ports {</div><div id="wwpID0E0KI0HA" class="Code">        usb2-1 {</div><div id="wwpID0E0JI0HA" class="Code">            mode = "host";</div><div id="wwpID0E0II0HA" class="Code">            vbus-supply = &lt;&amp;battery_reg&gt;;</div><div id="wwpID0E0HI0HA" class="Code">            status = "okay";</div><div id="wwpID0E0GI0HA" class="Code">        };</div><div id="wwpID0E0FI0HA" class="Code">        ...</div><div id="wwpID0E0EI0HA" class="Code">        usb3-0 {</div><div id="wwpID0E0DI0HA" class="Code">            nvidia,usb2-companion = &lt;1&gt;;</div><div id="wwpID0E0CI0HA" class="Code">            status = "okay";</div><div id="wwpID0E0BI0HA" class="Code">        };</div><div id="wwpID0E0AI0HA" class="Code">        ...</div><div id="wwpID0E06H0HA" class="Code">    };</div><div id="wwpID0E05H0HA" class="Code">};</div><div id="wwpID0E04H0HA" class="Heading_6">Under the xusb Node</div><div id="wwpID0E03H0HA" class="Body_Text">The Jetson Nano xHCI controller complies with xHCI specifications, which support both USB 2.0 HighSpeed/FullSpeed/LowSpeed and USB 3.0 SuperSpeed protocols.</div><div id="wwpID0E02H0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">phys</span>: Must contain an entry for each entry in <span class="Code_Char">phy-names</span>.</div><div id="wwpID0E01H0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">phy-names</span>: Must include an entry for each PHY used by the controller. Names must be of the form &lt;type&gt;-&lt;port_number&gt;, where &lt;type&gt; is "usb2" or "usb3".</div><div id="wwpID0E0ZH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia,boost_cpu_freq</span>: Set the value to which CPU frequency will be boosted. This is only the minimum frequency, DVFS can scale up CPU frequency further based on need and CPU loading. CPU boost frequency through PMQOS is enabled for the xHCI controller only when this field’s is greater than zero. The boost is applicable only for bulk and ISOC transfers; other endpoints do not need to be boosted.</div><div id="wwpID0E0YH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia,boost_cpu_trigger</span>: Minimum buffer length of the bulk or ISOC transfers beyond which to boost frequency.</div><div id="wwpID0E0XH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia,xusb-padctl</span>: A pointer to the <span class="Code_Char">xusb-padctl</span> node.</div><div id="wwpID0E0WH0HA" class="Body_Text">For the detailed information about xHCI, see the documentation at:</div><div id="wwpID0E0VH0HA" class="Code">kernel/kernel-4.9/Documentation/devicetree/bindings/usb/nvidia,tegra-xhci.txt</div><div id="wwpID0E0UH0HA" class="Body_Text">Consider U27, the Realtek SuperSpeed hub, as an example. Create an xHCI node and property list for U27 based on the device tree structure described above:</div><div id="wwpID0E0TH0HA" class="Code">xusb@70090000 {</div><div id="wwpID0E0SH0HA" class="Code">    ...</div><div id="wwpID0E0RH0HA" class="Code">    phys = &lt;&amp;{/xusb_padctl@7009f000/pads/usb2/lanes/usb2-1}&gt;,</div><div id="wwpID0E0QH0HA" class="Code">            &lt;&amp;{/xusb_padctl@7009f000/pads/pcie/lanes/pcie-6}&gt;;</div><div id="wwpID0E0PH0HA" class="Code">    phy-names = "usb2-1", "usb3-0";</div><div id="wwpID0E0OH0HA" class="Code">    nvidia,xusb-padctl = &lt;&amp;xusb_padctl&gt;;</div><div id="wwpID0E0NH0HA" class="Code">    status = "okay";</div><div id="wwpID0E0MH0HA" class="Code">    ...</div><div id="wwpID0E0LH0HA" class="Code">};</div><div id="wwpID0E0KH0HA" class="Heading_5">For an OTG (On-The-Go) Compatible Port</div><div id="wwpID0E0JH0HA" class="Body_Text">USB On-The-Go, often abbreviated <span class="Strong">USB OTG</span> or just <span class="Strong">OTG</span>, is a specification that allows USB to act as a host or a device on the same port. A USB OTG port can switch back and forth between the roles of host and device.</div><div id="wwpID0E0IH0HA" class="Body_Text">Jetson Nano USB supports OTG features when connected to a device that has an OTG port. For OTG feature support </div><div id="wwpID0E0HH0HA" class="Body_Text">a fifth pin, called the <span class="Code_Char">ID</span> pin, is added to the standard USB connector. An OTG cable has a USB Type&nbsp;A plug on one end and a Type&nbsp;B plug on the other end. The Type&nbsp;A plug’s ID pin is grounded, while the Type&nbsp;B plug’s ID pin is floating. A device with a Type&nbsp;A plug inserted becomes and OTG A-device (host), and a device with a Type&nbsp;B plug inserted becomes a B-device (device).</div><div class="ww_skin_page_overflow"><div id="wwpID0E0GH0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image4_16.png" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0FH0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 310.5pt"><div id="wwpID0EAAA0FH0HA" class="Note_Text">Because its ID pin is floating, J28 is fixed in the device role in the developer kit. It cannot function as a host, e.g. to connect a flash drive, keyboard, or mouse.</div></td></tr></table></div><div id="wwpID0E0EH0HA" class="Body_Text">This section uses J28, a USB 2.0 Micro B connector, as an example of an OTG port.</div><div id="wwpID0E0DH0HA" class="Heading_6">Go Through the Schematics</div><div id="wwpID0E0CH0HA" class="Body_Text">Refer to the reference carrier board’s schematic file included with the design files described above.</div><div id="wwpID0E0BH0HA" class="Body_Text">Check the USB connectors on the reference carrier board and find the wired socket location to the Jetson module.</div><div id="wwpID0E0AH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>USB 2.0 signal pins D+/D− (DP and DN) wire out from J28 and lead to 111 (USB0_DP) and 109 (USB0_DN) on the module socket.</div><div class="ww_skin_page_overflow"><div id="wwpID0E06G0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image5_14.png" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><div id="wwpID0E05G0HA" class="Body_Text">The USB 2.0 Micro B connector, J28, supports only HighSpeed mode, and does not have USB 3.0 signal pairs. See the <span class="Hyperlink"><a href="https://developer.nvidia.com/embedded/downloads#?search=Tegra%20X1%20(SoC)" target="external_window">Tegra X1 (SoC) Technical Reference Manual</a></span> (TRM) and consult <span class="Hyperlink"><a href="https://developer.nvidia.com/embedded/downloads#?search=product%20design%20guide%20%20jetson%20nano%20devices" target="external_window">Product Design Guide for Jetson Nano Devices</a></span> for further information before you design your custom board.</div><div id="wwpID0E04G0HA" class="Body_Text">From the schematic, you can see that for J28:</div><div id="wwpID0E03G0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The USB 2.0 signal pair is wired to UTMI pad 0 (USB2 port 0).</div><div id="wwpID0E02G0HA" class="Heading_6">The External Connector Class (extcon)</div><div id="wwpID0E01G0HA" class="Body_Text">External connectors, which may have different types of cables attached (USB, TA, HDMI, Analog A/V, and others), often have device drivers that detect state changes at the port, and separate device drivers that do something according to the state changes.</div><div id="wwpID0E0ZG0HA" class="Body_Text">The <span class="Strong">External Connector Class</span>, <span class="Code_Char">extcon</span>, supports the use of a notifier for passing information such as state changes between device drivers.</div><div id="wwpID0E0YG0HA" class="Body_Text">Port switching between OTG roles is generally controlled by the host driver (xHCI) and device driver (xUDC), and can be defined by the state of the ID pin and the VBUS_DETECT pin.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0XG0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 319.5pt"><div id="wwpID0EAAA0XG0HA" class="Note_Text">Because its ID pin is floating, J28 is fixed in the device role in the Jetson Nano Developer Kit. It cannot function as a host, e.g. to connect a flash drive, keyboard, or mouse.</div></td></tr></table></div><div id="wwpID0E0WG0HA" class="Body_Text">For example, suppose GPIO_PCC4 is the VBUS_DETECT pin and GPIO_PZ1 is the ID pin. To complete the device tree node:</div><div id="wwpID0E0VG0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Find the corresponding GPIO states on the VBUS_DETECT pin and ID pin.</div><div id="wwpID0E0UG0HA" class="List_Continue">Generally, the ID pin is designed as internal pull high (logical high). With a Type&nbsp;A plug connected the ID pin is pulled to ground (logical low), while with a Type&nbsp;B plug connected or no cable connected it remains logical high.</div><div id="wwpID0E0TG0HA" class="List_Continue">The operation of the VBUS_DETECT pin depends on the device’s design. Consider the following schematic, for example:</div><div class="ww_skin_page_overflow"><div id="wwpID0E0SG0HA" class="List_Continue"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image6_11.png" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><div id="wwpID0E0RG0HA" class="List_Continue">With a Type&nbsp;B plug connected VBUS_DETECT is logical low because VBUS is provided from an external power supply. When no cable is connected it is logical high.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 67.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0QG0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 297pt"><div id="wwpID0EAAA0QG0HA" class="Note_Text">VBUS_DETECT is initially logical high, then logical low because VBUS is provided by the host controller. Therefore, the state of the VBUS_DETECT pin does not matter when the OTG-compatible port is operating in the host role.</div></td></tr></table></div><div id="wwpID0E0PG0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Create a table of GPIO states and their corresponding output cable states like the one in the following table.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 53.75pt" cellspacing="0" summary=""><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.75pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 319.5pt" colspan="3"><div id="wwpID0EAAF0OG0HA" class="Cell_Heading">GPIO states and corresponding output cable states</div></th></tr><tr><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.75pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 72pt"><div id="wwpID0EACE0OG0HA" class="Cell_Heading">GPIO_PZ1 (ID)</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.75pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.75pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 99pt"><div id="wwpID0EABE0OG0HA" class="Cell_Heading">GPIO_PCC4 (VBUS_DETECT)</div></th><th style="background-color: #DDEEBF; border-bottom-color: #7F7F7F; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #7F7F7F; border-left-style: solid; border-left-width: 0.75pt; border-right-color: #7F7F7F; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #7F7F7F; border-top-style: solid; border-top-width: 0.75pt; padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: bottom; width: 148.5pt"><div id="wwpID0EAAE0OG0HA" class="Cell_Heading">EXTCON_STATE</div></th></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 72pt"><div id="wwpID0EACD0OG0HA" class="Cell_Text" style="text-align: center">1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 99pt"><div id="wwpID0EABD0OG0HA" class="Cell_Text" style="text-align: center">1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 148.5pt"><div id="wwpID0EAAD0OG0HA" class="Cell_Text">0x0 (EXCON_NONE)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACC0OG0HA" class="Cell_Text" style="text-align: center">0</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0OG0HA" class="Cell_Text" style="text-align: center">0</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0OG0HA" class="Cell_Text">0x2 (EXTCON_USB_HOST)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACB0OG0HA" class="Cell_Text" style="text-align: center">0</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0OG0HA" class="Cell_Text" style="text-align: center">1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0OG0HA" class="Cell_Text">0x2 (EXTCON_USB_HOST)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACA0OG0HA" class="Cell_Text" style="text-align: center">1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0OG0HA" class="Cell_Text" style="text-align: center">0</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0OG0HA" class="Cell_Text">0x1 (EXTCON_USB)</div></td></tr></table></div><div id="wwpID0E0NG0HA" class="Heading_6">Under the extcon Node</div><div id="wwpID0E0MG0HA" class="Body_Text">Port switching between OTG roles is defined by the state of the ID pin and the VBUS_DETECT pin and the settings of the external connector class.</div><div id="wwpID0E0LG0HA" class="Body_Text">Create an <span class="Code_Char">extcon</span> device node and property list using the properties listed below and the table of <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0EAAF0OG0HA" title="Jetson Nano Adaptation and Bring-Up">GPIO states and cable states</a></span>, above.</div><div id="wwpID0E0KG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">compatible</span>: Value must be <span class="Code_Char">extcon-gpio-states</span>.</div><div id="wwpID0E0JG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-gpio,name</span>: Name of the <span class="Code_Char">extcon</span> device.</div><div id="wwpID0E0IG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">gpios</span>: List of the GPIOs.</div><div id="wwpID0E0HG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-gpio,irq-flags</span>: IRQ flags for GPIO.</div><div id="wwpID0E0GG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-gpio,debounce</span>: Debounce time in milliseconds.</div><div id="wwpID0E0FG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-gpio,wait-for-gpio-scan</span>: Wait timeout in milliseconds for scanning all GPIOs’ states after a GPIO state change is detected and debounce time has passed.</div><div id="wwpID0E0EG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-gpio,out-cable-names</span>: Output cable names.</div><div id="wwpID0E0DG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-gpio,cable-states</span>: GPIO states and their corresponding output cable states. The value is an array of byte values. Each even-numbered byte is a GPIO state, and the following odd-numbered byte is the corresponding output cable state.</div><div id="wwpID0E0CG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">cable-connected-on-boot</span>: Name of the output cable connected on boot, expressed as an index into <span class="Code_Char">extcon-gpio,out-cable-names</span>. The first element is index 0, and so on. If not specified, the system assumes that no cable is to be connected. This property is valid if no GPIOs are provided for cable states.</div><div id="wwpID0E0BG0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">wakeup-source</span>: A Boolean; true if the device can wake up the system.</div><div id="wwpID0E0AG0HA" class="Body_Text">For the detailed information about <span class="Code_Char">extcon</span>, refer to the documentation at:</div><div id="wwpID0E06F0HA" class="Code">kernel/kernel-4.9/Documentation/devicetree/bindings/extcon/extcon-gpio-states.txt</div><div id="wwpID0E05F0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Create an <span class="Code_Char">extcon</span> device node and property list based on the device tree structure described above and the table of <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0EAAF0OG0HA" title="Jetson Nano Adaptation and Bring-Up">GPIO states and cable states</a></span>. This example shows a node definition which assumes GPIO_PCC4 is the VBUS_DTECT pin and GPIO_PZ1 is the ID pin.</div><div id="wwpID0E04F0HA" class="Code_Indent">vbus_id_extcon: usb_otg {</div><div id="wwpID0E03F0HA" class="Code_Indent">    compatible = "extcon-gpio-states";</div><div id="wwpID0E02F0HA" class="Code_Indent">    extcon-gpio,name = "VBUS_ID";</div><div id="wwpID0E01F0HA" class="Code_Indent">    extcon-gpio,wait-for-gpio-scan = &lt;0&gt;;</div><div id="wwpID0E0ZF0HA" class="Code_Indent">    extcon-gpio,cable-states = &lt;0x3 0x0</div><div id="wwpID0E0YF0HA" class="Code_Indent">                                0x0 0x2</div><div id="wwpID0E0XF0HA" class="Code_Indent">                                0x1 0x2</div><div id="wwpID0E0WF0HA" class="Code_Indent">                                0x2 0x1&gt;;</div><div id="wwpID0E0VF0HA" class="Code_Indent">    gpios = &lt;&amp;gpio TEGRA_GPIO(CC, 4) 0</div><div id="wwpID0E0UF0HA" class="Code_Indent">            &amp;gpio TEGRA_GPIO(Z, 1) 0&gt;;</div><div id="wwpID0E0TF0HA" class="Code_Indent">    extcon-gpio,out-cable-names =</div><div id="wwpID0E0SF0HA" class="Code_Indent">            &lt;EXTCON_USB EXTCON_USB_HOST EXTCON_NONE&gt;;</div><div id="wwpID0E0RF0HA" class="Code_Indent">    #extcon-cells = &lt;1&gt;;</div><div id="wwpID0E0QF0HA" class="Code_Indent">};</div><div id="wwpID0E0PF0HA" class="Body_Text">The USB 2.0 Micro B connector, J28, has the connector’s ID pin floating and the VBUS_DETECT pin of the connector wired out to GPIO00, which corresponds to GPIO_PCC4. Hence J28 can only function in the device role.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0OF0HA" class="Body_Text"> <img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image7_10.png" style="display: inline; left: 0pt; top: 0pt" alt="A screenshot of a cell phoneDescription automatically generated" title="A screenshot of a cell phoneDescription automatically generated" /></div></div><div id="wwpID0E0NF0HA" class="Body_Text">This is the table of GPIO states on J28 and their corresponding output cable states:</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 30pt; padding-left: 5.75pt; padding-right: 5.75pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 99pt"><div id="wwpID0EABC0MF0HA" class="Cell_Heading">GPIO_PCC4 (VBUS_DETECT)</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 130.5pt"><div id="wwpID0EAAC0MF0HA" class="Cell_Heading">EXTCON_STATE</div></td></tr><tr><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0MF0HA" class="Cell_Text" style="text-align: center">1</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0MF0HA" class="Cell_Text">0x0 (EXCON_NONE)</div></td></tr><tr><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0MF0HA" class="Cell_Text" style="text-align: center">0</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0MF0HA" class="Cell_Text">0x1 (EXTCON_USB)</div></td></tr></table></div><div id="wwpID0E0LF0HA" class="Body_Text">This is the <span class="Code_Char">extcon</span> device node and property list based on the device tree structure described above and the table of <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0EAAF0OG0HA" title="Jetson Nano Adaptation and Bring-Up">GPIO states and corresponding output cable states</a></span> for GPIO_PCC4, customized for Jetson Nano, where the ID pin is floating the port is fixed in the device role:</div><div id="wwpID0E0KF0HA" class="Code">vbus_id_gpio_extcon: usb_otg {</div><div id="wwpID0E0JF0HA" class="Code">    compatible = "extcon-gpio-states";</div><div id="wwpID0E0IF0HA" class="Code">    extcon-gpio,name = "VBUS";</div><div id="wwpID0E0HF0HA" class="Code">    extcon-gpio,wait-for-gpio-scan = &lt;0&gt;;</div><div id="wwpID0E0GF0HA" class="Code">    extcon-gpio,cable-states = &lt;0x0 0x1</div><div id="wwpID0E0FF0HA" class="Code">                                0x1 0x0&gt;;</div><div id="wwpID0E0EF0HA" class="Code">    gpios = &lt;&amp;gpio TEGRA_GPIO(CC, 4) 0&gt;;</div><div id="wwpID0E0DF0HA" class="Code">    extcon-gpio,out-cable-names =</div><div id="wwpID0E0CF0HA" class="Code">            &lt;EXTCON_USB EXTCON_USB_HOST EXTCON_NONE&gt;;</div><div id="wwpID0E0BF0HA" class="Code">    #extcon-cells = &lt;1&gt;;</div><div id="wwpID0E0AF0HA" class="Code">};</div><div id="wwpID0E06E0HA" class="Body_Text">&nbsp;</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA05E0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 306pt"><div id="wwpID0EAAA05E0HA" class="Note_Text">Check the pinmux table for the GPIO that corresponds to the ID pin and VBUS_DETECT pin.</div></td></tr></table></div><div id="wwpID0E04E0HA" class="Heading_6">Under the xusb_padctl Node</div><div id="wwpID0E03E0HA" class="Body_Text"><span class="Code_Char">xusb_padctl</span> settings for an OTG-compatible port are the same as for a host-only port except that the mode must be <span class="Code_Char">otg</span>.</div><div id="wwpID0E02E0HA" class="Body_Text">For the example of J28, the USB 2.0 Micro B connector, create a pad/port node and property list:</div><div id="wwpID0E01E0HA" class="Code">xusb_padctl: xusb_padctl@7009f000 {</div><div id="wwpID0E0ZE0HA" class="Code">    ...</div><div id="wwpID0E0YE0HA" class="Code">    pads {</div><div id="wwpID0E0XE0HA" class="Code">        usb2 {</div><div id="wwpID0E0WE0HA" class="Code">            lanes {</div><div id="wwpID0E0VE0HA" class="Code">                usb2-0 {</div><div id="wwpID0E0UE0HA" class="Code">                    nvidia,function = "xusb";</div><div id="wwpID0E0TE0HA" class="Code">                    status = "okay";</div><div id="wwpID0E0SE0HA" class="Code">                };</div><div id="wwpID0E0RE0HA" class="Code">                ...</div><div id="wwpID0E0QE0HA" class="Code">            };</div><div id="wwpID0E0PE0HA" class="Code">        };</div><div id="wwpID0E0OE0HA" class="Code">        pcie {</div><div id="wwpID0E0NE0HA" class="Code">            lanes {</div><div id="wwpID0E0ME0HA" class="Code">                ...</div><div id="wwpID0E0LE0HA" class="Code">            };</div><div id="wwpID0E0KE0HA" class="Code">        };</div><div id="wwpID0E0JE0HA" class="Code">    };</div><div id="wwpID0E0IE0HA" class="Code">    ports {</div><div id="wwpID0E0HE0HA" class="Code">        usb2-0 {</div><div id="wwpID0E0GE0HA" class="Code">            mode = "otg";</div><div id="wwpID0E0FE0HA" class="Code">            vbus-supply = &lt;&amp;p3449_vdd_usb_vbus&gt;;</div><div id="wwpID0E0EE0HA" class="Code">            status = "okay";</div><div id="wwpID0E0DE0HA" class="Code">        };</div><div id="wwpID0E0CE0HA" class="Code">        ...</div><div id="wwpID0E0BE0HA" class="Code">    };</div><div id="wwpID0E0AE0HA" class="Code">};</div><div id="wwpID0E06D0HA" class="Heading_6">Under the xHCI Node</div><div id="wwpID0E05D0HA" class="Body_Text">The xHCI settings for an OTG-compatible port are the same as for a host-only port except for these additional <span class="Code_Char">extcon</span> settings:</div><div id="wwpID0E04D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-cables</span>: OTG feature support. Must contain a pointer to the <span class="Code_Char">extcon-cable</span> entry for the USB ID pin. When the <span class="Code_Char">extcon</span> cable state is 0, the OTG-compatible port transitions to the host role.</div><div id="wwpID0E03D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-cable-names</span>: Must be <span class="Code_Char">id</span>.</div><div id="wwpID0E02D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">#extcon-cells</span>: Number of cells in the <span class="Code_Char">extcon</span> specifier. Must be 1.</div><div id="wwpID0E01D0HA" class="Body_Text">For the example of J28, the USB2.0 Micro B connector, create an xHCI node and property list based on the device tree structure described in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/adaptation_and_bringup_nano.html#wwpID0E04H0HA" title="Jetson Nano Adaptation and Bring-Up">Under the xusb Node</a></span> for a host-only port, plus the additional settings above:</div><div id="wwpID0E0ZD0HA" class="Code">xusb@70090000 {</div><div id="wwpID0E0YD0HA" class="Code">    ...</div><div id="wwpID0E0XD0HA" class="Code">    extcon-cables = &lt;&amp;vbus_id_gpio_extcon 1&gt;;</div><div id="wwpID0E0WD0HA" class="Code">    extcon-cable-names = "id";</div><div id="wwpID0E0VD0HA" class="Code">    #extcon-cells = &lt;1&gt;;</div><div id="wwpID0E0UD0HA" class="Code">    phys = &lt;&amp;{/xusb_padctl@7009f000/pads/usb2/lanes/usb2-0}&gt;;</div><div id="wwpID0E0TD0HA" class="Code">    phy-names = "usb2-0";</div><div id="wwpID0E0SD0HA" class="Code">    nvidia,xusb-padctl = &lt;&amp;xusb_padctl&gt;;</div><div id="wwpID0E0RD0HA" class="Code">    status = "okay";</div><div id="wwpID0E0QD0HA" class="Code">    ...</div><div id="wwpID0E0PD0HA" class="Code">};</div><div id="wwpID0E0OD0HA" class="Heading_6">Under the xUDC Node</div><div id="wwpID0E0ND0HA" class="Body_Text">The Jetson Nano xUDC controller supports both USB 2.0 HighSpeed/FullSpeed and USB 3.0 SuperSpeed protocols.</div><div id="wwpID0E0MD0HA" class="Body_Text">These are the device tree node properties that apply to the xUDC node:</div><div id="wwpID0E0LD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-cables</span>: OTG feature support. Must contains an <span class="Code_Char">extcon-cable</span> entry that detects the USB VBUS pin. When the <span class="Code_Char">extcon</span> cable state is 1, the OTG-compatible port transitions to the device role.</div><div id="wwpID0E0KD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">extcon-cable-names</span>: Must be <span class="Code_Char">vbus</span>.</div><div id="wwpID0E0JD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">charger-detector</span>: USB charger detection support. Must be the phandle of the USB charger detection driver DT node.</div><div id="wwpID0E0ID0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">phys</span>: An array; must contain pointers to the nodes that define each PHY in <span class="Code_Char">phy-names</span>.</div><div id="wwpID0E0HD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">phy-names</span>: An array; must contain an entry for each PHY used by the controller. Names must be in the form <span class="Code_Char">&lt;type&gt;-&lt;port_number&gt;</span>, where <span class="Code_Char">&lt;type&gt;</span> is <span class="Code_Char">usb2</span> or <span class="Code_Char">usb3</span>.</div><div id="wwpID0E0GD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia,boost_cpu_freq</span>: The value to which CPU frequency is to be boosted. This is only the minimum frequency; DVFS can scale up CPU frequency further based on need and CPU load. CPU boost frequency through PMQOS is enabled for the xUDC controller only when this field’s value is greater than zero. The boost is applicable only to large bulk transfers on bulk endpoints; other endpoints do not need to be boosted.</div><div id="wwpID0E0FD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">nvidia,xusb-padctl</span>: A pointer to the <span class="Code_Char">xusb-padctl</span> node.</div><div id="wwpID0E0ED0HA" class="Body_Text">For the detailed information about xUDC, refer to the documentation at:</div><div id="wwpID0E0DD0HA" class="Code">kernel/kernel-4.9/Documentation/devicetree/bindings/usb/nvidia,tegra-xudc.txt</div><div id="wwpID0E0CD0HA" class="Body_Text">For the example of J28, the USB2.0 Micro B connector, create an xUDC node and property list for J28 based on the device tree structure described above:</div><div id="wwpID0E0BD0HA" class="Code">xudc@700d0000 {</div><div id="wwpID0E0AD0HA" class="Code">    extcon-cables = &lt;&amp;vbus_id_gpio_extcon 0&gt;;</div><div id="wwpID0E06C0HA" class="Code">    extcon-cable-names = "vbus";</div><div id="wwpID0E05C0HA" class="Code">    #extcon-cells = &lt;1&gt;;</div><div id="wwpID0E04C0HA" class="Code">    phys = &lt;&amp;{/xusb_padctl@7009f000/pads/usb2/lanes/usb2-0}&gt;,</div><div id="wwpID0E03C0HA" class="Code">    phy-names = "usb2";</div><div id="wwpID0E02C0HA" class="Code">    nvidia,xusb-padctl = &lt;&amp;xusb_padctl&gt;;</div><div id="wwpID0E01C0HA" class="Code">    status = "okay";</div><div id="wwpID0E0ZC0HA" class="Code">};</div><div id="wwpID0E0YC0HA" class="Heading_6">To resolve possible UPHY lane mapping issues</div><div id="wwpID0E0XC0HA" class="Body_Text">If you suspect a UPHY lane mapping issue, enter this command to check the lane assignments:</div><div id="wwpID0E0WC0HA" class="Code">./devmem 0x7009f028</div><div id="wwpID0E0VC0HA" class="Body_Text">(The hexadecimal number is the register address of the UPHY lane mux. It may be considered a constant.)</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 30pt; padding-left: 5.75pt; padding-right: 5.75pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 42pt"><div id="wwpID0EACH0UC0HA" class="Cell_Heading">Bits</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABH0UC0HA" class="Cell_Heading">Reset</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 247.5pt" colspan="2"><div id="wwpID0EAAH0UC0HA" class="Cell_Heading">Description</div></td></tr><tr><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 42pt"><div id="wwpID0EADG0UC0HA" class="Cell_Text" style="text-align: center">25-24</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EACG0UC0HA" class="Cell_Text" style="text-align: center">0x01</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 92.25pt"><div id="wwpID0EABG0UC0HA" class="Cell_Text">UPHY_LANE6</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 155.25pt" rowspan="6"><div id="wwpID0EDAG0UC0HA" class="Cell_Text">Each lane’s bits identify the function that owns the lane. Recognized values are:</div><div id="wwpID0ECAG0UC0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>0: PCIE_X1</div><div id="wwpID0EBAG0UC0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>1: USB3_SS</div><div id="wwpID0EAAG0UC0HA" class="Cell_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>3: PCIE_X4</div></td></tr><tr><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EADF0UC0HA" class="Cell_Text" style="text-align: center">23-22</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACF0UC0HA" class="Cell_Text" style="text-align: center">0x01</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0UC0HA" class="Cell_Text">UPHY_LANE5</div></td></tr><tr><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EADE0UC0HA" class="Cell_Text" style="text-align: center">21-20</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACE0UC0HA" class="Cell_Text" style="text-align: center">0x03</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0UC0HA" class="Cell_Text">UPHY_LANE4</div></td></tr><tr><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EADD0UC0HA" class="Cell_Text" style="text-align: center">19-18</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACD0UC0HA" class="Cell_Text" style="text-align: center">0x03</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0UC0HA" class="Cell_Text">UPHY_LANE3</div></td></tr><tr><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EADC0UC0HA" class="Cell_Text" style="text-align: center">17-16</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACC0UC0HA" class="Cell_Text" style="text-align: center">0x03</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0UC0HA" class="Cell_Text">UPHY_LANE2</div></td></tr><tr><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EADB0UC0HA" class="Cell_Text" style="text-align: center">15-14</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACB0UC0HA" class="Cell_Text" style="text-align: center">0x03</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0UC0HA" class="Cell_Text">UPHY_LANE1</div></td></tr><tr><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACA0UC0HA" class="Cell_Text" style="text-align: center">13-0</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0UC0HA" class="Cell_Text" style="text-align: center">—</div></td><td style="background-color: #FFFFFF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" colspan="2"><div id="wwpID0EAAA0UC0HA" class="Cell_Text">Reserved</div></td></tr></table></div><div id="wwpID0E0TC0HA" class="Body_Text">If a target UPHY Lane is not owned by the correct function, check the values of the PCIe subnode and properties under <span class="Code_Char">xusb_padctl</span> to be sure that the target lane is assigned correctly.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 49.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0SC0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 319.5pt"><div id="wwpID0EAAA0SC0HA" class="Note_Text" style="text-align: justify">Before you design your custom board, verify the lane mapping by consulting <span class="Hyperlink"><a href="https://developer.nvidia.com/embedded/downloads#?search=product%20design%20guide%20%20jetson%20nano%20devices" target="external_window">Product Design Guide for Jetson Nano Devices</a></span>.</div></td></tr></table></div><H3 id="wwpID0E0RC0HA" class="Heading_3">Fan speed control mapping table</H3><div id="wwpID0E0QC0HA" class="Body_Text">The temperature to fan speed mapping table can be modified with device tree properties.</div><div id="wwpID0E0PC0HA" class="Body_Text">The fan’s thermal zone temperature is approximated by the average of the CPU and GPU SOC thermal sensor readings. Fan speed is controlled by the PWM signal; its pulse width range is 0-255 units.</div><div id="wwpID0E0OC0HA" class="Body_Text">The mapping between temperature and fan speed is defined by thermal trips and fan cooling states. The thermal trips refer to the fan thermal zone’s temperature in degrees Celsius, and the fan cooling state are the PWM signal’s corresponding pulse widths. You can define trip temperatures and the corresponding cooling states by creating a custom fan mapping table.</div><div id="wwpID0E0NC0HA" class="Body_Text">The fan trip temperatures are defined by the <span class="Code_Char">active_trip_temps</span> property in the file:</div><div id="wwpID0E0MC0HA" class="Code">hardware/nvidia/platform/t210/porg/kernel-dts/porg-platforms/tegra210-porg-thermal-fan-est.dtsi</div><div id="wwpID0E0LC0HA" class="Body_Text">This example defines a set of fan thermal zone trip points:</div><div id="wwpID0E0KC0HA" class="Code">thermal-fan-est {</div><div id="wwpID0E0JC0HA" class="Code">    name = "thermal-fan-est";</div><div id="wwpID0E0IC0HA" class="Code">    compatible = "thermal-fan-est";</div><div id="wwpID0E0HC0HA" class="Code">    status = "okay";</div><div id="wwpID0E0GC0HA" class="Code">    num_resources = &lt;0&gt;;</div><div id="wwpID0E0FC0HA" class="Code">    shared_data = &lt;&amp;thermal_fan_est_shared_data&gt;;</div><div id="wwpID0E0EC0HA" class="Code">    trip_length = &lt;10&gt;;</div><div id="wwpID0E0DC0HA" class="Code">    active_trip_temps = &lt;0 51000 61000 71000 82000</div><div id="wwpID0E0CC0HA" class="Code">                         140000 150000 160000 170000 180000&gt;;</div><div id="wwpID0E0BC0HA" class="Code">    active_hysteresis = &lt;0 15000 9000 9000 10000</div><div id="wwpID0E0AC0HA" class="Code">                         0 0 0 0 0&gt;;</div><div id="wwpID0E06B0HA" class="Code">};</div><div id="wwpID0E05B0HA" class="Body_Text">The fan cooling states are defined by the <span class="Code_Char">active_pwm</span> property in the file:</div><div id="wwpID0E04B0HA" class="Code">hardware/nvidia/platform/t210/porg/kernel-dts/porg-platforms/tegra210-porg-pwm-fan.dtsi</div><div id="wwpID0E03B0HA" class="Body_Text">This example defines a corresponding set of cooling states:</div><div id="wwpID0E02B0HA" class="Code">pwm-fan {</div><div id="wwpID0E01B0HA" class="Code">    compatible = "pwm-fan";</div><div id="wwpID0E0ZB0HA" class="Code">    status = "okay";</div><div id="wwpID0E0YB0HA" class="Code">    pwms = &lt;&amp;tegra_pwm 3 45334&gt;;</div><div id="wwpID0E0XB0HA" class="Code">    shared_data = &lt;&amp;pwm_fan_shared_data&gt;;</div><div id="wwpID0E0WB0HA" class="Code">    active_pwm = &lt;0 80 120 160 255 255 255 255 255 255&gt;;</div><div id="wwpID0E0VB0HA" class="Code">};</div><H3 id="wwpID0E0UB0HA" class="Heading_3">Other Considerations When Porting</H3><div id="wwpID0E0TB0HA" class="Body_Text">This section discusses some other considerations and recommendations to keep in mind when porting.</div><H3 id="wwpID0E0SB0HA" class="Heading_3">Boot Time Reduction</H3><div id="wwpID0E0RB0HA" class="Body_Text">GNOME shell is the default display and window manager for Ubuntu 18.04. Although it brings a new look to the user experience it comes with performance and memory overhead problems. Many GDM3 and GNOME shell issues are known, with fixes under development. However, considering the Ubuntu release timelines and the trivial nature of the fixes, these fixes may not be backported to Ubuntu 18.04.</div><div id="wwpID0E0QB0HA" class="Body_Text">Therefore, below are some suggestions for reduce boot time by tweaking rootfs and kernel.</div><H4 id="wwpID0E0PB0HA" class="Heading_4">Root Filesystem</H4><div id="wwpID0E0OB0HA" class="Body_Text">These changes to the root filesystem may reduce boot time.</div><div id="wwpID0E0NB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Enable autologin for GDM3 (saves about 14&nbsp;to 19 seconds of boot time).</div><div id="wwpID0E0MB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Set power mode to MAXN (saves about 8&nbsp;to 10 seconds of boot time).</div><div id="wwpID0E0LB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Use a lightweight display manager like LightDM. The LightDM service takes about 3&nbsp;to 5 seconds to start.</div><div id="wwpID0E0KB0HA" class="List_Continue">To install and configure lightdm display manager, enter the commands:</div><div id="wwpID0E0JB0HA" class="Code">sudo apt-get update</div><div id="wwpID0E0IB0HA" class="Code">sudo apt-get install lightdm</div><div id="wwpID0E0HB0HA" class="Code">sudo dpkg-reconfigure lightdm</div><div id="wwpID0E0GB0HA" class="List_Continue">NVIDIA recommends LightDM GTK+ Greeter as the default LightDM login greeter. To install this component, enter the commands:</div><div id="wwpID0E0FB0HA" class="Code">sudo apt-get update</div><div id="wwpID0E0EB0HA" class="Code">sudo apt-get install lightdm-gtk-greeter</div><div id="wwpID0E0DB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Use a lightweight window manager like LXDE. LXDE takes 3&nbsp;to 4 seconds to bring up the desktop after login.</div><div id="wwpID0E0CB0HA" class="List_Continue">To install and enable LXDE and Compton, enter the commands:</div><div id="wwpID0E0BB0HA" class="Code">sudo apt-get update</div><div id="wwpID0E0AB0HA" class="Code">sudo apt-get install lxde compton</div><div id="wwpID0E6HA" class="List_Continue">Create the configuration file <span class="Code_Char">/etc/xdg/autostart/lxde-compton.desktop</span>, containing these commands:</div><div id="wwpID0E5HA" class="Code">[Desktop Entry]</div><div id="wwpID0E4HA" class="Code">Type=Application</div><div id="wwpID0E3HA" class="Code">Name=Compton (X Compositor)</div><div id="wwpID0E2HA" class="Code">GenericName=X compositor</div><div id="wwpID0E1HA" class="Code">Comment=A X compositor</div><div id="wwpID0EZHA" class="Code">TryExec=compton</div><div id="wwpID0EYHA" class="Code">Exec=compton --backend glx -b</div><div id="wwpID0EXHA" class="Code">OnlyShowIn=LXDE</div><H4 id="wwpID0EWHA" class="Heading_4">Kernel</H4><div id="wwpID0EVHA" class="Body_Text"><span style="background-color: #FFFFFF">Pass the “quiet” option to the kernel reduces kernel boot time by about 10&nbsp;seconds.</span></div><div id="wwpID0EUHA" class="Body_Text">In <span class="Code_Char">/boot/extlinux/extlinux.conf</span> in the target rootfs, set the <span class="Code_Char">APPEND</span> parameter to <span class="Code_Char">quiet</span> (or add <span class="Code_Char">quiet</span> to the parameter if it is already defined:</div><div id="wwpID0ETHA" class="Code">APPEND ${cbootargs} quiet</div><H3 id="wwpID0ESHA" class="Heading_3">Customizing Settings for Flashing the Module</H3><div id="wwpID0ERHA" class="Body_Text">If you customize settings for flashing the module, you must review and modify two flash configuration files:</div><div id="wwpID0EQHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The common file: <span class="Code_Char">p3448-0000.conf.common</span></div><div id="wwpID0EPHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The device-specific file:</div><div id="wwpID0EOHA" class="List_Bullet_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For an original Jetson Nano (P3448-0000): <span class="Code_Char">jetson-nano-sd.conf</span></div><div id="wwpID0ENHA" class="List_Bullet_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For an original Jetson Nano (P3448-0002): <span class="Code_Char">jetson-nano-qspi.conf</span></div><div id="wwpID0EMHA" class="List_Bullet_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span style="font-family: &quot;Palatino Linotype&quot;">•	</span></span>For a Jetson Nano 2GB (P3448-0003): <span class="Code_Char">jetson-nano-2gb-devkit.conf</span></div><div id="wwpID0ELHA" class="Body_Text">These are some changes you may want to make in the <span class="Code_Char">.conf</span> files:</div><div id="wwpID0EKHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To change your project’s name, rename the device-specific file.</div><div id="wwpID0EJHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>You need not specify an EEPROM board ID for your custom carrier board.</div><div id="wwpID0EIHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If you don’t want to use the Dynamic Freq and Voltage Scaling feature, you can disable it with the kernel configuration parameter <span class="Code_Char">CONFIG_TEGRA_‌210_DVFS</span>.</div><div id="wwpID0EHHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To change secondary boot storage you must specify the size of the eMMC in the appropriate configuration file:</div><div id="wwpID0EGHA" class="List_Bullet_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To flash QSPI only on original Jetson Nano (P3448-0000): <span class="Code_Char">jetson-nano-qspi.conf</span></div><div id="wwpID0EFHA" class="List_Bullet_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To flash QSPI and SD card on original Jetson Nano (P3448-0000): <span class="Code_Char">jetson-nano-sd.conf</span></div><div id="wwpID0EEHA" class="List_Bullet_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To flash eMMC on original Jetson Nano (P3448-0002): <span class="Code_Char">jetson-nano-emmc.conf</span></div><div id="wwpID0EDHA" class="List_Continue_2">You also must specify eMMC size in <span class="Code_Char">p3448-0000.conf.common</span>.</div><div id="wwpID0ECHA" class="List_Bullet_2" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To flash Jetson Nano 2GB: <span class="Code_Char">jetson-nano-2gb-devkit.conf</span></div><div id="wwpID0EBHA" class="List_Continue">Also review the parameters in the applicable <span class="Code_Char">.conf</span> files to see whether any of them need to be changed.</div><hr style="clear: both" /><div id="wwpID0EAAAA" class="Footnote_Text"><sup id="wwnoteID0EAA0WR0HA"><a href="#wwfootnote_inline_noteID0EAA0WR0HA">1</a></sup>  Version A02 of the P3449 carrier board is not compatible with the P3448-0020 SOM.</div><br style="clear: both" /></div><div id="page_dates"></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></body></html>