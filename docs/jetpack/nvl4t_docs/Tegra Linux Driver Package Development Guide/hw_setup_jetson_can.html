<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- NVIDIA customization --><title>NVIDIA Jetson Linux Driver Package Software Features : Hardware Setup | NVIDIA Docs </title><link rel="Prev" href="hw_setup_jetson_io.html" title="Previous" /><link rel="Next" href="asoc_driver.19.1.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/font-awesome.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/hw_setup_jetson_can.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="pCosP3wS6vKanaxv70L_002bpNA" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="fa"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --></header><div id="page_content_container" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px"><div id="page_content"><H2 id="wwpID0E0IE0HA" class="Heading_2">CAN (Controller Area Network)</H2><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E0FE0HA">Important Features</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E06D0HA">Jetson Platform Details</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E03D0HA">Enabling CAN</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E0SD0HA">Kernel DTB</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E0ID0HA">Pinmux</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E05C0HA">Kernel Drivers</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E0PC0HA">Managing the Network</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E03B0HA">Debug Methods</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E01B0HA">Loopback test</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E0OB0HA">Other Methods</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E0HB0HA">Obtaining Higher Bit Rates</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E0AB0HA">Changing the CAN parent clock on T194 platforms</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E2HA">Changing the CAN Clock Rate</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0EOHA">CAN on Jetson Nano Devices</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0EMHA">To connect an MCP251x chip to Jetson Nano</a></div></dd></dl></dl></div><div id="wwpID0E0HE0HA" class="Body_Text_Indent"><span class="Strong">Applies to</span>: Jetson Xavier NX, Jetson AGX Xavier series, and Jetson TX2 series only</div><div id="wwpID0E0GE0HA" class="Body_Text">This topic describes the Time Triggered CAN (TTCAN) controller on the Always-On block of the NVIDIA SoC, and how to use it in userspace.</div><H3 id="wwpID0E0FE0HA" class="Heading_3">Important Features</H3><div id="wwpID0E0EE0HA" class="Body_Text">The Time Triggered CAN controller has several important features:</div><div id="wwpID0E0DE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>It supports standard and extended frame transmission</div><div id="wwpID0E0CE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Its CAN bus bit rate can be configured from 10&nbsp;kbps to 1&nbsp;Mbps</div><div id="wwpID0E0BE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>It supports CAN FD mode with a maximum data bit rate of 15&nbsp;Mbps. All types of transceivers can achieve a 5&nbsp;Mbps data bit rate.</div><div id="wwpID0E0AE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>It can deliver higher data bit rates if you configure the TDCR (Transmission Delay Compensation Register) through its userspace sysfs node.</div><H3 id="wwpID0E06D0HA" class="Heading_3">Jetson Platform Details</H3><div id="wwpID0E05D0HA" class="Body_Text">The following table shows details of the CAN implementation on each supported platform.</div><div class="ww_skin_page_overflow"><table class="Table_Grid" style="margin-left: 36pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 107.85pt" colspan="2"><div id="wwpID0EADJ04D0HA" class="Cell_Heading">Property</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0EACJ04D0HA" class="Cell_Heading">Jetson Xavier NX &amp; Jetson TX2 NX</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 93.3pt"><div id="wwpID0EABJ04D0HA" class="Cell_Heading">Jetson AGX Xavier series</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0EAAJ04D0HA" class="Cell_Heading">Jetson TX2</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 107.85pt" colspan="2"><div id="wwpID0EADI04D0HA" class="Cell_Text">Number of controllers</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0EACI04D0HA" class="Cell_Text" style="text-align: center">1</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 93.3pt"><div id="wwpID0EABI04D0HA" class="Cell_Text" style="text-align: center">2</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0EAAI04D0HA" class="Cell_Text" style="text-align: center">2</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 107.85pt" colspan="2"><div id="wwpID0EADH04D0HA" class="Cell_Text">Controller<br />base address</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0EACH04D0HA" class="Cell_Text">mttcan@c310000</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 93.3pt"><div id="wwpID0EBBH04D0HA" class="Cell_Text">mttcan@c310000</div><div id="wwpID0EABH04D0HA" class="Cell_Text">mttcan@c320000</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0EAAH04D0HA" class="Cell_Text">mttcan@c310000<br />mttcan@c320000</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 107.85pt" colspan="2"><div id="wwpID0EADG04D0HA" class="Cell_Text">Pins on Jetson<br />carrier board</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0ECCG04D0HA" class="Cell_Text">J17:</div><div id="wwpID0EBCG04D0HA" class="Cell_Text">CAN_RX: [1]</div><div id="wwpID0EACG04D0HA" class="Cell_Text">CAN_TX: [2]</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 93.3pt"><div id="wwpID0EEBG04D0HA" class="Cell_Text">J30 (40-pin header):</div><div id="wwpID0EDBG04D0HA" class="Cell_Text">CAN0_DIN: [29]</div><div id="wwpID0ECBG04D0HA" class="Cell_Text">CAN0_DOUT: [31]</div><div id="wwpID0EBBG04D0HA" class="Cell_Text">CAN1_DIN: [37]</div><div id="wwpID0EABG04D0HA" class="Cell_Text">CAN1_DOUT: [33]</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0EEAG04D0HA" class="Cell_Text">J26 (30-pin header):</div><div id="wwpID0EDAG04D0HA" class="Cell_Text">CAN0_RX: [5]</div><div id="wwpID0ECAG04D0HA" class="Cell_Text">CAN0_TX: [7]</div><div id="wwpID0EBAG04D0HA" class="Cell_Text">CAN1_RX: [15]</div><div id="wwpID0EAAG04D0HA" class="Cell_Text">CAN1_TX: [17]</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 107.85pt" colspan="2"><div id="wwpID0EADF04D0HA" class="Cell_Text">Pinmux</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0EACF04D0HA" class="Cell_Text">&nbsp;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 93.3pt"><div id="wwpID0EABF04D0HA" class="Cell_Text">&nbsp;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0EAAF04D0HA" class="Cell_Text">&nbsp;</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 26.9pt"><div id="wwpID0EAEE04D0HA" class="Cell_Text" style="text-indent: 0pt">&nbsp;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 80.95pt"><div id="wwpID0ECDE04D0HA" class="Cell_Text"><span class="Code_Char">can0_din</span></div><div id="wwpID0EBDE04D0HA" class="Cell_Text" style="text-align: right; text-indent: 0pt">Address:</div><div id="wwpID0EADE04D0HA" class="Cell_Text" style="text-align: right; text-indent: 0pt">Value:</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0ECCE04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBCE04D0HA" class="Cell_Text">0x0c303020</div><div id="wwpID0EACE04D0HA" class="Cell_Text">0x458</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 93.3pt"><div id="wwpID0ECBE04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBBE04D0HA" class="Cell_Text">0x0c303018</div><div id="wwpID0EABE04D0HA" class="Cell_Text">0x458</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 94.25pt"><div id="wwpID0ECAE04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBAE04D0HA" class="Cell_Text">0x0c303020</div><div id="wwpID0EAAE04D0HA" class="Cell_Text">0x458</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAED04D0HA" class="Cell_Text" style="text-indent: 0pt">&nbsp;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECDD04D0HA" class="Cell_Text"><span class="Code_Char">can0_dout</span></div><div id="wwpID0EBDD04D0HA" class="Cell_Text" style="text-align: right; text-indent: 0pt">Address:</div><div id="wwpID0EADD04D0HA" class="Cell_Text" style="text-align: right; text-indent: 0pt">Value:</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECCD04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBCD04D0HA" class="Cell_Text">0x0c303018</div><div id="wwpID0EACD04D0HA" class="Cell_Text">0x400</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECBD04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBBD04D0HA" class="Cell_Text">0x0c303010</div><div id="wwpID0EABD04D0HA" class="Cell_Text">0x400</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAD04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBAD04D0HA" class="Cell_Text">0x0c303018</div><div id="wwpID0EAAD04D0HA" class="Cell_Text">0x400</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAEC04D0HA" class="Cell_Text" style="text-indent: 0pt">&nbsp;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECDC04D0HA" class="Cell_Text"><span class="Code_Char">can1_din</span></div><div id="wwpID0EBDC04D0HA" class="Cell_Text" style="text-align: right; text-indent: 0pt">Address:</div><div id="wwpID0EADC04D0HA" class="Cell_Text" style="text-align: right; text-indent: 0pt">Value:</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACC04D0HA" class="Cell_Text" style="text-indent: 0pt">n/a</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECBC04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBBC04D0HA" class="Cell_Text">0x0c303008</div><div id="wwpID0EABC04D0HA" class="Cell_Text">0x458</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAC04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBAC04D0HA" class="Cell_Text">0x0c303010</div><div id="wwpID0EAAC04D0HA" class="Cell_Text">0x458</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAEB04D0HA" class="Cell_Text" style="text-indent: 0pt">&nbsp;</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECDB04D0HA" class="Cell_Text"><span class="Code_Char">can1_dout</span></div><div id="wwpID0EBDB04D0HA" class="Cell_Text" style="text-align: right; text-indent: 0pt">Address:</div><div id="wwpID0EADB04D0HA" class="Cell_Text" style="text-align: right; text-indent: 0pt">Value:</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACB04D0HA" class="Cell_Text">n/a</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECBB04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBBB04D0HA" class="Cell_Text">0x0c303000</div><div id="wwpID0EABB04D0HA" class="Cell_Text">0x400</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAB04D0HA" class="Cell_Text">&nbsp;</div><div id="wwpID0EBAB04D0HA" class="Cell_Text">0x0c303008</div><div id="wwpID0EAAB04D0HA" class="Cell_Text">0x400</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" colspan="2"><div id="wwpID0EADA04D0HA" class="Cell_Text">Default pin<br />configuration</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACA04D0HA" class="Cell_Text">SFIO: CAN functionality</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA04D0HA" class="Cell_Text">GPIO</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA04D0HA" class="Cell_Text">SFIO: CAN functionality</div></td></tr></table></div><H3 id="wwpID0E03D0HA" class="Heading_3">Enabling CAN</H3><div id="wwpID0E02D0HA" class="Body_Text">The interface from Jetson to CAN requires a transceiver that supports a minimum of 3.3&nbsp;V and a transfer rate based on the Jetson platform’s specifications. See the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E0FE0HA" title="CAN (Controller Area Network)">Important Features</a></span> for details.</div><div id="wwpID0E01D0HA" class="Body_Text">NVIDIA recommends the <span class="Hyperlink"><a href="https://www.amazon.com/SN65HVD230-CAN-Board-Communication-Development/dp/B00KM6XMXO" target="external_window">WaveShare SN65HVD230 CAN board</a></span> for development systems. Your choice of transceiver for production devices depends on your application’s requirements.</div><div id="wwpID0E0ZD0HA" class="Body_Text">Make the following connections from the transceiver to the Jetson carrier board:</div><div id="wwpID0E0YD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Transceiver Rx to Jetson CAN_RX</div><div id="wwpID0E0XD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Transceiver Tx to Jetson CAN_TX</div><div id="wwpID0E0WD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Transceiver VCC to Jetson 3.3V pin</div><div id="wwpID0E0VD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Transceiver GND to Jetson GND pin</div><div id="wwpID0E0UD0HA" class="Body_Text">This diagram shows an example of a correct connection:</div><div class="ww_skin_page_overflow"><div id="wwpID0E0TD0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/hw_setup_jetson_can.1.1.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" title="" /></div></div><H4 id="wwpID0E0SD0HA" class="Heading_4">Kernel DTB</H4><div id="wwpID0E0RD0HA" class="Body_Text">By default, + nodes are enabled in the kernel device tree:</div><div id="wwpID0E0QD0HA" class="Code">mttcan@c310000 {</div><div id="wwpID0E0PD0HA" class="Code">    status = "okay";</div><div id="wwpID0E0OD0HA" class="Code">};</div><div id="wwpID0E0ND0HA" class="Code">mttcan@c320000 {</div><div id="wwpID0E0MD0HA" class="Code">    status = "okay";</div><div id="wwpID0E0LD0HA" class="Code">};</div><div id="wwpID0E0KD0HA" class="Body_Text">You can also check this field from userspace:</div><div id="wwpID0E0JD0HA" class="Code">$ cat /proc/device-tree/mttcan\@c310000/status</div><H4 id="wwpID0E0ID0HA" class="Heading_4">Pinmux</H4><div id="wwpID0E0HD0HA" class="Body_Text" style="text-align: justify">Make sure that the pinmux register settings are applied as shown by the table in the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E06D0HA" title="CAN (Controller Area Network)">Jetson Platform Details</a></span>. </div><div id="wwpID0E0GD0HA" class="Body_Text">Pinmux can be updated in several ways:</div><div id="wwpID0E0FD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Use a busybox devmem tool to write to hardware registers. Changes will persist only until the system is rebooted.</div><div id="wwpID0E0ED0HA" class="List_Continue">Enter this command to install busybox:</div><div id="wwpID0E0DD0HA" class="Code">$ sudo apt-get install busybox</div><div id="wwpID0E0CD0HA" class="List_Continue">This example writes the value <span class="Code_Char">0x458</span> to register address <span class="Code_Char">0x0c303020</span>:</div><div id="wwpID0E0BD0HA" class="Code">$ busybox devmem 0x0c303020 w 0x458</div><div id="wwpID0E0AD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Update the respective platform pinmux configuration files and flash the updated files.</div><div id="wwpID0E06C0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Use the <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_io.html#wwpID0E0ZE0HA" title="Configuring Jetson Expansion Header">Jetson-IO tool</a></span> to enable pins.</div><H3 id="wwpID0E05C0HA" class="Heading_3">Kernel Drivers</H3><div id="wwpID0E04C0HA" class="Body_Text">Load all of the necessary CAN kernel drivers in the order shown.</div><div id="wwpID0E03C0HA" class="Heading_5">To load the CAN kernel drivers</div><div id="wwpID0E02C0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Insert the CAN BUS subsystem support module:</div><div id="wwpID0E01C0HA" class="Code">$ modprobe can</div><div id="wwpID0E0ZC0HA" class="List_Continue">or</div><div id="wwpID0E0YC0HA" class="Code">$ insmod /lib/modules/4.x.xxx-tegra/kernel/net/can/can.ko</div><div id="wwpID0E0XC0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Insert the raw CAN protocol module (CAN-ID filtering):</div><div id="wwpID0E0WC0HA" class="Code">$ modprobe can_raw</div><div id="wwpID0E0VC0HA" class="List_Continue">or</div><div id="wwpID0E0UC0HA" class="Code">$ insmod /lib/modules/4.x.xxx-tegra/kernel/net/can/can-raw.ko</div><div id="wwpID0E0TC0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Add real CAN interface support (for Jetson, <span class="Code_Char">mttcan</span>):</div><div id="wwpID0E0SC0HA" class="Code">$ modprobe mttcan</div><div id="wwpID0E0RC0HA" class="List_Continue">or</div><div id="wwpID0E0QC0HA" class="Code">$ insmod /lib/modules/4.x.xxx-tegra/kernel/drivers/net/can/mttcan/native/mttcan.ko</div><H3 id="wwpID0E0PC0HA" class="Heading_3">Managing the Network</H3><div id="wwpID0E0OC0HA" class="Body_Text">To use the network, you must first bring up CAN devices on the network and install a group of CAN utilities to use for testing. Then you can transfer packets and debug the network interface if necessary.</div><div id="wwpID0E0NC0HA" class="Heading_5">To set the interface properties</div><div id="wwpID0E0MC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>These example commands set the network interface to use FD (Flexible Data) mode with a bus bit rate of 500&nbsp;kbps and a data bit rate of 1&nbsp;Mbps, enter the commands:</div><div id="wwpID0E0LC0HA" class="Code">$ ip link set can0 up type can bitrate 500000 dbitrate 1000000 berr-reporting on fd on</div><div id="wwpID0E0KC0HA" class="Code">$ ip link set can1 up type can bitrate 500000 dbitrate 1000000 berr-reporting on fd on</div><div id="wwpID0E0JC0HA" class="Heading_5">To install the CAN utilities</div><div id="wwpID0E0IC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Enter this command:</div><div id="wwpID0E0HC0HA" class="Code">$ sudo apt-get install can-utils</div><div id="wwpID0E0GC0HA" class="Heading_5">To transfer packets</div><div id="wwpID0E0FC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>This example command transfers a packet to <span class="Code_Char">can0</span> with can‑id <span class="Code_Char">123</span> and data ‘<span class="Code_Char">abcdabcd</span>’:</div><div id="wwpID0E0EC0HA" class="Code">$ cansend can0 123#abcdabcd</div><div id="wwpID0E0DC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>This example command receives a packet from any CAN node connected to the bus:</div><div id="wwpID0E0CC0HA" class="Code">$ candump -x any &amp;</div><div id="wwpID0E0BC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>This example command transfers an FD frame to <span class="Code_Char">can0</span> with can‑id <span class="Code_Char">123</span>, flag bit <span class="Code_Char">1</span> and data ‘<span class="Code_Char">abcdabcd</span>’:</div><div id="wwpID0E0AC0HA" class="Code">$ cansend can0 123##1abcdabcd</div><div id="wwpID0E06B0HA" class="Body_Text">For more information about the use of <span class="Code_Char">cansend</span>, enter this command:</div><div id="wwpID0E05B0HA" class="Code">$ cansend --help</div><div id="wwpID0E04B0HA" class="Body_Text">You can use other tools, such as <span class="Code_Char">cangen</span>, for different filtering options.</div><H3 id="wwpID0E03B0HA" class="Heading_3">Debug Methods</H3><div id="wwpID0E02B0HA" class="Body_Text">This section discusses methods of debugging CAN network problems.</div><H4 id="wwpID0E01B0HA" class="Heading_4">Loopback test</H4><div id="wwpID0E0ZB0HA" class="Body_Text">You may perform a loopback test to determine whether the controller is working.</div><div id="wwpID0E0YB0HA" class="Heading_5">To perform a loopback test</div><div id="wwpID0E0XB0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Short the Tx and Rx pins of the Jetson carrier board’s <span class="Code_Char">CAN0</span>.</div><div id="wwpID0E0WB0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Enable the CAN drivers. (See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E05C0HA" title="CAN (Controller Area Network)">Kernel Drivers</a></span> for more information.)</div><div id="wwpID0E0VB0HA" class="Code">$ ip link set can0 type can bitrate 500000 loopback on</div><div id="wwpID0E0UB0HA" class="Code">$ ip link set can0 up</div><div id="wwpID0E0TB0HA" class="Code">$ candump can0 &amp;</div><div id="wwpID0E0SB0HA" class="Code">$ cansend can0 123#abcdabcd</div><div id="wwpID0E0RB0HA" class="List_Continue">If the loopback test is successful, the last command displays this:</div><div id="wwpID0E0QB0HA" class="Code">can0  123   [4]  AB CD AB CD</div><div id="wwpID0E0PB0HA" class="Code">can0  123   [4]  AB CD AB CD</div><H4 id="wwpID0E0OB0HA" class="Heading_4">Other Methods</H4><div id="wwpID0E0NB0HA" class="Body_Text">Several other debugging techniques may be useful in appropriate cases:</div><div id="wwpID0E0MB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If a loopback test shows that the controller is working correctly and you are still not able to send or receive packets, try reconnecting the transceiver and confirm that the connections are correctly made.</div><div id="wwpID0E0LB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Check whether all of the steps necessary to enable CAN were done properly.</div><div id="wwpID0E0KB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Connect an oscilloscope and see whether the bus is behaving properly.</div><div id="wwpID0E0JB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If the device logs a "No buffer space available" message during send, enter this command to use the polling mechanism:</div><div id="wwpID0E0IB0HA" class="Code">$ cangen -L 8 can0 -p 1000</div><H3 id="wwpID0E0HB0HA" class="Heading_3">Obtaining Higher Bit Rates</H3><div id="wwpID0E0GB0HA" class="Body_Text">You can obtain higher data bit rates by configuring the TDCR (Transmission Delay Compensation Register) through its userspace sysfs node.</div><div id="wwpID0E0FB0HA" class="Body_Text">Make sure that the transceiver being used is able to support higher bit rates.</div><div id="wwpID0E0EB0HA" class="Heading_5">To configure the TDCR for higher bit rates</div><div id="wwpID0E0DB0HA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Enter the command:</div><div id="wwpID0E0CB0HA" class="Code">$ echo 0x600 &gt; /sys/devices/c320000.mttcan/net/can1/tdcr</div><div id="wwpID0E0BB0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Bring up the CAN interface on the network and transfer packets. See <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_can.html#wwpID0E0PC0HA" title="CAN (Controller Area Network)">Managing the Network</a></span> for more information.</div><H3 id="wwpID0E0AB0HA" class="Heading_3">Changing the CAN parent clock on T194 platforms</H3><div id="wwpID0E6HA" class="Body_Text_Indent"><span class="Strong">Applies to</span>: Jetson Xavier NX and Jetson AGX Xavier series devices only</div><div id="wwpID0E5HA" class="Body_Text">On devices based on the NVIDIA T194 SoC, the CAN parent clock is PLL_C. The PLL_C clock’s core clock frequency is set to 34&nbsp;MHz. </div><div id="wwpID0E4HA" class="Body_Text">To set a higher clock frequency or to obtain a bit rate of exactly 1&nbsp;Mbps, enable the PLLAON clock and make it the parent clock of MTTCAN.</div><div id="wwpID0E3HA" class="Normal" style="text-indent: 1.5pt">For information about using PLLAON as the parent clock of MTTCAN, see the section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/clocks.html#wwpID0E04B0HA" title="Clocks">Configuring Clocks</a></span> in the topic <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/clocks.html#" title="Clocks">Clocks</a></span>.</div><H3 id="wwpID0E2HA" class="Heading_3">Changing the CAN Clock Rate</H3><div id="wwpID0E1HA" class="Body_Text">The mttcan kernel driver sets the CAN clock rate. Follow the instructions in the <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/kernel_custom.html#" title="Kernel Customization">Kernel Customization</a></span> topic’s section <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/kernel_custom.html#wwpID0E0NE0HA" title="Kernel Customization">Obtaining the Kernel Sources with Git</a></span> to obtain kernel source code, then update the clock rate in the mttcan driver as in this code snippet:</div><div id="wwpID0EZHA" class="Code">.set_can_core_clk = true,</div><div id="wwpID0EYHA" class="Code">.can_core_clk_rate = 50000000, //// modify here (in Hz)</div><div id="wwpID0EXHA" class="Code">.can_clk_rate = 200000000, //// four times of core clk rate</div><div id="wwpID0EWHA" class="Body_Text">The default CAN clock rate is:</div><div id="wwpID0EVHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Jetson Xavier NX: 50&nbsp;MHz</div><div id="wwpID0EUHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Jetson AGX Xavier series: 50&nbsp;MHz</div><div id="wwpID0ETHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Jetson TX2 series: 40&nbsp;MHz</div><div id="wwpID0ESHA" class="Body_Text">To check the clock rate set in software via userspace sysfs node, enter this command:</div><div id="wwpID0ERHA" class="Code">$ cat /sys/kernel/debug/bpmp/debug/clk/can0/rate</div><div id="wwpID0EQHA" class="Body_Text">To check actual clock rate set in hardware via userspace sysfs node, enter this command:</div><div id="wwpID0EPHA" class="Code">$ cat /sys/kernel/debug/bpmp/debug/clk/can0/pto_counter</div><H3 id="wwpID0EOHA" class="Heading_3">CAN on Jetson Nano Devices</H3><div id="wwpID0ENHA" class="Body_Text">A CAN controller is not available in Jetson Nano devices, but you can use an MCP251x chip (SPI <span style="font-family: &quot;Times New Roman&quot;">to</span> CAN interface), which works with the SPI interface on Jetson Nano.</div><H4 id="wwpID0EMHA" class="Heading_4">To connect an MCP251x chip to Jetson Nano</H4><div id="wwpID0ELHA" class="List_Number" style="text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Connect the MCP device’s INT pin to the Jetson Nano carrier board’s 40‑pin expansion header.</div><div id="wwpID0EKHA" class="List_Continue">There are two SPI controllers with pin-outs on the 40‑pin expansion header.</div><div id="wwpID0EJHA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To use SPI1, connect INT to the 40‑pin expansion header’s pin 31.</div><div id="wwpID0EIHA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To use SPI2, connect INT to the 40‑pin expansion header’s pin 32.</div><div id="wwpID0EHHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Connect the SPI1 and SPI2 (MOSI, MISO, CS0, SCK) pins of Jetson Nano with the MCP251x device's respective SPI pins.</div><div id="wwpID0EGHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Start the <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/hw_setup_jetson_io.html#wwpID0E0ZE0HA" title="Configuring Jetson Expansion Header">Jetson-IO</a></span> tool on the Jetson device.</div><div id="wwpID0EFHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Go to the hardware section of the Jetson‑IO interface and select the MCP device.</div><div id="wwpID0EEHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Reboot the Jetson device when Jetson‑IO prompts you to do so.</div><div id="wwpID0EDHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>6.	</span></span>After the Jetson device reboots, check the network connections. If the device has connected correctly to the network it shows two CAN nodes, <span class="Code_Char">CAN0</span> and <span class="Code_Char">CAN1</span>. Watch for nodes that should not be present as well as nodes that are missing.</div><div id="wwpID0ECHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>7.	</span></span>Connect the bus to the MCP devices. (Connect CANH to CANH and CANL to CANL.)</div><div id="wwpID0EBHA" class="Body_Text">You can now transfer packets to any of the connected devices.</div></div><div id="page_dates"></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></body></html>